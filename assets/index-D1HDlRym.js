const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/web-ZvjHX4Zu.js","assets/phaser-0RJB29YE.js"])))=>i.map(i=>d[i]);
var bt=Object.defineProperty;var Tt=(p,t,n)=>t in p?bt(p,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):p[t]=n;var tt=(p,t,n)=>Tt(p,typeof t!="symbol"?t+"":t,n);import{P as C}from"./phaser-0RJB29YE.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))e(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&e(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function e(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();class st{constructor(t=6){this.gridSize=t,this.totalCells=t*t}generate(t={}){const{difficulty:n=2,maxAttempts:e=100}=t;for(let s=0;s<e;s++){const i=this.generateOnce();if(i&&this.strictValidate(i))return this.formatLevelData(i,n)}return console.error("„É¨„Éô„É´ÁîüÊàê„Å´Â§±Êïó"),null}generateOnce(){const t=this.generateSnakePath(),n=Math.random()<.5?3:4,e=this.splitPathSafely(t,n);if(!e||this.hasAdjacentEndpoints(e))return null;const s=this.createEmptyGrid(),i=e.map((o,a)=>{const r=a+1;return o.forEach(l=>{s[l.row][l.col]=r}),{id:r,cells:[...o],start:{...o[0]},end:{...o[o.length-1]},length:o.length}});return{grid:s,paths:i}}generateSnakePath(){const t=[];switch(Math.floor(Math.random()*4)){case 0:this.snakeHorizontal(t,0,1);break;case 1:this.snakeHorizontal(t,this.gridSize-1,-1);break;case 2:this.snakeVertical(t,0,1);break;case 3:this.snakeVertical(t,this.gridSize-1,-1);break}return t}snakeHorizontal(t,n,e){for(let s=0;s<this.gridSize;s++)if(s%2===0==(e===1))for(let o=0;o<this.gridSize;o++)t.push({row:s,col:o});else for(let o=this.gridSize-1;o>=0;o--)t.push({row:s,col:o})}snakeVertical(t,n,e){for(let s=0;s<this.gridSize;s++)if(s%2===0==(e===1))for(let o=0;o<this.gridSize;o++)t.push({row:o,col:s});else for(let o=this.gridSize-1;o>=0;o--)t.push({row:o,col:s})}splitPathSafely(t,n){const s=t.length;if(s<n*5)return null;const i=[0],o=Math.floor(s/n);for(let r=1;r<n;r++){const l=r*o,c=Math.floor(Math.random()*(o/2))-Math.floor(o/4);let d=l+c;const h=i[i.length-1]+5,u=s-(n-r)*5;d=Math.max(h,Math.min(u,d)),i.push(d)}i.push(s);const a=[];for(let r=0;r<i.length-1;r++){const l=i[r],c=i[r+1],d=t.slice(l,c);if(d.length<5)return null;a.push(d)}return a}hasAdjacentEndpoints(t){for(const n of t){const e=n[0],s=n[n.length-1];if(Math.abs(e.row-s.row)+Math.abs(e.col-s.col)<=1)return!0}return!1}strictValidate(t){const{grid:n,paths:e}=t;for(let i=0;i<this.gridSize;i++)for(let o=0;o<this.gridSize;o++)if(n[i][o]===0)return console.log(`‚ùå Ê§úË®ºÂ§±Êïó: (${i},${o})„ÅåÁ©∫`),!1;for(const i of e)for(let o=1;o<i.cells.length;o++){const a=i.cells[o-1],r=i.cells[o];if(Math.abs(a.row-r.row)+Math.abs(a.col-r.col)!==1)return console.log(`‚ùå Ê§úË®ºÂ§±Êïó: „Éë„Çπ${i.id}„Åå‰∏çÈÄ£Á∂ö (${a.row},${a.col})‚Üí(${r.row},${r.col})`),!1}if(e.length<3||e.length>4)return console.log(`‚ùå Ê§úË®ºÂ§±Êïó: „Éë„ÇπÊï∞„Åå${e.length}`),!1;for(const i of e)if(Math.abs(i.start.row-i.end.row)+Math.abs(i.start.col-i.end.col)<=1)return console.log(`‚ùå Ê§úË®ºÂ§±Êïó: „Éë„Çπ${i.id}„ÅÆÁ´ØÁÇπ„ÅåÈö£Êé•`),!1;const s=this.createEmptyGrid();for(const i of e)for(const o of i.cells){if(s[o.row][o.col]!==0)return console.log(`‚ùå Ê§úË®ºÂ§±Êïó: „Çª„É´ÈáçË§á (${o.row},${o.col})`),!1;s[o.row][o.col]=i.id}return!0}formatLevelData(t,n){const e=[];return t.paths.forEach((s,i)=>{const o=i+1;e.push({row:s.start.row,col:s.start.col,type:o}),e.push({row:s.end.row,col:s.end.col,type:o})}),{gridSize:this.gridSize,snacks:e,pathCount:t.paths.length,solution:t.paths,difficulty:n}}createEmptyGrid(){return Array.from({length:this.gridSize},()=>Array(this.gridSize).fill(0))}visualize(t){const n=this.createEmptyGrid(),e=["¬∑","‚ë†","‚ë°","‚ë¢","‚ë£"];t.snacks.forEach(i=>{n[i.row][i.col]=i.type});let s=`„ÄêÂïèÈ°å„Äë
`;for(let i=0;i<this.gridSize;i++)s+=n[i].map(o=>e[o]||"¬∑").join(" ")+`
`;return s}visualizeSolution(t){if(!t.solution)return"Ëß£Á≠î„Éá„Éº„Çø„Å™„Åó";const n=this.createEmptyGrid(),e=["¬∑","‚ë†","‚ë°","‚ë¢","‚ë£"];t.solution.forEach((i,o)=>{i.cells.forEach(a=>{n[a.row][a.col]=o+1})});let s=`„ÄêËß£Á≠î„Äë
`;for(let i=0;i<this.gridSize;i++)s+=n[i].map(o=>e[o]||"¬∑").join(" ")+`
`;return s}}const Ot="modulepreload",vt=function(p){return"/inusanpo/"+p},gt={},Dt=function(t,n,e){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(r=>{if(r=vt(r),r in gt)return;gt[r]=!0;const l=r.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${c}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":Ot,l||(d.as="script"),d.crossOrigin="",d.href=r,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((h,u)=>{d.addEventListener("load",h),d.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${r}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})};/*! Capacitor: https://capacitorjs.com/ - MIT License */const Rt=p=>{const t=new Map;t.set("web",{name:"web"});const n=p.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t},e=(i,o)=>{n.platforms.set(i,o)},s=i=>{n.platforms.has(i)&&(n.currentPlatform=n.platforms.get(i))};return n.addPlatform=e,n.setPlatform=s,n},Et=p=>p.CapacitorPlatforms=Rt(p),St=Et(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});St.addPlatform;St.setPlatform;var V;(function(p){p.Unimplemented="UNIMPLEMENTED",p.Unavailable="UNAVAILABLE"})(V||(V={}));class lt extends Error{constructor(t,n,e){super(t),this.message=t,this.code=n,this.data=e}}const Pt=p=>{var t,n;return p!=null&&p.androidBridge?"android":!((n=(t=p==null?void 0:p.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},Bt=p=>{var t,n,e,s,i;const o=p.CapacitorCustomPlatform||null,a=p.Capacitor||{},r=a.Plugins=a.Plugins||{},l=p.CapacitorPlatforms,c=()=>o!==null?o.name:Pt(p),d=((t=l==null?void 0:l.currentPlatform)===null||t===void 0?void 0:t.getPlatform)||c,h=()=>d()!=="web",u=((n=l==null?void 0:l.currentPlatform)===null||n===void 0?void 0:n.isNativePlatform)||h,g=k=>{const D=E.get(k);return!!(D!=null&&D.platforms.has(d())||S(k))},F=((e=l==null?void 0:l.currentPlatform)===null||e===void 0?void 0:e.isPluginAvailable)||g,y=k=>{var D;return(D=a.PluginHeaders)===null||D===void 0?void 0:D.find(W=>W.name===k)},S=((s=l==null?void 0:l.currentPlatform)===null||s===void 0?void 0:s.getPluginHeader)||y,b=k=>p.console.error(k),O=(k,D,W)=>Promise.reject(`${W} does not have an implementation of "${D}".`),E=new Map,M=(k,D={})=>{const W=E.get(k);if(W)return console.warn(`Capacitor plugin "${k}" already registered. Cannot register plugins twice.`),W.proxy;const Y=d(),N=S(k);let L;const nt=async()=>(!L&&Y in D?L=typeof D[Y]=="function"?L=await D[Y]():L=D[Y]:o!==null&&!L&&"web"in D&&(L=typeof D.web=="function"?L=await D.web():L=D.web),L),wt=(_,I)=>{var G,j;if(N){const X=N==null?void 0:N.methods.find(H=>I===H.name);if(X)return X.rtype==="promise"?H=>a.nativePromise(k,I.toString(),H):(H,Q)=>a.nativeCallback(k,I.toString(),H,Q);if(_)return(G=_[I])===null||G===void 0?void 0:G.bind(_)}else{if(_)return(j=_[I])===null||j===void 0?void 0:j.bind(_);throw new lt(`"${k}" plugin is not implemented on ${Y}`,V.Unimplemented)}},at=_=>{let I;const G=(...j)=>{const X=nt().then(H=>{const Q=wt(H,_);if(Q){const Z=Q(...j);return I=Z==null?void 0:Z.remove,Z}else throw new lt(`"${k}.${_}()" is not implemented on ${Y}`,V.Unimplemented)});return _==="addListener"&&(X.remove=async()=>I()),X};return G.toString=()=>`${_.toString()}() { [capacitor code] }`,Object.defineProperty(G,"name",{value:_,writable:!1,configurable:!1}),G},ft=at("addListener"),pt=at("removeListener"),kt=(_,I)=>{const G=ft({eventName:_},I),j=async()=>{const H=await G;pt({eventName:_,callbackId:H},I)},X=new Promise(H=>G.then(()=>H({remove:j})));return X.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await j()},X},rt=new Proxy({},{get(_,I){switch(I){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return N?kt:ft;case"removeListener":return pt;default:return at(I)}}});return r[k]=rt,E.set(k,{name:k,proxy:rt,platforms:new Set([...Object.keys(D),...N?[Y]:[]])}),rt},A=((i=l==null?void 0:l.currentPlatform)===null||i===void 0?void 0:i.registerPlugin)||M;return a.convertFileSrc||(a.convertFileSrc=k=>k),a.getPlatform=d,a.handleError=b,a.isNativePlatform=u,a.isPluginAvailable=F,a.pluginMethodNoop=O,a.registerPlugin=A,a.Exception=lt,a.DEBUG=!!a.DEBUG,a.isLoggingEnabled=!!a.isLoggingEnabled,a.platform=a.getPlatform(),a.isNative=a.isNativePlatform(),a},_t=p=>p.Capacitor=Bt(p),it=_t(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),dt=it.registerPlugin;it.Plugins;class xt{constructor(t){this.listeners={},this.retainedEventArguments={},this.windowListeners={},t&&(console.warn(`Capacitor WebPlugin "${t.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=t)}addListener(t,n){let e=!1;this.listeners[t]||(this.listeners[t]=[],e=!0),this.listeners[t].push(n);const i=this.windowListeners[t];i&&!i.registered&&this.addWindowListener(i),e&&this.sendRetainedArgumentsForEvent(t);const o=async()=>this.removeListener(t,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,n,e){const s=this.listeners[t];if(!s){if(e){let i=this.retainedEventArguments[t];i||(i=[]),i.push(n),this.retainedEventArguments[t]=i}return}s.forEach(i=>i(n))}hasListeners(t){return!!this.listeners[t].length}registerWindowListener(t,n){this.windowListeners[n]={registered:!1,windowEventName:t,pluginEventName:n,handler:e=>{this.notifyListeners(n,e)}}}unimplemented(t="not implemented"){return new it.Exception(t,V.Unimplemented)}unavailable(t="not available"){return new it.Exception(t,V.Unavailable)}async removeListener(t,n){const e=this.listeners[t];if(!e)return;const s=e.indexOf(n);this.listeners[t].splice(s,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const n=this.retainedEventArguments[t];n&&(delete this.retainedEventArguments[t],n.forEach(e=>{this.notifyListeners(t,e)}))}}const yt=p=>encodeURIComponent(p).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),mt=p=>p.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class zt extends xt{async getCookies(){const t=document.cookie,n={};return t.split(";").forEach(e=>{if(e.length<=0)return;let[s,i]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=mt(s).trim(),i=mt(i).trim(),n[s]=i}),n}async setCookie(t){try{const n=yt(t.key),e=yt(t.value),s=`; expires=${(t.expires||"").replace("expires=","")}`,i=(t.path||"/").replace("path=",""),o=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${n}=${e||""}${s}; path=${i}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const n of t)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}dt("CapacitorCookies",{web:()=>new zt});const Mt=async p=>new Promise((t,n)=>{const e=new FileReader;e.onload=()=>{const s=e.result;t(s.indexOf(",")>=0?s.split(",")[1]:s)},e.onerror=s=>n(s),e.readAsDataURL(p)}),It=(p={})=>{const t=Object.keys(p);return Object.keys(p).map(s=>s.toLocaleLowerCase()).reduce((s,i,o)=>(s[i]=p[t[o]],s),{})},At=(p,t=!0)=>p?Object.entries(p).reduce((e,s)=>{const[i,o]=s;let a,r;return Array.isArray(o)?(r="",o.forEach(l=>{a=t?encodeURIComponent(l):l,r+=`${i}=${a}&`}),r.slice(0,-1)):(a=t?encodeURIComponent(o):o,r=`${i}=${a}`),`${e}&${r}`},"").substr(1):null,Lt=(p,t={})=>{const n=Object.assign({method:p.method||"GET",headers:p.headers},t),s=It(p.headers)["content-type"]||"";if(typeof p.data=="string")n.body=p.data;else if(s.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,a]of Object.entries(p.data||{}))i.set(o,a);n.body=i.toString()}else if(s.includes("multipart/form-data")||p.data instanceof FormData){const i=new FormData;if(p.data instanceof FormData)p.data.forEach((a,r)=>{i.append(r,a)});else for(const a of Object.keys(p.data))i.append(a,p.data[a]);n.body=i;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(s.includes("application/json")||typeof p.data=="object")&&(n.body=JSON.stringify(p.data));return n};class Ht extends xt{async request(t){const n=Lt(t,t.webFetchExtra),e=At(t.params,t.shouldEncodeUrlParams),s=e?`${t.url}?${e}`:t.url,i=await fetch(s,n),o=i.headers.get("content-type")||"";let{responseType:a="text"}=i.ok?t:{};o.includes("application/json")&&(a="json");let r,l;switch(a){case"arraybuffer":case"blob":l=await i.blob(),r=await Mt(l);break;case"json":r=await i.json();break;case"document":case"text":default:r=await i.text()}const c={};return i.headers.forEach((d,h)=>{c[h]=d}),{data:r,headers:c,status:i.status,url:i.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}dt("CapacitorHttp",{web:()=>new Ht});var q;(function(p){p.Heavy="HEAVY",p.Medium="MEDIUM",p.Light="LIGHT"})(q||(q={}));var Ft;(function(p){p.Success="SUCCESS",p.Warning="WARNING",p.Error="ERROR"})(Ft||(Ft={}));const et=dt("Haptics",{web:()=>Dt(()=>import("./web-ZvjHX4Zu.js"),__vite__mapDeps([0,1])).then(p=>new p.HapticsWeb)});class R{static init(){console.log("üì≥ HapticManager Initialized")}static async impact(t="Medium"){if(this.isEnabled)try{let n;switch(t){case"Light":n=q.Light;break;case"Medium":n=q.Medium;break;case"Heavy":n=q.Heavy;break;default:n=q.Medium}await et.impact({style:n})}catch(n){console.debug("Haptics not available:",n)}}static async notification(t="Success"){if(this.isEnabled)try{await et.notification({type:t})}catch(n){console.debug("Haptics notification not available:",n)}}static async selection(){if(this.isEnabled)try{await et.selectionChanged()}catch(t){console.debug("Haptics selection not available:",t)}}static async vibrate(t=200){if(this.isEnabled)try{await et.vibrate({duration:t})}catch(n){console.debug("Haptics vibrate not available:",n)}}}tt(R,"isEnabled",!0);const P={CELL_PADDING:6,CORNER_RADIUS:8},x={TOP:50,BOTTOM:34},m={sky:8900331,grass:9419919,grassDark:7048811,ground:14596231,wood:9139029,woodDark:7033668,cellBg:16775920,cellOutline:4868682,uiBg:16776693,uiOutline:6114871,textDark:"#4A4A4A",textLight:"#FFFFFF"},w={title:{fontFamily:"KeiFont, sans-serif",fontSize:"32px",color:m.textDark,stroke:"#FFFFFF",strokeThickness:6,shadow:{offsetX:2,offsetY:3,color:"#00000033",blur:4,fill:!0}},heading:{fontFamily:"KeiFont, sans-serif",fontSize:"20px",color:m.textDark,stroke:"#FFFFFF",strokeThickness:3},section:{fontFamily:"KeiFont, sans-serif",fontSize:"16px",color:"#5D4037",stroke:"#FFFFFF",strokeThickness:4,shadow:{offsetX:1,offsetY:2,color:"#00000022",blur:2,fill:!0}},body:{fontFamily:"KeiFont, sans-serif",fontSize:"16px",color:m.textDark},small:{fontFamily:"KeiFont, sans-serif",fontSize:"12px",color:"#666666"},button:{fontFamily:"KeiFont, sans-serif",fontSize:"22px",color:"#FFFFFF",stroke:"#00000055",strokeThickness:4,shadow:{offsetX:1,offsetY:2,color:"#00000044",blur:2,fill:!0}},buttonSmall:{fontFamily:"KeiFont, sans-serif",fontSize:"18px",color:"#FFFFFF",stroke:"#00000044",strokeThickness:3},score:{fontFamily:"KeiFont, sans-serif",fontSize:"48px",color:"#FFD700",stroke:"#8B4513",strokeThickness:5,shadow:{offsetX:2,offsetY:3,color:"#00000044",blur:4,fill:!0}},special:{fontFamily:"KeiFont, sans-serif",fontSize:"24px",color:"#FFD700",stroke:"#8B4513",strokeThickness:4,shadow:{offsetX:2,offsetY:2,color:"#FFD70066",blur:8,fill:!0}},success:{fontFamily:"KeiFont, sans-serif",fontSize:"24px",color:"#4CAF50",stroke:"#FFFFFF",strokeThickness:4,shadow:{offsetX:1,offsetY:2,color:"#00800033",blur:4,fill:!0}}},v={1:{name:"„Åó„Å∞„ÅÑ„Å¨",color:13789470,accentColor:16767659,earType:"pointed",eyeType:"round",feature:"none"},2:{name:"„Éë„Ç∞",color:12887933,accentColor:16770244,earType:"floppy",eyeType:"big",feature:"wrinkle"},3:{name:"„Éà„Ç§„Éó„Éº„Éâ„É´",color:9127187,accentColor:14596231,earType:"curly",eyeType:"round",feature:"fluffy"},4:{name:"„Éè„Çπ„Ç≠„Éº",color:7372944,accentColor:16777215,earType:"pointed",eyeType:"almond",feature:"mask"},5:{name:"„Ç¥„Éº„É´„Éá„É≥„É¨„Éà„É™„Éê„Éº",color:16766720,accentColor:16775388,earType:"floppy",eyeType:"gentle",feature:"golden",isRare:!0},6:{name:"„Éñ„É´„Éâ„ÉÉ„Ç∞",color:13808780,accentColor:16777215,earType:"rose",eyeType:"droopy",feature:"underbite"},7:{name:"„Ç≥„Éº„ÇÆ„Éº",color:13468991,accentColor:16777215,earType:"big_pointed",eyeType:"round",feature:"short_legs"},8:{name:"„ÉÄ„É´„É°„Ç∑„Ç¢„É≥",color:16777215,accentColor:0,earType:"floppy",eyeType:"round",feature:"spots"},9:{name:"„ÉÅ„ÉØ„ÉØ",color:16113331,accentColor:16777215,earType:"huge",eyeType:"huge",feature:"tiny"},10:{name:"„Éù„É°„É©„Éã„Ç¢„É≥",color:16753920,accentColor:16770229,earType:"small_pointed",eyeType:"round",feature:"fluffy_face"},11:{name:"„Éì„Éº„Ç∞„É´",color:13468991,accentColor:16777215,earType:"long_floppy",eyeType:"round",feature:"tricolor"},12:{name:"„Éú„Éº„ÉÄ„Éº„Ç≥„É™„Éº",color:1842204,accentColor:16777215,earType:"semi_floppy",eyeType:"smart",feature:"border_pattern"},13:{name:"„É©„Éñ„É©„Éâ„Éº„É´",color:15787660,accentColor:16775885,earType:"floppy",eyeType:"gentle",feature:"friendly"},14:{name:"„ÇØ„É™„Éº„É†„Åó„Å∞",color:16113331,accentColor:16775885,earType:"pointed",eyeType:"round",feature:"cream_shiba"},15:{name:"„Éï„É¨„É≥„ÉÅ„Éñ„É´„Éâ„ÉÉ„Ç∞",color:3100495,accentColor:16777215,earType:"bat",eyeType:"big",feature:"bat_face"},16:{name:"„Ç∑„É•„Éä„Ç¶„Ç∂„Éº",color:6908265,accentColor:12632256,earType:"folded",eyeType:"bushy",feature:"beard"},17:{name:"„Éâ„Éº„Éô„É´„Éû„É≥",color:1842204,accentColor:13468991,earType:"cropped",eyeType:"sharp",feature:"tan_points"},18:{name:"„Ç∑„É•„Éä„Ç¶„Ç∂„Éº(„Ç∞„É¨„Éº)",color:8421504,accentColor:16777215,earType:"folded",eyeType:"bushy",feature:"beard"},19:{name:"„Éâ„Éº„Éô„É´„Éû„É≥(Ëå∂)",color:6636321,accentColor:13468991,earType:"cropped",eyeType:"sharp",feature:"tan_points"},20:{name:"ÂåóÊµ∑ÈÅìÁä¨",color:16777215,accentColor:16775920,earType:"pointed",eyeType:"round",feature:"thick_fur"},21:{name:"„Çª„É≥„Éà„Éê„Éº„Éä„Éº„Éâ",color:13468991,accentColor:16777215,earType:"floppy",eyeType:"droopy",feature:"saint_pattern"},22:{name:"„Éú„É´„Çæ„Ç§",color:16777215,accentColor:16113331,earType:"elegant",eyeType:"noble",feature:"long_nose"},23:{name:"„Éê„Éº„Éã„Éº„Ç∫",color:1842204,accentColor:16777215,earType:"floppy",eyeType:"gentle",feature:"bernese_pattern"},24:{name:"ÁôΩÊü¥Áä¨",color:16777200,accentColor:16777215,earType:"pointed",eyeType:"round",feature:"pure_white",isSecret:!0}},Ct={1:{folder:"dog_01_shiba",hasImage:!0},2:{folder:"dog_02_pug",hasImage:!0},3:{folder:"dog_03_toypoodle",hasImage:!0},4:{folder:"dog_04_husky",hasImage:!0},5:{folder:"dog_05_golden",hasImage:!0},6:{folder:"dog_06_bulldog",hasImage:!0},7:{folder:"dog_07_corgi",hasImage:!0},8:{folder:"dog_08_dalmatian",hasImage:!0},9:{folder:"dog_09_chihuahua",hasImage:!0},10:{folder:"dog_10_sheltie",hasImage:!0},11:{folder:"dog_11_cavalier",hasImage:!0},12:{folder:"dog_12_jackrussell",hasImage:!0},13:{folder:"dog_13_weimaraner",hasImage:!0},14:{folder:"dog_14_golden_alt",hasImage:!0},15:{folder:"dog_15_boston",hasImage:!0},16:{folder:"dog_16_schnauzer",hasImage:!0},17:{folder:"dog_17_doberman",hasImage:!0},18:{folder:"dog_18_schnauzer_alt",hasImage:!0},19:{folder:"dog_19_doberman_alt",hasImage:!0},20:{folder:"dog_20_samoyed",hasImage:!0},21:{folder:"dog_21_stbernard",hasImage:!0},22:{folder:"dog_22_whippet",hasImage:!0},23:{folder:"dog_23_bernese",hasImage:!0},24:{folder:"dog_24_blackshiba",hasImage:!0}},$t=["neutral","happy","sad","excited"],ht={bulldog:{id:"bulldog",dogId:6,name:"„Éñ„É´„Éâ„ÉÉ„Ç∞Ëß£Êîæ",description:"„ÉÅ„É£„É¨„É≥„Ç∏„É¢„Éº„Éâ„Åß10ÈÄ£Á∂ö„ÇØ„É™„Ç¢",condition:{type:"challenge_streak",value:10}},corgi:{id:"corgi",dogId:7,name:"„Ç≥„Éº„ÇÆ„ÉºËß£Êîæ",description:"ÂêàË®à50„Çπ„ÉÜ„Éº„Ç∏„ÇØ„É™„Ç¢",condition:{type:"total_clears",value:50}},dalmatian:{id:"dalmatian",dogId:8,name:"„ÉÄ„É´„É°„Ç∑„Ç¢„É≥Ëß£Êîæ",description:"„Ç¥„Éº„É´„Éá„É≥„Çí3ÂõûË¶ã„Å§„Åë„Çã",condition:{type:"golden_clears",value:3}},chihuahua:{id:"chihuahua",dogId:9,name:"„ÉÅ„ÉØ„ÉØËß£Êîæ",description:"ÂêàË®à100„Çπ„ÉÜ„Éº„Ç∏„ÇØ„É™„Ç¢",condition:{type:"total_clears",value:100}},pomeranian:{id:"pomeranian",dogId:10,name:"„Éù„É°„É©„Éã„Ç¢„É≥Ëß£Êîæ",description:"ÂÖ®4Áä¨Á®Æ„Çí1Âõû„Åö„Å§‰ΩøÁî®",condition:{type:"use_all_dogs",value:1}},beagle:{id:"beagle",dogId:11,name:"„Éì„Éº„Ç∞„É´Ëß£Êîæ",description:"Á¥ØË®à200„Éî„Éº„Çπ‰ª•‰∏äÊ∂à„Åô",condition:{type:"total_pieces",value:200}},border_collie:{id:"border_collie",dogId:12,name:"„Éú„Éº„ÉÄ„Éº„Ç≥„É™„ÉºËß£Êîæ",description:"5„Ç≥„É≥„Éú‰ª•‰∏ä„ÇíÈÅîÊàêÔºÅ",condition:{type:"max_combo",value:5}},labrador:{id:"labrador",dogId:13,name:"„É©„Éñ„É©„Éâ„Éº„É´Ëß£Êîæ",description:"10„Çπ„ÉÜ„Éº„Ç∏ÈÄ£Á∂ö„ÇØ„É™„Ç¢",condition:{type:"consecutive_clears",value:10}},cream_shiba:{id:"cream_shiba",dogId:14,name:"„ÇØ„É™„Éº„É†„Åó„Å∞Ëß£Êîæ",description:"3Êó•ÈÄ£Á∂ö„É≠„Ç∞„Ç§„É≥",condition:{type:"consecutive_logins",value:3}},french_bulldog:{id:"french_bulldog",dogId:15,name:"„Éï„É¨„Éñ„É´Ëß£Êîæ",description:"„ÉÅ„É£„É¨„É≥„Ç∏„É¢„Éº„Éâ„Åß20ÈÄ£Âãù",condition:{type:"challenge_streak",value:20}},schnauzer:{id:"schnauzer",dogId:16,name:"„Ç∑„É•„Éä„Ç¶„Ç∂„ÉºËß£Êîæ",description:"„Äå„Çà„Çã„Äç„ÉÜ„Éº„Éû„Åß30Âõû„ÇØ„É™„Ç¢",condition:{type:"theme_clears",theme:"night",value:30}},doberman:{id:"doberman",dogId:17,name:"„Éâ„Éº„Éô„É´„Éû„É≥Ëß£Êîæ",description:"„Éé„Éº„Éü„Çπ„Åß5„Çπ„ÉÜ„Éº„Ç∏„ÇØ„É™„Ç¢",condition:{type:"no_miss_clears",value:5}},schnauzer_gray:{id:"schnauzer_gray",dogId:18,name:"„Ç∑„É•„Éä„Ç¶„Ç∂„Éº(„Ç∞„É¨„Éº)Ëß£Êîæ",description:"Á¥ØË®à500„Éî„Éº„Çπ‰ª•‰∏äÊ∂à„Åô",condition:{type:"total_pieces",value:500}},doberman_brown:{id:"doberman_brown",dogId:19,name:"„Éâ„Éº„Éô„É´„Éû„É≥(Ëå∂)Ëß£Êîæ",description:"Êó•ÊõúÊó•„Å´5„Çπ„ÉÜ„Éº„Ç∏„ÇØ„É™„Ç¢",condition:{type:"day_of_week_clears",day:0,value:5},hint:"???"},hokkaido:{id:"hokkaido",dogId:20,name:"„Åª„Å£„Åã„ÅÑ„Å©„ÅÜËß£Êîæ",description:"„Äå„ÇÜ„Åç„Äç„ÉÜ„Éº„Éû„Åß10Âõû„ÇØ„É™„Ç¢",condition:{type:"theme_clears",theme:"snow",value:10}},saint_bernard:{id:"saint_bernard",dogId:21,name:"„Çª„É≥„Éà„Éê„Éº„Éä„Éº„ÉâËß£Êîæ",description:"ÂêàË®à150„Çπ„ÉÜ„Éº„Ç∏„ÇØ„É™„Ç¢",condition:{type:"total_clears",value:150}},borzoi:{id:"borzoi",dogId:22,name:"„Éú„É´„Çæ„Ç§Ëß£Êîæ",description:"7„Ç≥„É≥„Éú‰ª•‰∏ä„ÇíÈÅîÊàêÔºÅ",condition:{type:"max_combo",value:7}},bernese:{id:"bernese",dogId:23,name:"„Éê„Éº„Éã„Éº„Ç∫Ëß£Êîæ",description:"ÈÄ±Èñì„Çπ„Çø„É≥„Éó3Âõû„Ç≥„É≥„Éó„É™„Éº„Éà",condition:{type:"weekly_complete",value:3}},white_shiba:{id:"white_shiba",dogId:24,name:"???",description:"???",condition:{type:"dog_specific_clears",dogId:1,value:100},isSecret:!0}},ct=[{id:"play_3",name:"3Âõû„Åä„Åï„Çì„ÅΩ„Åô„Çã",target:3,type:"clear",reward:{exp:10}},{id:"challenge_1",name:"„ÉÅ„É£„É¨„É≥„Ç∏„Åó„Å¶„Åø„Çã",target:1,type:"challenge",reward:{exp:15}},{id:"golden_1",name:"„Ç¥„Éº„É´„Éá„É≥„Å´‰ºö„ÅÜ",target:1,type:"golden",reward:{exp:20}},{id:"today_dog",name:"‰ªäÊó•„ÅÆ„Çè„Çì„Åì„Å®ÈÅä„Å∂",target:1,type:"today_dog",reward:{exp:20}},{id:"play_5",name:"5Âõû„Åä„Åï„Çì„ÅΩ„Åô„Çã",target:5,type:"clear",reward:{exp:25}},{id:"challenge_3",name:"„ÉÅ„É£„É¨„É≥„Ç∏3ÂõûÊåëÊà¶",target:3,type:"challenge",reward:{exp:30}}],U={default:{name:"„Åì„Åí„Å°„ÇÉ",color:6111287},pink:{name:"„Éî„É≥„ÇØ",color:16758465,unlockCondition:"clear_10_stages"},red:{name:"„ÅÇ„Åã",color:16739179,unlockCondition:"clear_20_stages"},blue:{name:"„ÅÇ„Åä",color:7058431,unlockCondition:"challenge_5_streak"},gold:{name:"„Åç„Çì",color:16766720,unlockCondition:"golden_3_times"},rainbow:{name:"„Å´„Åò„ÅÑ„Çç",color:"rainbow",unlockCondition:"clear_50_stages"}},J={default:{name:"„Åì„ÅÜ„Åà„Çì",sky:8900331,ground:9498256},beach:{name:"„ÅÜ„Åø",sky:49151,ground:16113331,unlockCondition:"clear_20_stages"},snow:{name:"„ÇÜ„Åç",sky:14745599,ground:16777215,unlockCondition:"challenge_5_streak"},sunset:{name:"„ÇÜ„ÅÜ„ÇÑ„Åë",sky:16744272,ground:9127187,unlockCondition:"golden_3_times"},night:{name:"„Çà„Çã",sky:1644912,ground:3100495,unlockCondition:"use_all_4_dogs"},sakura:{name:"„Åï„Åè„Çâ",sky:16770273,ground:16758465,unlockCondition:"medals_10",icon:"üå∏"},fireworks:{name:"„ÅØ„Å™„Å≥",sky:858922,ground:1779259,unlockCondition:"medals_30",icon:"üéÜ"},rainbow:{name:"„Å´„Åò",sky:8900331,ground:10025880,unlockCondition:"stamp_complete_3",icon:"üåà"},starry:{name:"„Åª„Åó„Åû„Çâ",sky:723781,ground:1710684,unlockCondition:"medals_50",icon:"‚≠ê"}},ut={ribbon_red:{name:"„É™„Éú„É≥",icon:"üéÄ",type:"accessory",position:"neck",color:16739179,unlockCondition:"medals_5",description:"„Åã„Çè„ÅÑ„ÅÑËµ§„ÅÑ„É™„Éú„É≥"},hat_explorer:{name:"„Éè„ÉÉ„Éà",icon:"üé©",type:"hat",position:"head",color:9127187,unlockCondition:"medals_10",description:"„Åä„Åï„Çì„ÅΩ„Å´„Å¥„Å£„Åü„ÇäÔºÅ"},crown_gold:{name:"„Åã„Çì„ÇÄ„Çä",icon:"üëë",type:"crown",position:"head",color:16766720,unlockCondition:"medals_20",description:"„Åç„Çâ„Åç„Çâ„ÅÆ„Åä„ÅÜ„Åã„Çì"},scarf_blue:{name:"„Éû„Éï„É©„Éº",icon:"üß£",type:"accessory",position:"neck",color:7058431,unlockCondition:"medals_15",description:"„ÅÇ„Å£„Åü„Åã„Éû„Éï„É©„Éº"},glasses_star:{name:"„ÅØ„Åß„É°„Ç¨„Éç",icon:"‚≠ê",type:"glasses",position:"face",color:16766720,unlockCondition:"stamp_complete_1",description:"ÈÄ±Èñì„Éú„Éº„Éä„Çπ„ÅßGETÔºÅ"},flower_sakura:{name:"„Åï„Åè„Çâ",icon:"üå∏",type:"flower",position:"head",color:16758465,unlockCondition:"stamp_complete_2",description:"„ÅØ„Çã„ÅÆ„Åã„Åä„Çä"},aura_rainbow:{name:"„Ç™„Éº„É©",icon:"‚ú®",type:"aura",position:"effect",color:"rainbow",unlockCondition:"medals_50",description:"‰ºùË™¨„ÅÆ„Åç„Åõ„Åã„ÅàÔºÅ"},bandana_camo:{name:"„Éê„É≥„ÉÄ„Éä",icon:"üè¥",type:"accessory",position:"neck",color:5597999,unlockCondition:"stamp_complete_4",description:"„ÉØ„Ç§„É´„Éâ„Å™„Çè„Çì„Åì„Å´ÔºÅ"}},Gt={adFree:{id:"adFree",name:"„Åì„ÅÜ„Åì„Åè„Åë„Åó",description:`„Åô„Åπ„Å¶„ÅÆÂ∫ÉÂëä„ÇíÂâäÈô§ÔºÅ
„Ç≤„Éº„É†„Å´ÈõÜ‰∏≠„Åß„Åç„ÇãÔºÅ`,price:480,icon:"üîá",color:5025616},allDogs:{id:"allDogs",name:"„Å™„Åã„Çà„Åó„Éë„ÉÉ„ÇØ",description:`„Åô„Åπ„Å¶„ÅÆ„ÉØ„É≥„Å°„ÇÉ„Çì„Çí
‰ªä„Åô„ÅêËß£ÊîæÔºÅ`,price:600,icon:"üêï",color:16750592},allCustomize:{id:"allCustomize",name:"„ÅÑ„Çç„Å©„Çä„Éë„ÉÉ„ÇØ",description:`ÂÖ®„Ç´„Çπ„Çø„Éû„Ç§„Ç∫„Çí
Ëß£ÊîæÔºÅ`,price:360,icon:"üé®",color:15277667},deluxe:{id:"deluxe",name:"„Éá„É©„ÉÉ„ÇØ„Çπ",description:`ÂÖ®ÈÉ®ÂÖ•„ÇäÔºÅ
ÊúÄ„ÇÇ„ÅäÂæó„Å™„Éë„ÉÉ„ÇØÔºÅ`,price:980,originalPrice:1440,icon:"üëë",color:16766720,isBest:!0}};class T{static getDefaultData(){const t=new Date().toISOString().split("T")[0];return{unlockedDogs:[1,2,3,4],dogUnlockDates:{1:t,2:t,3:t,4:t},selectedDogs:[1,2,3,4],achievements:{},stats:{totalClears:0,challengeHighScore:0,challengeCurrentStreak:0,maxComboCount:0,goldenClears:0,dogUsage:{},totalPieces:0,consecutiveClears:0,maxConsecutiveClears:0,consecutiveLogins:0,lastLoginDate:null,noMissClears:0,currentNoMissStreak:0,themeClears:{},dayOfWeekClears:{},dogSpecificClears:{}},dogLevels:{},daily:{lastLogin:null,missions:[],progress:{}},customize:{pawColor:null,theme:"default",equippedCostumes:[]},rewards:{medals:0,stamps:[],stampWeekStart:null,weeklyBonusClaimed:!1,totalWeeklyComplete:0,unlockedCostumes:[]},settings:{bgmEnabled:!0,seEnabled:!0},purchases:{adFree:!1,allDogs:!1,allCustomize:!1,deluxe:!1,limitedDogs:[]}}}static load(){try{const t=localStorage.getItem(this.STORAGE_KEY);if(t){const n=JSON.parse(t);return{...this.getDefaultData(),...n}}}catch(t){console.error("„Éá„Éº„ÇøË™≠„ÅøËæº„Åø„Ç®„É©„Éº:",t)}return this.getDefaultData()}static save(t){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t))}catch(n){console.error("„Éá„Éº„Çø‰øùÂ≠ò„Ç®„É©„Éº:",n)}}static isDogUnlocked(t,n){return!0}static isAdFree(t){var n,e;return((n=t.purchases)==null?void 0:n.adFree)||((e=t.purchases)==null?void 0:e.deluxe)}static updateStats(t,n,e=1,s=null){switch(t.stats.totalPieces||(t.stats.totalPieces=0),t.stats.consecutiveClears||(t.stats.consecutiveClears=0),t.stats.maxConsecutiveClears||(t.stats.maxConsecutiveClears=0),t.stats.noMissClears||(t.stats.noMissClears=0),t.stats.currentNoMissStreak||(t.stats.currentNoMissStreak=0),t.stats.themeClears||(t.stats.themeClears={}),t.stats.dayOfWeekClears||(t.stats.dayOfWeekClears={}),t.stats.dogSpecificClears||(t.stats.dogSpecificClears={}),t.stats.consecutiveLogins||(t.stats.consecutiveLogins=0),n){case"clear":t.stats.totalClears+=e,t.stats.consecutiveClears+=e,t.stats.consecutiveClears>t.stats.maxConsecutiveClears&&(t.stats.maxConsecutiveClears=t.stats.consecutiveClears);break;case"clear_reset":t.stats.consecutiveClears=0,t.stats.currentNoMissStreak=0;break;case"challenge_clear":t.stats.challengeCurrentStreak+=e,t.stats.challengeCurrentStreak>t.stats.challengeHighScore&&(t.stats.challengeHighScore=t.stats.challengeCurrentStreak);break;case"challenge_reset":t.stats.challengeCurrentStreak=0;break;case"golden":t.stats.goldenClears+=e;break;case"dog_usage":t.stats.dogUsage[e]||(t.stats.dogUsage[e]=0),t.stats.dogUsage[e]++;break;case"pieces":t.stats.totalPieces+=e;break;case"no_miss_clear":t.stats.currentNoMissStreak+=e,t.stats.noMissClears+=e;break;case"miss":t.stats.currentNoMissStreak=0;break;case"theme_clear":s&&(t.stats.themeClears[s]||(t.stats.themeClears[s]=0),t.stats.themeClears[s]+=e);break;case"day_clear":const i=new Date().getDay();t.stats.dayOfWeekClears[i]||(t.stats.dayOfWeekClears[i]=0),t.stats.dayOfWeekClears[i]+=e;break;case"dog_clear":s&&(t.stats.dogSpecificClears[s]||(t.stats.dogSpecificClears[s]=0),t.stats.dogSpecificClears[s]+=e);break;case"login":const o=new Date().toDateString(),a=t.stats.lastLoginDate;if(a){const r=new Date(a),l=new Date(o),c=Math.floor((l-r)/(1e3*60*60*24));c===1?t.stats.consecutiveLogins+=1:c>1&&(t.stats.consecutiveLogins=1)}else t.stats.consecutiveLogins=1;t.stats.lastLoginDate=o;break}this.save(t)}static checkAchievements(t){const n=[];return t.stats.totalPieces||(t.stats.totalPieces=0),t.stats.maxConsecutiveClears||(t.stats.maxConsecutiveClears=0),t.stats.consecutiveLogins||(t.stats.consecutiveLogins=0),t.stats.noMissClears||(t.stats.noMissClears=0),t.stats.themeClears||(t.stats.themeClears={}),t.stats.dayOfWeekClears||(t.stats.dayOfWeekClears={}),t.stats.dogSpecificClears||(t.stats.dogSpecificClears={}),Object.values(ht).forEach(e=>{var o;if(t.achievements[e.id])return;let s=!1;const i=e.condition;switch(i.type){case"challenge_streak":s=t.stats.challengeHighScore>=i.value;break;case"total_clears":s=t.stats.totalClears>=i.value;break;case"golden_clears":s=t.stats.goldenClears>=i.value;break;case"use_all_dogs":const a=t.stats.dogUsage;s=[1,2,3,4].every(h=>a[h]>=1);break;case"total_pieces":s=t.stats.totalPieces>=i.value;break;case"max_combo":s=t.stats.maxComboCount>=i.value;break;case"consecutive_clears":s=t.stats.maxConsecutiveClears>=i.value;break;case"consecutive_logins":s=t.stats.consecutiveLogins>=i.value;break;case"theme_clears":s=(t.stats.themeClears[i.theme]||0)>=i.value;break;case"no_miss_clears":s=t.stats.noMissClears>=i.value;break;case"day_of_week_clears":s=(t.stats.dayOfWeekClears[i.day]||0)>=i.value;break;case"weekly_complete":s=(((o=t.rewards)==null?void 0:o.totalWeeklyComplete)||0)>=i.value;break;case"dog_specific_clears":s=(t.stats.dogSpecificClears[i.dogId]||0)>=i.value;break}s&&(t.achievements[e.id]=!0,e.dogId&&!t.unlockedDogs.includes(e.dogId)&&(t.unlockedDogs.push(e.dogId),t.dogUnlockDates||(t.dogUnlockDates={}),t.dogUnlockDates[e.dogId]=new Date().toISOString().split("T")[0]),n.push(e))}),n}}tt(T,"STORAGE_KEY","wantsunagi_data");class ${static checkAndResetDaily(t){const n=new Date().toDateString();if(t.daily.lastLogin!==n){t.daily.lastLogin=n,t.daily.progress={};const e=[...ct].sort(()=>Math.random()-.5);t.daily.missions=e.slice(0,3).map(s=>s.id),t.daily.todaysDog=t.selectedDogs[Math.floor(Math.random()*t.selectedDogs.length)],T.save(t)}return t}static getTodaysMissions(t){const n=[];return(t.daily.missions||[]).forEach(s=>{const i=ct.find(o=>o.id===s);i&&n.push({...i,progress:t.daily.progress[s]||0,completed:(t.daily.progress[s]||0)>=i.target})}),n}static updateProgress(t,n,e=1){(t.daily.missions||[]).forEach(i=>{const o=ct.find(a=>a.id===i);o&&o.type===n&&(t.daily.progress[i]||(t.daily.progress[i]=0),t.daily.progress[i]+=e)}),T.save(t)}static areAllMissionsComplete(t){const n=this.getTodaysMissions(t);return n.length===0?!1:n.every(e=>e.completed)}static awardMedalIfComplete(t){if(!this.areAllMissionsComplete(t))return{awarded:!1};if(new Date().toDateString(),t.daily.medalClaimedToday)return{awarded:!1};t.rewards||(t.rewards={medals:0,stamps:[],stampWeekStart:null,weeklyBonusClaimed:!1,totalWeeklyComplete:0,unlockedCostumes:[]}),t.rewards.medals=(t.rewards.medals||0)+1,t.daily.medalClaimedToday=!0,this.addTodayStamp(t);const n=this.checkCostumeUnlocks(t);return T.save(t),{awarded:!0,totalMedals:t.rewards.medals,newCostumes:n,stampCount:t.rewards.stamps.length}}static addTodayStamp(t){t.rewards||(t.rewards={medals:0,stamps:[],stampWeekStart:null,weeklyBonusClaimed:!1,totalWeeklyComplete:0,unlockedCostumes:[]});const n=new Date,e=n.getDay(),i=this.getMondayOfWeek(n).toDateString();t.rewards.stampWeekStart!==i&&(t.rewards.stamps=[],t.rewards.stampWeekStart=i,t.rewards.weeklyBonusClaimed=!1);const o=e===0?6:e-1;t.rewards.stamps.includes(o)||t.rewards.stamps.push(o)}static getMondayOfWeek(t){const n=new Date(t),e=n.getDay(),s=n.getDate()-e+(e===0?-6:1);return new Date(n.setDate(s))}static checkWeeklyBonus(t){return t.rewards?t.rewards.weeklyBonusClaimed?{canClaim:!1,alreadyClaimed:!0}:t.rewards.stamps.length<7?{canClaim:!1,current:t.rewards.stamps.length}:{canClaim:!0,current:7}:{canClaim:!1}}static claimWeeklyBonus(t){if(!this.checkWeeklyBonus(t).canClaim)return{success:!1};t.rewards.weeklyBonusClaimed=!0,t.rewards.totalWeeklyComplete=(t.rewards.totalWeeklyComplete||0)+1,t.rewards.medals=(t.rewards.medals||0)+3;const e=this.checkCostumeUnlocks(t);return T.save(t),{success:!0,bonusMedals:3,totalMedals:t.rewards.medals,totalWeeklyComplete:t.rewards.totalWeeklyComplete,newCostumes:e}}static checkCostumeUnlocks(t){if(!t.rewards)return[];t.rewards.unlockedCostumes||(t.rewards.unlockedCostumes=[]);const n=[],e=t.rewards.medals||0,s=t.rewards.totalWeeklyComplete||0;return Object.entries(ut).forEach(([i,o])=>{if(t.rewards.unlockedCostumes.includes(i))return;let a=!1;const r=o.unlockCondition;if(r.startsWith("medals_")){const l=parseInt(r.split("_")[1]);a=e>=l}else if(r.startsWith("stamp_complete_")){const l=parseInt(r.split("_")[2]);a=s>=l}a&&(t.rewards.unlockedCostumes.push(i),n.push({id:i,...o}))}),n}static isCostumeUnlocked(t,n){return!0}static getStampRallyInfo(t){if(!t.rewards)return{stamps:[],weekStart:null,daysRemaining:7,canClaimBonus:!1};const n=new Date,e=this.getMondayOfWeek(n),s=e.toDateString();if(t.rewards.stampWeekStart!==s)return{stamps:[],weekStart:s,daysRemaining:7,canClaimBonus:!1};const i=t.rewards.stamps||[],o=new Date(e);o.setDate(o.getDate()+6);const a=Math.max(0,7-i.length),r=i.length>=7&&!t.rewards.weeklyBonusClaimed;return{stamps:i,weekStart:s,daysRemaining:a,canClaimBonus:r,totalWeeklyComplete:t.rewards.totalWeeklyComplete||0}}}let f=T.load(),B=[];class ot{static buildShareText(t,n,e=!1){const s="üêï";let i=`${s} „ÅÑ„Å¨„Åï„Çì„ÅΩ ${s}
`;switch(t){case"normal":i+=`„Çπ„ÉÜ„Éº„Ç∏ ${n+1} „Çí„ÇØ„É™„Ç¢„Åó„Åü„ÇàÔºÅ
`;break;case"challenge":i+=`„ÉÅ„É£„É¨„É≥„Ç∏„É¢„Éº„Éâ„Åß ${n} „Çπ„ÉÜ„Éº„Ç∏Á™ÅÁ†¥ÔºÅ
`,e&&(i+=`üéâ NEW RECORD! üéâ
`);break;case"gameover":i+=`„ÉÅ„É£„É¨„É≥„Ç∏„É¢„Éº„Éâ„Åß ${n} „Çπ„ÉÜ„Éº„Ç∏ „ÇØ„É™„Ç¢ÔºÅ
`,e&&(i+=`üéâ NEW RECORD! üéâ
`);break}return i+=`
‚ñº „ÅÇ„Åù„Çì„Åß„Åø„Å¶„Å≠ÔºÅ
${this.GAME_URL}`,i}static async share(t,n,e=!1){const s=this.buildShareText(t,n,e),i={title:"„ÅÑ„Å¨„Åï„Çì„ÅΩ",text:s,url:this.GAME_URL};if(navigator.share)try{return await navigator.share(i),{success:!0,method:"share"}}catch(o){if(o.name==="AbortError")return{success:!1,method:"cancelled"};console.error("„Ç∑„Çß„Ç¢„Ç®„É©„Éº:",o)}try{return await navigator.clipboard.writeText(s),{success:!0,method:"clipboard"}}catch(o){return console.error("„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Ç®„É©„Éº:",o),{success:!1,method:"error"}}}static createShareButton(t,n,e,s,i,o=!1){const a=t.add.container(n,e),r=t.add.graphics();r.fillStyle(1942002,1),r.fillRoundedRect(-50,-18,100,36,8),r.lineStyle(2,m.cellOutline,1),r.strokeRoundedRect(-50,-18,100,36,8);const l=t.add.text(0,0,"üì§ „Ç∑„Çß„Ç¢",{fontFamily:"KeiFont, sans-serif",fontSize:"16px",color:"#FFFFFF"}).setOrigin(.5);return a.add([r,l]),a.setSize(100,36),a.setInteractive({useHandCursor:!0}),a.on("pointerup",async()=>{const c=await this.share(s,i,o);if(c.success&&c.method==="clipboard"){const d=t.add.text(n,e-50,"„Ç≥„Éî„Éº„Åó„Åæ„Åó„ÅüÔºÅ",{fontFamily:"KeiFont, sans-serif",fontSize:"14px",color:"#FFFFFF",backgroundColor:"#333333",padding:{x:10,y:5}}).setOrigin(.5);t.tweens.add({targets:d,alpha:0,y:e-70,duration:1500,onComplete:()=>d.destroy()})}}),a.on("pointerover",()=>{t.tweens.add({targets:a,scale:1.05,duration:100})}),a.on("pointerout",()=>{t.tweens.add({targets:a,scale:1,duration:100})}),a}}tt(ot,"GAME_URL","https://kerofen.github.io/inusanpo/");class Wt{static roundedRect(t,n,e,s,i,o,a,r=m.cellOutline,l=2){t.fillStyle(a,1),t.fillRoundedRect(n,e,s,i,o),t.lineStyle(l,r,1),t.strokeRoundedRect(n,e,s,i,o)}static circle(t,n,e,s,i,o=m.cellOutline,a=2){t.fillStyle(i,1),t.fillCircle(n,e,s),t.lineStyle(a,o,1),t.strokeCircle(n,e,s)}static grassCluster(t,n,e,s=1){const i=t.add.graphics(),o=C.Math.Between(3,5);for(let a=0;a<o;a++){const r=n+(a-o/2)*6*s,l=C.Math.Between(12,20)*s,c=C.Math.Between(-3,3)*s;i.lineStyle(2*s,m.grassDark,1),i.beginPath(),i.moveTo(r,e),i.lineTo(r+c,e-l),i.strokePath()}return i}static flower(t,n,e,s=16777215){const i=t.add.container(n,e),o=t.add.graphics();o.fillStyle(s,1);for(let r=0;r<5;r++){const l=r/5*Math.PI*2,c=Math.cos(l)*6,d=Math.sin(l)*6;o.fillCircle(c,d,5)}const a=t.add.graphics();return a.fillStyle(16766720,1),a.fillCircle(0,0,4),i.add([o,a]),i}static tree(t,n,e,s=1){const i=t.add.container(n,e),o=t.add.graphics();o.fillStyle(m.wood,1),o.fillRect(-8*s,-20*s,16*s,40*s),o.lineStyle(2,m.woodDark,1),o.strokeRect(-8*s,-20*s,16*s,40*s);const a=t.add.graphics();return a.fillStyle(m.grass,1),a.fillCircle(0,-50*s,35*s),a.fillCircle(-25*s,-35*s,25*s),a.fillCircle(25*s,-35*s,25*s),a.lineStyle(2,m.grassDark,1),a.strokeCircle(0,-50*s,35*s),i.add([o,a]),i}static dogHouse(t,n,e,s=1){const i=t.add.container(n,e),o=t.add.graphics();o.fillStyle(m.wood,1),o.fillRect(-40*s,-30*s,80*s,60*s),o.lineStyle(2,m.woodDark,1),o.strokeRect(-40*s,-30*s,80*s,60*s);const a=t.add.graphics();a.fillStyle(13458524,1),a.beginPath(),a.moveTo(-50*s,-30*s),a.lineTo(0,-70*s),a.lineTo(50*s,-30*s),a.closePath(),a.fillPath(),a.lineStyle(2,9109504,1),a.strokePath();const r=t.add.graphics();return r.fillStyle(m.woodDark,1),r.fillCircle(0,10*s,20*s),r.fillRect(-20*s,10*s,40*s,20*s),i.add([o,a,r]),i}static fence(t,n,e,s,i=1){const o=t.add.graphics(),a=Math.floor(s/(20*i));o.fillStyle(m.wood,1),o.fillRect(n,e-25*i,s,8*i),o.fillRect(n,e-10*i,s,8*i),o.lineStyle(2,m.woodDark,1),o.strokeRect(n,e-25*i,s,8*i),o.strokeRect(n,e-10*i,s,8*i);for(let r=0;r<=a;r++){const l=n+r*(s/a);o.fillStyle(m.wood,1),o.fillRect(l-4*i,e-35*i,8*i,40*i),o.lineStyle(2,m.woodDark,1),o.strokeRect(l-4*i,e-35*i,8*i,40*i)}return o}static dogIcon(t,n,e,s=1,i=null,o=null){let a=i;!a&&typeof i!="number"&&(a=localStorage.getItem("selectedDog")||"shiba");let r=DOG_BREEDS.find(y=>y.id===a);r||(typeof i=="string"&&t.textures.exists(i)?r={type:"sprite",key:i}:typeof i=="number"?r={type:"graphics",variant:"default",colors:{body:i,face:i,ears:i}}:r=DOG_BREEDS[0]);let l=r.colors?{...r.colors}:{body:14596231,face:14596231,ears:14596231};if(o!==null&&(l={body:o,face:o,ears:o}),r.type==="sprite"&&t.textures.exists(r.key)){const y=t.add.image(n,e,r.key),S=t.textures.getFrame(r.key),b=S?S.width:y.width,E=70*s/b;return y.setScale(E),o!==null&&y.setTint(o),y}const c=t.add.container(n,e),d=r.variant||"default",h=t.add.graphics();if(h.fillStyle(l.body,1),h.fillEllipse(0,15*s,30*s,20*s),h.lineStyle(2,m.cellOutline,1),h.strokeEllipse(0,15*s,30*s,20*s),c.add(h),d==="chihuahua"){const y=t.add.graphics();y.fillStyle(l.ears,1),y.lineStyle(2,m.cellOutline,1),y.beginPath(),y.moveTo(-12*s,-12*s),y.lineTo(-24*s,-28*s),y.lineTo(-4*s,-20*s),y.closePath(),y.fillPath(),y.strokePath(),y.beginPath(),y.moveTo(12*s,-12*s),y.lineTo(24*s,-28*s),y.lineTo(4*s,-20*s),y.closePath(),y.fillPath(),y.strokePath(),c.add(y);const S=t.add.graphics();S.fillStyle(l.face,1),S.fillCircle(0,-4*s,21*s),S.lineStyle(2,m.cellOutline,1),S.strokeCircle(0,-4*s,21*s),c.add(S)}else if(d==="dachshund"){const y=t.add.graphics();y.fillStyle(l.ears,1),y.lineStyle(2,m.cellOutline,1),y.fillEllipse(-20*s,-2*s,12*s,28*s),y.strokeEllipse(-20*s,-2*s,12*s,28*s),y.fillEllipse(20*s,-2*s,12*s,28*s),y.strokeEllipse(20*s,-2*s,12*s,28*s),c.add(y);const S=t.add.graphics();S.fillStyle(l.face,1),S.fillCircle(0,-6*s,22*s),S.lineStyle(2,m.cellOutline,1),S.strokeCircle(0,-6*s,22*s),c.add(S)}else{const y=t.add.graphics();y.fillStyle(l.ears,1),y.fillEllipse(-18*s,-20*s,12*s,18*s),y.fillEllipse(18*s,-20*s,12*s,18*s),y.lineStyle(2,m.cellOutline,1),y.strokeEllipse(-18*s,-20*s,12*s,18*s),y.strokeEllipse(18*s,-20*s,12*s,18*s),c.add(y);const S=t.add.graphics();S.fillStyle(l.face,1),S.fillCircle(0,-5*s,22*s),S.lineStyle(2,m.cellOutline,1),S.strokeCircle(0,-5*s,22*s),c.add(S)}const u=t.add.graphics();u.fillStyle(m.cellOutline,1),u.fillCircle(-8*s,-8*s,4*s),u.fillCircle(8*s,-8*s,4*s),u.fillStyle(16777215,1),u.fillCircle(-6*s,-10*s,1.5*s),u.fillCircle(10*s,-10*s,1.5*s);const g=t.add.graphics();g.fillStyle(m.cellOutline,1),g.fillCircle(0,0,4*s);const F=t.add.graphics();return F.lineStyle(2,m.cellOutline,1),F.beginPath(),F.moveTo(0,4*s),F.lineTo(0,8*s),F.moveTo(-6*s,10*s),F.lineTo(0,14*s),F.lineTo(6*s,10*s),F.strokePath(),c.add([u,g,F]),c}static pawPrint(t,n,e,s,i=16){if(t.textures.exists("paw_print")){const l=t.add.image(n,e,"paw_print"),d=i*2/l.width;return l.setScale(d),s!==void 0&&l.setTint(s),l}const o=t.add.container(n,e),a=t.add.graphics();return a.fillStyle(s,1),a.fillEllipse(0,3,i*.6,i*.5),[{x:-i*.35,y:-i*.2},{x:-i*.12,y:-i*.35},{x:i*.12,y:-i*.35},{x:i*.35,y:-i*.2}].forEach(l=>{a.fillCircle(l.x,l.y,i*.18)}),o.add(a),o}}class z{static draw(t,n,e,s,i=25,o="neutral",a=1){if(!v[s])return t.add.container(n,e);const l=t.add.container(n,e),c=Ct[s],d=`dog_${s}_${o}`;if(c!=null&&c.hasImage&&t.textures.exists(d)){const h=i*2.2,u=t.add.image(0,0,d);u.setDisplaySize(h,h),l.add(u);const g=i/25;return this.drawCostumes(t,l,g),l}return this.drawWithGraphics(t,n,e,s,i,o,a)}static drawWithGraphics(t,n,e,s,i=25,o="neutral",a=1){const r=v[s];if(!r)return t.add.container(n,e);const l=t.add.container(n,e),c=t.add.graphics(),d=i/25;return this.drawEars(c,r,d),c.fillStyle(r.color,1),c.fillCircle(0,0,22*d),c.lineStyle(2*d,0,.3),c.strokeCircle(0,0,22*d),this.drawFeature(c,r,d),c.fillStyle(r.accentColor,1),c.fillEllipse(0,8*d,14*d,10*d),this.drawEyes(c,r,d,o,a),c.fillStyle(3355443,1),c.fillCircle(0,6*d,4*d),this.drawMouth(c,d,o),l.add(c),this.drawCostumes(t,l,d),l}static drawCostumes(t,n,e){var i;const s=((i=f.customize)==null?void 0:i.equippedCostumes)||[];s.length!==0&&s.forEach(o=>{const a=ut[o];if(a)switch(a.type){case"accessory":if(a.position==="neck"){const c=t.add.graphics();o==="ribbon_red"?(c.fillStyle(a.color,1),c.fillCircle(0,18*e,5*e),c.fillTriangle(-12*e,16*e,-5*e,18*e,-8*e,22*e),c.fillTriangle(12*e,16*e,5*e,18*e,8*e,22*e)):o==="scarf_blue"?(c.fillStyle(a.color,1),c.fillRoundedRect(-16*e,14*e,32*e,8*e,3*e),c.fillRoundedRect(10*e,18*e,8*e,16*e,2*e)):o==="bandana_camo"&&(c.fillStyle(a.color,1),c.beginPath(),c.moveTo(-14*e,14*e),c.lineTo(14*e,14*e),c.lineTo(0,26*e),c.closePath(),c.fillPath()),n.add(c)}break;case"hat":case"crown":case"flower":const r=t.add.graphics();if(o==="hat_explorer")r.fillStyle(a.color,1),r.fillRoundedRect(-14*e,-32*e,28*e,12*e,4*e),r.fillRoundedRect(-10*e,-38*e,20*e,10*e,6*e);else if(o==="crown_gold")r.fillStyle(a.color,1),r.fillRoundedRect(-12*e,-28*e,24*e,8*e,2*e),r.fillTriangle(-10*e,-28*e,-6*e,-38*e,-2*e,-28*e),r.fillTriangle(-2*e,-28*e,0,-42*e,2*e,-28*e),r.fillTriangle(2*e,-28*e,6*e,-38*e,10*e,-28*e),r.fillStyle(16739179,1),r.fillCircle(0,-34*e,3*e);else if(o==="flower_sakura"){const c=-16*e,d=-20*e;r.fillStyle(16758465,1);for(let h=0;h<5;h++){const u=h/5*Math.PI*2-Math.PI/2,g=c+Math.cos(u)*5*e,F=d+Math.sin(u)*5*e;r.fillCircle(g,F,4*e)}r.fillStyle(16777215,1),r.fillCircle(c,d,3*e)}n.add(r);break;case"glasses":const l=t.add.graphics();if(o==="glasses_star"){l.lineStyle(2*e,a.color,1),l.strokeCircle(-8*e,-4*e,7*e),l.strokeCircle(8*e,-4*e,7*e),l.beginPath(),l.moveTo(-1*e,-4*e),l.lineTo(1*e,-4*e),l.strokePath();const c=t.add.text(12*e,-12*e,"‚≠ê",{fontSize:`${8*e}px`}).setOrigin(.5);n.add(c)}n.add(l);break;case"aura":o==="aura_rainbow"&&[16739179,16766720,9498256,8900331,14524637].forEach((d,h)=>{const u=t.add.graphics();u.lineStyle(2*e,d,.3),u.strokeCircle(0,0,(28+h*4)*e),n.add(u),t.tweens.add({targets:u,alpha:{from:.3,to:.1},scale:{from:1,to:1.1},duration:1e3+h*100,yoyo:!0,repeat:-1})});break}})}static drawEars(t,n,e){const s=n.earType||"pointed";switch(t.fillStyle(n.color,1),s){case"pointed":t.beginPath(),t.moveTo(-18*e,-8*e),t.lineTo(-12*e,-28*e),t.lineTo(-6*e,-10*e),t.closePath(),t.fillPath(),t.beginPath(),t.moveTo(18*e,-8*e),t.lineTo(12*e,-28*e),t.lineTo(6*e,-10*e),t.closePath(),t.fillPath();break;case"floppy":t.fillEllipse(-18*e,0,10*e,16*e),t.fillEllipse(18*e,0,10*e,16*e);break;case"curly":t.fillCircle(-16*e,-8*e,10*e),t.fillCircle(16*e,-8*e,10*e),t.fillCircle(-20*e,-4*e,6*e),t.fillCircle(20*e,-4*e,6*e);break;case"huge":t.beginPath(),t.moveTo(-16*e,-5*e),t.lineTo(-26*e,-30*e),t.lineTo(-6*e,-12*e),t.closePath(),t.fillPath(),t.beginPath(),t.moveTo(16*e,-5*e),t.lineTo(26*e,-30*e),t.lineTo(6*e,-12*e),t.closePath(),t.fillPath();break;case"big_pointed":t.beginPath(),t.moveTo(-16*e,-6*e),t.lineTo(-18*e,-32*e),t.lineTo(-4*e,-10*e),t.closePath(),t.fillPath(),t.beginPath(),t.moveTo(16*e,-6*e),t.lineTo(18*e,-32*e),t.lineTo(4*e,-10*e),t.closePath(),t.fillPath();break;case"rose":t.fillEllipse(-18*e,-10*e,8*e,10*e),t.fillEllipse(18*e,-10*e,8*e,10*e);break;case"small_pointed":t.beginPath(),t.moveTo(-14*e,-10*e),t.lineTo(-10*e,-22*e),t.lineTo(-6*e,-12*e),t.closePath(),t.fillPath(),t.beginPath(),t.moveTo(14*e,-10*e),t.lineTo(10*e,-22*e),t.lineTo(6*e,-12*e),t.closePath(),t.fillPath();break;case"long_floppy":t.fillEllipse(-20*e,5*e,10*e,20*e),t.fillEllipse(20*e,5*e,10*e,20*e);break;case"semi_floppy":t.beginPath(),t.moveTo(-18*e,-8*e),t.lineTo(-14*e,-22*e),t.lineTo(-8*e,-10*e),t.closePath(),t.fillPath(),t.fillEllipse(-16*e,-18*e,6*e,8*e),t.beginPath(),t.moveTo(18*e,-8*e),t.lineTo(14*e,-22*e),t.lineTo(8*e,-10*e),t.closePath(),t.fillPath(),t.fillEllipse(16*e,-18*e,6*e,8*e);break;case"bat":t.beginPath(),t.moveTo(-14*e,-5*e),t.lineTo(-20*e,-28*e),t.lineTo(-6*e,-8*e),t.closePath(),t.fillPath(),t.beginPath(),t.moveTo(14*e,-5*e),t.lineTo(20*e,-28*e),t.lineTo(6*e,-8*e),t.closePath(),t.fillPath(),t.fillStyle(16758465,.5),t.beginPath(),t.moveTo(-13*e,-8*e),t.lineTo(-17*e,-22*e),t.lineTo(-9*e,-10*e),t.closePath(),t.fillPath(),t.beginPath(),t.moveTo(13*e,-8*e),t.lineTo(17*e,-22*e),t.lineTo(9*e,-10*e),t.closePath(),t.fillPath(),t.fillStyle(n.color,1);break;case"folded":t.beginPath(),t.moveTo(-16*e,-8*e),t.lineTo(-12*e,-20*e),t.lineTo(-6*e,-10*e),t.closePath(),t.fillPath(),t.fillEllipse(-12*e,-16*e,8*e,6*e),t.beginPath(),t.moveTo(16*e,-8*e),t.lineTo(12*e,-20*e),t.lineTo(6*e,-10*e),t.closePath(),t.fillPath(),t.fillEllipse(12*e,-16*e,8*e,6*e);break;case"cropped":t.beginPath(),t.moveTo(-14*e,-6*e),t.lineTo(-10*e,-32*e),t.lineTo(-6*e,-8*e),t.closePath(),t.fillPath(),t.beginPath(),t.moveTo(14*e,-6*e),t.lineTo(10*e,-32*e),t.lineTo(6*e,-8*e),t.closePath(),t.fillPath();break;case"elegant":t.fillEllipse(-22*e,0,8*e,22*e),t.fillEllipse(22*e,0,8*e,22*e),t.fillStyle(n.accentColor,.6),t.fillEllipse(-24*e,8*e,6*e,14*e),t.fillEllipse(24*e,8*e,6*e,14*e),t.fillStyle(n.color,1);break}}static drawFeature(t,n,e){switch(n.feature){case"mask":t.fillStyle(n.accentColor,1),t.fillEllipse(0,2*e,16*e,18*e);break;case"wrinkle":t.lineStyle(1.5*e,0,.2),t.beginPath(),t.moveTo(-8*e,-8*e),t.lineTo(-4*e,-6*e),t.strokePath(),t.beginPath(),t.moveTo(8*e,-8*e),t.lineTo(4*e,-6*e),t.strokePath();break;case"fluffy":t.fillStyle(n.color,1);for(let s=0;s<8;s++){const i=s/8*Math.PI*2,o=Math.cos(i)*18*e,a=Math.sin(i)*18*e;t.fillCircle(o,a,6*e)}break;case"golden":t.fillStyle(16766720,.3),t.fillCircle(0,0,26*e);break;case"spots":t.fillStyle(n.accentColor,1),t.fillCircle(-10*e,-8*e,4*e),t.fillCircle(8*e,-12*e,3*e),t.fillCircle(12*e,4*e,3*e),t.fillCircle(-14*e,6*e,2*e);break;case"fluffy_face":t.fillStyle(n.accentColor,1);for(let s=0;s<12;s++){const i=s/12*Math.PI*2,o=Math.cos(i)*20*e,a=Math.sin(i)*20*e;t.fillCircle(o,a,5*e)}break;case"tricolor":t.fillStyle(n.accentColor,1),t.fillEllipse(0,5*e,14*e,12*e),t.fillStyle(1842204,1),t.fillEllipse(0,-14*e,12*e,8*e);break;case"border_pattern":t.fillStyle(n.accentColor,1),t.fillEllipse(0,6*e,16*e,14*e),t.fillStyle(n.color,1),t.fillEllipse(0,-12*e,10*e,8*e);break;case"friendly":t.fillStyle(16775885,.2),t.fillCircle(0,0,24*e);break;case"long_body":t.fillStyle(n.accentColor,1),t.fillEllipse(0,8*e,16*e,10*e);break;case"bat_face":t.fillStyle(n.accentColor,1),t.fillEllipse(0,4*e,18*e,12*e),t.lineStyle(1*e,0,.15),t.beginPath(),t.arc(0,-4*e,8*e,.5,Math.PI-.5,!1),t.strokePath();break;case"beard":t.fillStyle(n.accentColor,1),t.fillEllipse(-10*e,-10*e,8*e,4*e),t.fillEllipse(10*e,-10*e,8*e,4*e),t.fillEllipse(0,10*e,14*e,10*e);break;case"tan_points":t.fillStyle(n.accentColor,1),t.fillEllipse(0,6*e,14*e,10*e),t.fillCircle(-8*e,-10*e,4*e),t.fillCircle(8*e,-10*e,4*e);break;case"akita_mask":t.fillStyle(n.accentColor,1),t.fillEllipse(0,4*e,18*e,16*e);break;case"brindle":t.lineStyle(2*e,n.accentColor,.5);for(let s=-2;s<=2;s++)t.beginPath(),t.moveTo((s*6-3)*e,-16*e),t.lineTo((s*6+3)*e,16*e),t.strokePath();break;case"thick_fur":t.fillStyle(n.accentColor,.4);for(let s=0;s<10;s++){const i=s/10*Math.PI*2,o=Math.cos(i)*22*e,a=Math.sin(i)*22*e;t.fillCircle(o,a,4*e)}break;case"saint_pattern":t.fillStyle(n.accentColor,1),t.fillEllipse(0,5*e,16*e,14*e),t.fillStyle(n.color,.8),t.fillRoundedRect(-3*e,-18*e,6*e,20*e,2*e);break;case"long_nose":t.fillStyle(n.accentColor,1),t.fillEllipse(0,10*e,12*e,14*e);break;case"bernese_pattern":t.fillStyle(n.accentColor,1),t.fillEllipse(0,6*e,16*e,12*e),t.fillStyle(13468991,1),t.fillCircle(-10*e,-8*e,4*e),t.fillCircle(10*e,-8*e,4*e);break;case"pure_white":t.fillStyle(16777215,.4),t.fillCircle(0,0,26*e),t.fillStyle(16766720,.3),t.fillCircle(-12*e,-12*e,3*e),t.fillCircle(14*e,-8*e,2*e),t.fillCircle(8*e,14*e,2*e);break}}static drawEyes(t,n,e,s,i){const o=n.eyeType||"round";switch(t.fillStyle(0,1),i>=10&&s==="happy"?s="sparkle":i>=5&&s==="happy"&&Math.random()>.5&&(s="wink"),s){case"happy":t.lineStyle(3*e,0,1),t.beginPath(),t.arc(-8*e,-4*e,5*e,Math.PI,0,!1),t.strokePath(),t.beginPath(),t.arc(8*e,-4*e,5*e,Math.PI,0,!1),t.strokePath();break;case"wink":t.lineStyle(3*e,0,1),t.beginPath(),t.arc(-8*e,-4*e,5*e,Math.PI,0,!1),t.strokePath(),t.fillStyle(0,1),t.fillCircle(8*e,-4*e,4*e),t.fillStyle(16777215,1),t.fillCircle(10*e,-6*e,1.5*e);break;case"sparkle":t.fillStyle(0,1),t.fillCircle(-8*e,-4*e,5*e),t.fillCircle(8*e,-4*e,5*e),t.fillStyle(16777215,1),t.fillCircle(-6*e,-6*e,2*e),t.fillCircle(10*e,-6*e,2*e),t.fillCircle(-10*e,-2*e,1*e),t.fillCircle(6*e,-2*e,1*e);break;default:o==="big"||o==="huge"?(t.fillCircle(-8*e,-4*e,5*e),t.fillCircle(8*e,-4*e,5*e)):o==="almond"?(t.fillEllipse(-8*e,-4*e,5*e,4*e),t.fillEllipse(8*e,-4*e,5*e,4*e)):o==="smart"?(t.fillEllipse(-8*e,-4*e,4*e,3*e),t.fillEllipse(8*e,-4*e,4*e,3*e),t.lineStyle(1.5*e,0,.4),t.beginPath(),t.moveTo(-12*e,-8*e),t.lineTo(-4*e,-7*e),t.strokePath(),t.beginPath(),t.moveTo(12*e,-8*e),t.lineTo(4*e,-7*e),t.strokePath()):o==="gentle"?(t.fillEllipse(-8*e,-3*e,4*e,4*e),t.fillEllipse(8*e,-3*e,4*e,4*e)):o==="bushy"?(t.fillCircle(-8*e,-4*e,3*e),t.fillCircle(8*e,-4*e,3*e)):o==="sharp"?(t.fillEllipse(-8*e,-4*e,4*e,3*e),t.fillEllipse(8*e,-4*e,4*e,3*e),t.lineStyle(2*e,0,.6),t.beginPath(),t.moveTo(-12*e,-9*e),t.lineTo(-5*e,-7*e),t.strokePath(),t.beginPath(),t.moveTo(12*e,-9*e),t.lineTo(5*e,-7*e),t.strokePath()):o==="wild"?(t.fillEllipse(-7*e,-5*e,4*e,3*e),t.fillEllipse(7*e,-5*e,4*e,3*e)):o==="noble"?(t.fillEllipse(-8*e,-4*e,4*e,4*e),t.fillEllipse(8*e,-4*e,4*e,4*e)):o==="droopy"?(t.fillEllipse(-8*e,-2*e,5*e,4*e),t.fillEllipse(8*e,-2*e,5*e,4*e)):(t.fillCircle(-8*e,-4*e,4*e),t.fillCircle(8*e,-4*e,4*e)),t.fillStyle(16777215,1),t.fillCircle(-6*e,-6*e,1.5*e),t.fillCircle(10*e,-6*e,1.5*e)}}static drawMouth(t,n,e){t.lineStyle(2*n,0,.8),e==="happy"||e==="wink"||e==="sparkle"?(t.beginPath(),t.arc(0,10*n,6*n,.2,Math.PI-.2,!1),t.strokePath()):(t.beginPath(),t.moveTo(-4*n,12*n),t.lineTo(0,14*n),t.lineTo(4*n,12*n),t.strokePath())}}class K{static draw(t,n,e,s=16758465,i=16,o=1){const a=t.add.container(n,e);if(s==="rainbow"){const b=[16739179,16766720,9498256,8900331,14524637];s=b[Math.floor(Math.random()*b.length)]}const r=s>>16&255,l=s>>8&255,c=s&255,d=C.Display.Color.GetColor(Math.min(255,r+60),Math.min(255,l+60),Math.min(255,c+60));C.Display.Color.GetColor(Math.max(0,r-40),Math.max(0,l-40),Math.max(0,c-40));const h=t.add.graphics();h.fillStyle(0,.15),h.fillEllipse(i*.05,i*.3,i*.55,i*.45),[{x:-i*.28,y:-i*.2},{x:-i*.08,y:-i*.35},{x:i*.12,y:-i*.35},{x:i*.32,y:-i*.2}].forEach(b=>{h.fillCircle(b.x,b.y,i*.16)}),a.add(h);const g=t.add.graphics();g.fillStyle(s,1),g.fillEllipse(0,i*.18,i*.52,i*.42);const F=[{x:-i*.3,y:-i*.22,sz:.17},{x:-i*.1,y:-i*.38,sz:.16},{x:i*.1,y:-i*.38,sz:.16},{x:i*.3,y:-i*.22,sz:.17}];F.forEach(b=>{g.fillCircle(b.x,b.y,i*b.sz)}),a.add(g);const y=t.add.graphics();y.fillStyle(d,.6),y.fillEllipse(-i*.12,i*.08,i*.2,i*.15),F.forEach(b=>{y.fillCircle(b.x-i*.05,b.y-i*.05,i*.06)}),a.add(y);const S=t.add.graphics();return S.fillStyle(16777215,.8),S.fillCircle(-i*.15,i*.05,i*.08),S.fillCircle(-i*.2,-i*.3,i*.04),a.add(S),a.setAlpha(o),a}}class Yt extends C.Scene{constructor(){super({key:"BootScene"})}preload(){console.log("üêï „ÉØ„É≥„Åì„Å≠„Åè„Å® - ÁîªÂÉè„Ç¢„Çª„ÉÉ„ÉàË™≠„ÅøËæº„Åø‰∏≠...");const{width:t,height:n}=this.scale,e=this.add.graphics();e.fillStyle(16770273,1),e.fillRoundedRect(t/2-100,n/2+50,200,20,10);const s=this.add.graphics(),i=this.add.text(t/2,n/2+30,"„Çè„Çì„Åì„Åü„Å°„Çí„Çà„Çì„Åß„ÅÑ„Åæ„Åô...",{fontFamily:"KeiFont, sans-serif",fontSize:"14px",color:"#8B4513"}).setOrigin(.5);this.load.on("progress",o=>{s.clear(),s.fillStyle(16758465,1),s.fillRoundedRect(t/2-98,n/2+52,196*o,16,8)}),this.load.on("complete",()=>{s.destroy(),e.destroy(),i.destroy(),console.log("‚úÖ ÁîªÂÉè„Ç¢„Çª„ÉÉ„ÉàË™≠„ÅøËæº„ÅøÂÆå‰∫ÜÔºÅ")}),Object.entries(Ct).forEach(([o,a])=>{a.hasImage&&a.folder&&$t.forEach(r=>{const l=`dog_${o}_${r}`,c=`./assets/characters/${a.folder}/${r}.png`;this.load.image(l,c)})})}create(){const{width:t,height:n}=this.scale;this.add.rectangle(0,0,t,n,m.sky).setOrigin(0);const e=this.add.graphics();e.fillStyle(m.grass,1),e.fillRect(0,n*.7,t,n*.3);const s=n/2-40,i=[1,2,3,4];this.dogs=[],i.forEach((a,r)=>{const l=t*(.2+r*.2),c=z.draw(this,l,s,a,18,"happy");this.dogs.push(c),this.tweens.add({targets:c,y:s-10,duration:400+r*50,yoyo:!0,repeat:-1,ease:"Sine.easeInOut",delay:r*100})});const o=Math.min(t*.08,28);this.add.text(t/2,n/2+30,"„ÉØ„É≥„Åì„Å≠„Åè„Å®",{...w.title,fontSize:`${o}px`}).setOrigin(.5),this.statusText=this.add.text(t/2,n/2+70,"„Çà„Åø„Åì„Åø„Å°„ÇÖ„ÅÜ...",{...w.body,fontSize:"16px"}).setOrigin(.5),this.pawProgress=this.add.container(t/2,n/2+110),this.time.delayedCall(300,()=>this.initializeLevels())}initializeLevels(){if(typeof st<"u"){const n=new st(6);B=[];const e=new Set;let s=0;const i=()=>{var r;let o=0;for(;o<25&&B.length<100;){const l=B.length<30?1:B.length<70?2:3,c=n.generate({difficulty:l,maxAttempts:50});if(c){const d=c.snacks.map(h=>`${h.row},${h.col},${h.type}`).sort().join("|");e.has(d)?s++:(e.add(d),c.id=B.length+1,B.push(c),s=0)}else s++;s>30&&(e.clear(),s=0),o++}this.statusText.setText(`„Çπ„ÉÜ„Éº„Ç∏ÁîüÊàê‰∏≠... ${B.length}/100`),this.pawProgress.removeAll(!0);const a=Math.floor(B.length/10);for(let l=0;l<a;l++){const c=l%4+1,d=((r=v[c])==null?void 0:r.color)||16758465,h=K.draw(this,(l-4.5)*25,0,d,12);this.pawProgress.add(h)}B.length<100?setTimeout(i,10):(this.statusText.setText("„Åã„Çì„Çä„Çá„ÅÜÔºÅ"),this.time.delayedCall(600,()=>this.scene.start("TitleScene")))};i()}else B=[{id:1,gridSize:6,pathCount:4,snacks:[{row:0,col:0,type:1},{row:5,col:5,type:1},{row:0,col:5,type:2},{row:5,col:0,type:2},{row:2,col:0,type:3},{row:3,col:5,type:3},{row:3,col:0,type:4},{row:2,col:5,type:4}]}],this.scene.start("TitleScene")}}class Ut extends C.Scene{constructor(){super({key:"TitleScene"})}create(){const{width:t,height:n}=this.scale;f=$.checkAndResetDaily(f),T.save(f);const e=J[f.customize.theme]||J.default;this.add.rectangle(0,0,t,n,e.sky).setOrigin(0),this.createStatusBar(),this.createTitle(),this.createDogs(),this.createDailyMission(),this.createMainButtons(),this.createImportantButtons(),this.createSettingsButton(),this.cameras.main.fadeIn(500)}createStatusBar(){var a;const{width:t}=this.scale,n=x.TOP+12,e=f.unlockedDogs.length;Object.keys(v).length-1,this.add.text(18,n,`üêï ${e}`,{fontSize:"14px",color:"#FFFFFF",stroke:"#00000066",strokeThickness:3,fontStyle:"bold"}).setOrigin(0,0);const s=((a=f.rewards)==null?void 0:a.medals)||0;this.add.text(t/2,n,`üèÖ ${s}`,{fontSize:"14px",color:"#FFD700",stroke:"#00000066",strokeThickness:3,fontStyle:"bold"}).setOrigin(.5,0).setInteractive({useHandCursor:!0}).on("pointerup",()=>{this.cameras.main.fadeOut(300),this.time.delayedCall(300,()=>this.scene.start("StampRallyScene"))});const o=f.stats.challengeHighScore||0;this.add.text(t-18,n,`üèÜ ${o}`,{fontSize:"14px",color:"#FFFFFF",stroke:"#00000066",strokeThickness:3,fontStyle:"bold"}).setOrigin(1,0)}createTitle(){const{width:t,height:n}=this.scale,e=n-x.TOP-x.BOTTOM,s=x.TOP+e*.28,i=Math.min(Math.max(t*.1,28),42),o=Math.min(Math.max(t*.75,240),320),a=i*1.8,r=this.add.graphics();r.fillStyle(m.uiBg,1),r.fillRoundedRect(t/2-o/2,s-a/2,o,a,32),r.lineStyle(3,m.uiOutline,1),r.strokeRoundedRect(t/2-o/2,s-a/2,o,a,32),this.add.text(t/2,s,"„ÉØ„É≥„Åì„Å≠„Åè„Å®",{...w.title,fontSize:`${i}px`}).setOrigin(.5);const l=o/2-20;K.draw(this,t/2-l,s,v[1].color,10),K.draw(this,t/2+l,s,v[3].color,10)}createDogs(){const{width:t,height:n}=this.scale,e=n-x.TOP-x.BOTTOM,s=x.TOP+e*.38,i=f.selectedDogs;this.dogContainers=[];for(let o=0;o<4;o++){const a=i[o]||o+1,r=t*(.14+o*.24),l=z.draw(this,r,s,a,22,"happy");this.dogContainers.push({dog:l,x:r,y:s,type:a}),this.add.rectangle(r,s,60,60,0,0).setInteractive({useHandCursor:!0}).on("pointerdown",()=>{this.tweens.killTweensOf(l),this.tweens.add({targets:l,y:s-20,duration:80,yoyo:!0,repeat:2,ease:"Quad.easeOut",onComplete:()=>{this.tweens.add({targets:l,y:s-6,duration:500+o*80,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"})}});const d=this.add.text(r,s-40,"„Çè„ÇìÔºÅ",{fontSize:"14px",fontFamily:"KeiFont, sans-serif",color:"#FF6B8A",backgroundColor:"#FFFFFF",padding:{x:8,y:4},stroke:"#FFB6C1",strokeThickness:2}).setOrigin(.5).setScale(0);this.tweens.add({targets:d,scale:1.1,y:s-60,duration:200,ease:"Back.easeOut",onComplete:()=>{this.tweens.add({targets:d,alpha:0,y:d.y-15,scale:.8,duration:400,delay:300,onComplete:()=>d.destroy()})}});const h=this.add.text(r+C.Math.Between(-15,15),s-20,"‚ô•",{fontSize:"18px",color:"#FF6B8A"}).setOrigin(.5).setScale(0);this.tweens.add({targets:h,y:h.y-35,scale:{from:0,to:1.2},alpha:{from:1,to:0},duration:600,ease:"Cubic.easeOut",onComplete:()=>h.destroy()}),R.selection()}),this.tweens.add({targets:l,y:s-6,duration:500+o*80,yoyo:!0,repeat:-1,ease:"Sine.easeInOut",delay:o*150})}this.time.addEvent({delay:2500,callback:()=>{const o=t*(.14+C.Math.Between(0,3)*.24),a=this.add.text(o,s-30,"‚ô•",{fontSize:"16px",color:"#FF6B8A"}).setOrigin(.5).setAlpha(0);this.tweens.add({targets:a,y:a.y-25,alpha:{from:1,to:0},scale:{from:.5,to:1.3},duration:700,onComplete:()=>a.destroy()})},loop:!0})}createDailyMission(){const{width:t,height:n}=this.scale,e=n-x.TOP-x.BOTTOM,s=$.getTodaysMissions(f);if(s.length===0)return;const i=$.areAllMissionsComplete(f),o=i&&!f.daily.medalClaimedToday,a=x.TOP+e*.45,r=o?95:90,l=this.add.graphics();l.fillStyle(16766720,.15),l.fillRoundedRect(27,a+3,t-50,r,14),l.fillStyle(16776693,.98),l.fillRoundedRect(25,a,t-50,r,14),l.fillStyle(16766720,.7),l.fillRoundedRect(25,a,t-50,5,{tl:14,tr:14,bl:0,br:0}),o&&(l.lineStyle(3,16766720,1),l.strokeRoundedRect(25,a,t-50,r,14)),this.add.text(t/2,a+16,"üêæ „Åç„Çá„ÅÜ„ÅÆ„Åä„Åï„Çì„ÅΩ",{fontFamily:"KeiFont, sans-serif",fontSize:"15px",color:"#5D4037",fontStyle:"bold"}).setOrigin(.5);const c=$.getStampRallyInfo(f);if(this.add.text(t-35,a+14,`üìÖ ${c.stamps.length}/7`,{fontSize:"10px",color:"#888888"}).setOrigin(1,.5).setInteractive({useHandCursor:!0}).on("pointerup",()=>{this.cameras.main.fadeOut(300),this.time.delayedCall(300,()=>this.scene.start("StampRallyScene"))}),s.slice(0,2).forEach((u,g)=>{const F=a+32+g*16,y=u.completed?"‚úÖ":"‚¨ú",S=u.completed?"#888888":m.textDark;this.add.text(35,F,`${y} ${u.name}`,{fontSize:"11px",color:S});const b=`${Math.min(u.progress,u.target)}/${u.target}`;this.add.text(t-35,F,b,{fontSize:"11px",color:u.completed?"#4CAF50":"#FF6B6B",fontStyle:"bold"}).setOrigin(1,0)}),o){const u=a+70,g=this.add.container(t/2,u),F=this.add.graphics();F.fillStyle(16766720,1),F.fillRoundedRect(-70,-12,140,24,6),g.add(F);const y=this.add.text(0,0,"üèÖ „ÇÑ„Å£„Åü„ÉºÔºÅ",{fontFamily:"KeiFont, sans-serif",fontSize:"12px",color:"#FFFFFF",fontStyle:"bold",stroke:"#8B4513",strokeThickness:2}).setOrigin(.5);g.add(y),g.setSize(140,24),g.setInteractive({useHandCursor:!0}),this.tweens.add({targets:g,scale:{from:1,to:1.05},duration:400,yoyo:!0,repeat:-1}),g.on("pointerup",()=>{const S=$.awardMedalIfComplete(f);S.awarded&&this.scene.start("MedalCelebrationScene",{totalMedals:S.totalMedals,newCostumes:S.newCostumes,stampCount:S.stampCount})})}else i&&f.daily.medalClaimedToday&&this.add.text(t/2,a+70,"‚úÖ ‰ªäÊó•„ÅÆ„É°„ÉÄ„É´„ÅØÁç≤Âæó„Åö„ÅøÔºÅ",{fontSize:"10px",color:"#4CAF50"}).setOrigin(.5)}createMainButtons(){const{width:t,height:n}=this.scale,e=n-x.TOP-x.BOTTOM,s=180,i=48,o=12,a=x.TOP+e*.64;this.createPrimaryButton(t/2,a,"„ÅÇ„Åù„Å∂",v[1].color,s,i,()=>{this.cameras.main.fadeOut(300),this.time.delayedCall(300,()=>this.scene.start("SelectScene"))});const r=a+i+o;this.createPrimaryButton(t/2,r,"„ÉÅ„É£„É¨„É≥„Ç∏",v[4].color,s,i,()=>{this.cameras.main.fadeOut(300),this.time.delayedCall(300,()=>this.scene.start("GameScene",{mode:"challenge"}))})}createPrimaryButton(t,n,e,s,i,o,a){const r=this.add.container(t,n),l=this.add.graphics();l.fillStyle(0,.22),l.fillRoundedRect(-i/2+3,-o/2+5,i,o,12),r.add(l);const c=this.add.graphics();c.fillStyle(s,1),c.fillRoundedRect(-i/2,-o/2,i,o,12),c.lineStyle(3,16777215,.6),c.strokeRoundedRect(-i/2,-o/2,i,o,12),r.add(c);const d=this.add.text(0,0,e,{...w.button,fontSize:"22px",fontStyle:"bold"}).setOrigin(.5);return r.add(d),r.setSize(i,o),r.setInteractive({useHandCursor:!0}),r.on("pointerover",()=>this.tweens.add({targets:r,scale:1.06,duration:80,ease:"Back.easeOut"})),r.on("pointerout",()=>this.tweens.add({targets:r,scale:1,duration:80})),r.on("pointerdown",()=>{this.tweens.add({targets:r,y:n+4,scale:.94,duration:40}),R.impact("Light")}),r.on("pointerup",()=>{this.tweens.add({targets:r,y:n,scale:1.08,duration:80,ease:"Back.easeOut",onComplete:()=>{this.tweens.add({targets:r,scale:1,duration:60})}}),a()}),r}createImportantButtons(){const{width:t,height:n}=this.scale,e=n-x.TOP-x.BOTTOM,s=145,i=44,o=10,a=10,r=x.TOP+e*.8,l=r+i+a,c=[{text:"üêï „Çè„Çì„Åì„Çí„Åà„Çâ„Å∂",color:v[3].color,scene:"DogSelectScene"},{text:"üìñ „Çè„Çì„Åì„Åö„Åã„Çì",color:v[2].color,scene:"ZukanScene"}],d=[{text:"üé® „Ç´„Çπ„Çø„Éû„Ç§„Ç∫",color:v[4].color,scene:"CustomizeScene"},{text:"üõí „Ç∑„Éß„ÉÉ„Éó",color:16766720,scene:"ShopScene",isShop:!0}];c.forEach((h,u)=>{const g=t/2+(u===0?-s/2-o/2:s/2+o/2);this.createSecondaryButton(g,r,h.text,h.color,s,i,h.scene,h.isShop)}),d.forEach((h,u)=>{const g=t/2+(u===0?-s/2-o/2:s/2+o/2);this.createSecondaryButton(g,l,h.text,h.color,s,i,h.scene,h.isShop)})}createSecondaryButton(t,n,e,s,i,o,a,r=!1){const l=this.add.container(t,n),c=this.add.graphics();c.fillStyle(0,.15),c.fillRoundedRect(-i/2+2,-o/2+3,i,o,10),l.add(c);const d=this.add.graphics();if(d.fillStyle(s,1),d.fillRoundedRect(-i/2,-o/2,i,o,10),d.lineStyle(2,16777215,.5),d.strokeRoundedRect(-i/2,-o/2,i,o,10),l.add(d),r){const u=this.add.text(-i/2+10,0,"‚ú®",{fontSize:"10px"}).setOrigin(.5),g=this.add.text(i/2-10,0,"‚ú®",{fontSize:"10px"}).setOrigin(.5);l.add([u,g]),this.tweens.add({targets:[u,g],alpha:{from:1,to:.3},yoyo:!0,repeat:-1,duration:500})}const h=this.add.text(0,0,e,{...w.buttonSmall,fontSize:"13px",color:r?"#5D4037":"#FFFFFF"}).setOrigin(.5);return l.add(h),l.setSize(i,o),l.setInteractive({useHandCursor:!0}),l.on("pointerover",()=>this.tweens.add({targets:l,scale:1.05,duration:80})),l.on("pointerout",()=>this.tweens.add({targets:l,scale:1,duration:80})),l.on("pointerdown",()=>{this.tweens.add({targets:l,y:n+2,scale:.95,duration:40}),R.impact("Light")}),l.on("pointerup",()=>{this.tweens.add({targets:l,y:n,scale:1.06,duration:80,ease:"Back.easeOut",onComplete:()=>{this.tweens.add({targets:l,scale:1,duration:60})}}),this.cameras.main.fadeOut(300),this.time.delayedCall(300,()=>this.scene.start(a))}),l}createSettingsButton(){const{width:t,height:n}=this.scale,e=n-x.BOTTOM-30,s=90,i=36,o=this.add.container(t-s/2-15,e),a=this.add.graphics();a.fillStyle(0,.08),a.fillRoundedRect(-s/2+1,-i/2+2,s,i,8),o.add(a);const r=this.add.graphics();r.fillStyle(16777215,.85),r.fillRoundedRect(-s/2,-i/2,s,i,8),r.lineStyle(1.5,12303291,1),r.strokeRoundedRect(-s/2,-i/2,s,i,8),o.add(r);const l=this.add.text(0,0,"‚öôÔ∏è „Åõ„Å£„Å¶„ÅÑ",{...w.buttonSmall,fontSize:"12px",color:"#777777"}).setOrigin(.5);o.add(l),o.setSize(s,i),o.setInteractive({useHandCursor:!0}),o.on("pointerover",()=>this.tweens.add({targets:o,scale:1.05,duration:80})),o.on("pointerout",()=>this.tweens.add({targets:o,scale:1,duration:80})),o.on("pointerdown",()=>{this.tweens.add({targets:o,y:e+2,scale:.96,duration:40}),R.selection()}),o.on("pointerup",()=>{this.tweens.add({targets:o,y:e,scale:1,duration:80}),this.cameras.main.fadeOut(300),this.time.delayedCall(300,()=>this.scene.start("SettingsScene"))})}createMainButton(t,n,e,s,i,o,a){const r=this.add.container(t,n),l=this.add.graphics();l.fillStyle(0,.2),l.fillRoundedRect(-i/2+3,-o/2+5,i,o,12);const c=this.add.graphics();c.fillStyle(s,1),c.fillRoundedRect(-i/2,-o/2,i,o,12),c.lineStyle(3,16777215,.5),c.strokeRoundedRect(-i/2,-o/2,i,o,12);const d=this.add.text(0,0,e,{...w.button,fontSize:o>55?"26px":"22px"}).setOrigin(.5);return r.add([l,c,d]),r.setSize(i,o),r.setInteractive({useHandCursor:!0}),r.on("pointerover",()=>this.tweens.add({targets:r,scale:1.05,duration:80})),r.on("pointerout",()=>this.tweens.add({targets:r,scale:1,duration:80})),r.on("pointerdown",()=>this.tweens.add({targets:r,y:n+4,duration:50})),r.on("pointerup",()=>{this.tweens.add({targets:r,y:n,duration:80}),a()}),r}createSubButton(t,n,e,s,i,o,a){const r=this.add.container(t,n),l=this.add.graphics();l.fillStyle(s,1),l.fillRoundedRect(-i/2,-o/2,i,o,8),l.lineStyle(2,16777215,.4),l.strokeRoundedRect(-i/2,-o/2,i,o,8);const c=this.add.text(0,0,e,{...w.buttonSmall,fontSize:"13px",align:"center",lineSpacing:-2}).setOrigin(.5);return r.add([l,c]),r.setSize(i,o),r.setInteractive({useHandCursor:!0}),r.on("pointerover",()=>this.tweens.add({targets:r,scale:1.05,duration:80})),r.on("pointerout",()=>this.tweens.add({targets:r,scale:1,duration:80})),r.on("pointerup",a),r}createIconButton(t,n,e,s,i){const o=this.add.container(t,n),a=this.add.graphics();a.fillStyle(16777215,.9),a.fillCircle(0,0,28),a.lineStyle(2,13421772,1),a.strokeCircle(0,0,28);const r=this.add.text(0,-2,e,{fontSize:"24px"}).setOrigin(.5),l=this.add.text(0,38,s,{fontSize:"10px",color:"#666666"}).setOrigin(.5);return o.add([a,r,l]),o.setSize(56,56),o.setInteractive({useHandCursor:!0}),o.on("pointerover",()=>this.tweens.add({targets:o,scale:1.1,duration:80})),o.on("pointerout",()=>this.tweens.add({targets:o,scale:1,duration:80})),o.on("pointerup",i),o}createBigShopButton(t,n){const e=this.add.container(t,n),s=200,i=50,o=this.add.graphics();o.fillStyle(13408512,.4),o.fillRoundedRect(-s/2+3,-i/2+4,s,i,25),e.add(o);const a=this.add.graphics();a.fillGradientStyle(16766720,16766720,16761095,16761095,1),a.fillRoundedRect(-s/2,-i/2,s,i,25),a.lineStyle(3,16777215,.6),a.strokeRoundedRect(-s/2,-i/2,s,i,25),e.add(a);const r=this.add.text(-s/2+20,0,"‚ú®",{fontSize:"16px"}).setOrigin(.5);e.add(r);const l=this.add.text(-35,0,"üõí",{fontSize:"22px"}).setOrigin(.5);e.add(l);const c=this.add.text(15,0,"„Ç∑„Éß„ÉÉ„Éó",{...w.button,fontSize:"20px",color:"#5D4037"}).setOrigin(.5);e.add(c);const d=this.add.text(s/2-20,0,"‚ú®",{fontSize:"16px"}).setOrigin(.5);return e.add(d),e.setSize(s,i),e.setInteractive({useHandCursor:!0}),this.tweens.add({targets:[r,d],alpha:{from:1,to:.3},scale:{from:1,to:1.3},yoyo:!0,repeat:-1,duration:600,ease:"Sine.easeInOut"}),e.on("pointerover",()=>{this.tweens.add({targets:e,scale:1.08,duration:100,ease:"Back.easeOut"})}),e.on("pointerout",()=>{this.tweens.add({targets:e,scale:1,duration:100})}),e.on("pointerdown",()=>{this.tweens.add({targets:e,y:n+3,scale:.97,duration:50})}),e.on("pointerup",()=>{this.tweens.add({targets:e,y:n,scale:1,duration:80}),this.cameras.main.fadeOut(300),this.time.delayedCall(300,()=>this.scene.start("ShopScene"))}),e}}class Kt extends C.Scene{constructor(){super({key:"SelectScene"}),this.page=0,this.perPage=12}create(){const{width:t,height:n}=this.scale,e=x.TOP+32,s=56;this.add.rectangle(0,0,t,n,m.sky).setOrigin(0);const i=this.add.graphics();i.fillStyle(m.ground,1),i.fillRect(0,e+s-10,t,n);const o=this.add.graphics();o.fillStyle(m.uiBg,1),o.fillRect(0,0,t,e+s),o.lineStyle(2,m.uiOutline,1),o.lineBetween(0,e+s,t,e+s),this.createBackButton(50,e+2),this.add.text(t/2,e+2,"üêæ „Çπ„ÉÜ„Éº„Ç∏„Åõ„Çì„Åü„Åè",{...w.heading,fontSize:"20px"}).setOrigin(.5),this.createGrid(),this.createPagination(),this.cameras.main.fadeIn(300)}createBackButton(t,n){const e=this.add.container(t,n),s=this.add.graphics();s.fillStyle(16777215,.95),s.fillRoundedRect(-32,-16,64,32,8),s.lineStyle(2,v[3].color,1),s.strokeRoundedRect(-32,-16,64,32,8);const i=this.add.text(0,0,"‚Üê „ÇÇ„Å©„Çã",{fontSize:"12px",fontStyle:"bold",color:v[3].color}).setOrigin(.5);return e.add([s,i]),e.setSize(64,32),e.setInteractive({useHandCursor:!0}),e.on("pointerover",()=>this.tweens.add({targets:e,scale:1.08,duration:80})),e.on("pointerout",()=>this.tweens.add({targets:e,scale:1,duration:80})),e.on("pointerup",()=>{this.cameras.main.fadeOut(300),this.time.delayedCall(300,()=>this.scene.start("TitleScene"))}),e}createGrid(){const{width:t,height:n}=this.scale,e=3,s=90,i=100,o=10,a=e*s+(e-1)*o,r=(t-a)/2,l=x.TOP+90,d=n-x.BOTTOM-55-l,h=Math.ceil(this.perPage/e),u=h*i+(h-1)*o,g=l+(d-u)/2+i/2,F=this.page*this.perPage,y=Math.min(F+this.perPage,B.length);for(let S=F;S<y;S++){const b=S-F,O=b%e,E=Math.floor(b/e),M=r+O*(s+o)+s/2,A=g+E*(i+o);this.createCard(M,A,s,i,S)}}createCard(t,n,e,s,i){const o=this.add.container(t,n),a=B[i],r=this.add.graphics();r.fillStyle(8947848,.2),r.fillRoundedRect(-e/2,-s/2,e,s,8),r.x=3,r.y=3;const l=this.add.graphics();l.fillStyle(m.cellBg,1),l.fillRoundedRect(-e/2,-s/2,e,s,8),l.lineStyle(2,m.cellOutline,1),l.strokeRoundedRect(-e/2,-s/2,e,s,8);const c=this.add.text(0,-s/2+16,`${i+1}`,{fontSize:"16px",fontStyle:"bold",color:m.textDark}).setOrigin(.5),d=this.createPreview(a,42);return o.add([r,l,c,d]),o.setSize(e,s),o.setInteractive({useHandCursor:!0}),o.on("pointerover",()=>this.tweens.add({targets:o,scale:1.08,y:n-3,duration:80})),o.on("pointerout",()=>this.tweens.add({targets:o,scale:1,y:n,duration:80})),o.on("pointerup",()=>{this.cameras.main.fadeOut(300),this.time.delayedCall(300,()=>this.scene.start("GameScene",{mode:"normal",levelIndex:i}))}),o.setScale(0),this.tweens.add({targets:o,scale:1,duration:200,delay:i%this.perPage*30,ease:"Back.easeOut"}),o}createPreview(t,n){var r;const e=this.add.container(0,15),s=n/6,i=-n/2,o=f.selectedDogs,a=this.add.graphics();a.fillStyle(m.grass,.3),a.fillRoundedRect(i-2,i-2,n+4,n+4,4),e.add(a);for(let l=0;l<6;l++)for(let c=0;c<6;c++){const d=i+c*s+s/2,h=i+l*s+s/2,u=t.snacks.find(F=>F.row===l&&F.col===c),g=this.add.graphics();if(u){const F=o[(u.type-1)%o.length],y=((r=v[F])==null?void 0:r.color)||14596231;g.fillStyle(y,1),g.fillCircle(d,h,s*.35),g.lineStyle(1,m.cellOutline,1),g.strokeCircle(d,h,s*.35)}else g.fillStyle(m.cellBg,1),g.fillCircle(d,h,s*.2);e.add(g)}return e}createPagination(){const{width:t,height:n}=this.scale,e=Math.ceil(B.length/this.perPage),s=n-x.BOTTOM-30,i=this.add.graphics();if(i.fillStyle(16777215,.9),i.fillRoundedRect(t/2-70,s-16,140,32,8),this.add.text(t/2,s,`${this.page+1} / ${e}`,{fontSize:"16px",fontStyle:"bold",color:m.textDark}).setOrigin(.5),this.page>0){const o=this.add.container(t/2-50,s),a=this.add.graphics();a.fillStyle(v[2].color,1),a.fillCircle(0,0,14);const r=this.add.text(0,0,"‚óÄ",{fontSize:"14px",color:"#FFFFFF"}).setOrigin(.5);o.add([a,r]),o.setSize(28,28),o.setInteractive({useHandCursor:!0}),o.on("pointerover",()=>this.tweens.add({targets:o,scale:1.15,duration:80})),o.on("pointerout",()=>this.tweens.add({targets:o,scale:1,duration:80})),o.on("pointerup",()=>{this.page--,this.scene.restart()})}if(this.page<e-1){const o=this.add.container(t/2+50,s),a=this.add.graphics();a.fillStyle(v[1].color,1),a.fillCircle(0,0,14);const r=this.add.text(0,0,"‚ñ∂",{fontSize:"14px",color:"#FFFFFF"}).setOrigin(.5);o.add([a,r]),o.setSize(28,28),o.setInteractive({useHandCursor:!0}),o.on("pointerover",()=>this.tweens.add({targets:o,scale:1.15,duration:80})),o.on("pointerout",()=>this.tweens.add({targets:o,scale:1,duration:80})),o.on("pointerup",()=>{this.page++,this.scene.restart()})}}}class Nt extends C.Scene{constructor(){super({key:"GameScene"})}init(t){this.mode=t.mode||"normal",this.lvIndex=t.levelIndex||0,this.chalScore=t.challengeScore||0,this.hasGolden=!1,this.existingTypes=[]}create(){const{width:t,height:n}=this.scale;this.createBackground(),this.loadLevel(),this.createGrid(),this.createUI(),this.setupInput(),this.playEntryAnim(),this.cameras.main.fadeIn(300)}createBackground(){const{width:t,height:n}=this.scale,e=J[f.customize.theme]||J.default,s=x.TOP+60,i=n-x.BOTTOM-60;this.add.rectangle(0,0,t,n,e.sky).setOrigin(0);const o=this.add.graphics();o.fillStyle(e.ground,1),o.fillRect(0,s,t,n-s);const a=s+8,r=i-8;o.fillStyle(m.grass,1),o.fillRoundedRect(12,a,t-24,r-a,14),o.lineStyle(2,m.grassDark,1),o.strokeRoundedRect(12,a,t-24,r-a,14)}loadLevel(){if(this.mode==="challenge")if(typeof st<"u"){const i=new st(6),o=Math.min(3,1+Math.floor(this.chalScore/5));this.level=i.generate({difficulty:o,maxAttempts:50})||B[C.Math.Between(0,B.length-1)]}else this.level=B[C.Math.Between(0,B.length-1)];else this.level=B[this.lvIndex];const t=this.mode==="challenge"?this.chalScore+1:this.lvIndex+1,n=this.mode==="challenge"?5:10;this.hasGolden=t%n===0,this.grid=[];for(let i=0;i<6;i++){this.grid[i]=[];for(let o=0;o<6;o++)this.grid[i][o]={type:0,isEnd:!1,pathType:0}}const e=JSON.parse(JSON.stringify(this.level.snacks));if(this.hasGolden&&e.length>=2){const i=[...new Set(e.map(a=>a.type))],o=i[Math.floor(Math.random()*i.length)];e.forEach(a=>{a.type===o&&(a.type=5)})}const s=f.selectedDogs;e.forEach(i=>{i.type!==5&&(i.type=s[(i.type-1)%s.length])}),this.existingTypes=[...new Set(e.map(i=>i.type))],e.forEach(i=>{this.grid[i.row][i.col]={type:i.type,isEnd:!0,pathType:i.type}}),this.levelSnacks=e,this.paths={},this.trails={},this.existingTypes.forEach(i=>{this.paths[i]=[],this.trails[i]=[]}),this.drawing=!1,this.curType=null,this.lastCell=null}createGrid(){const{width:t,height:n}=this.scale,e=x.TOP+60,s=x.BOTTOM+60,i=20,o=n-e-s-i,a=t-i*2,r=Math.min(a,o);this.cellSz=(r-P.CELL_PADDING*7)/6,this.gridX=(t-r)/2+P.CELL_PADDING,this.gridY=e+(o-r)/2+P.CELL_PADDING,this.cellCon=this.add.container(0,0),this.cells=[];for(let l=0;l<6;l++){this.cells[l]=[];for(let c=0;c<6;c++){const d=this.gridX+c*(this.cellSz+P.CELL_PADDING),h=this.gridY+l*(this.cellSz+P.CELL_PADDING),u=this.add.container(d,h),g=this.add.graphics();Wt.roundedRect(g,0,0,this.cellSz,this.cellSz,P.CORNER_RADIUS,m.cellBg,m.cellOutline,2);const F=this.add.graphics();u.add([g,F]),u.setData("fill",F),this.cells[l][c]=u,this.cellCon.add(u)}}this.trailCon=this.add.container(0,0),this.dogCon=this.add.container(0,0),this.dogIcons={},this.levelSnacks.forEach(l=>{const c=this.gridX+l.col*(this.cellSz+P.CELL_PADDING)+this.cellSz/2,d=this.gridY+l.row*(this.cellSz+P.CELL_PADDING)+this.cellSz/2,h=z.draw(this,c,d,l.type,this.cellSz*.4,"neutral");this.dogCon.add(h),this.dogIcons[`${l.row},${l.col}`]={container:h,type:l.type}})}playEntryAnim(){for(let t=0;t<6;t++)for(let n=0;n<6;n++){const e=this.cells[t][n],s=e.y;e.y=s-40,e.alpha=0,this.tweens.add({targets:e,y:s,alpha:1,duration:250,delay:(t+n)*20,ease:"Back.easeOut"})}this.dogCon.list.forEach((t,n)=>{const e=t.scaleX;t.setScale(0),this.tweens.add({targets:t,scaleX:e,scaleY:e,duration:300,delay:280+n*35,ease:"Back.easeOut"})})}createUI(){var c,d;const{width:t,height:n}=this.scale,e=x.TOP+30,s=x.TOP+60,i=n-x.BOTTOM-30,o=n-x.BOTTOM-60,a=this.add.graphics();a.fillStyle(m.uiBg,1),a.fillRect(0,0,t,s),a.lineStyle(2,m.uiOutline,1),a.lineBetween(0,s,t,s),this.createBackBtn(48,e,()=>{this.mode==="challenge"?this.showConfirm():(this.cameras.main.fadeOut(300),this.time.delayedCall(300,()=>this.scene.start("SelectScene")))});const r=this.mode==="challenge"?`üî• ${this.chalScore+1}`:`${this.lvIndex+1}`;this.add.text(t/2,e,r,{fontSize:"22px",fontStyle:"bold",color:m.textDark}).setOrigin(.5),this.progContainer=this.add.container(t/2,s+10),this.updateProgress();const l=this.add.graphics();l.fillStyle(m.uiBg,1),l.fillRect(0,o,t,n-o),l.lineStyle(2,m.uiOutline,1),l.lineBetween(0,o,t,o),this.createResetBtn(t/2,i,()=>this.resetLevel()),this.bgmBtn=this.createToggleButton(50,i,"üéµ",((c=f.settings)==null?void 0:c.bgm)!==!1,h=>{f.settings=f.settings||{},f.settings.bgm=h,T.save(f)}),this.seBtn=this.createToggleButton(t-50,i,"üîä",((d=f.settings)==null?void 0:d.se)!==!1,h=>{f.settings=f.settings||{},f.settings.se=h,T.save(f)})}createBackBtn(t,n,e){const s=this.add.container(t,n),i=56,o=36,a=this.add.graphics();a.fillStyle(16777215,.95),a.fillRoundedRect(-i/2,-o/2,i,o,8),a.lineStyle(2,v[3].color,1),a.strokeRoundedRect(-i/2,-o/2,i,o,8);const r=this.add.text(0,0,"‚Üê ",{fontSize:"18px",fontStyle:"bold",color:v[3].color}).setOrigin(.5);return s.add([a,r]),s.setSize(i,o),s.setInteractive({useHandCursor:!0}),s.on("pointerover",()=>this.tweens.add({targets:s,scale:1.08,duration:80})),s.on("pointerout",()=>this.tweens.add({targets:s,scale:1,duration:80})),s.on("pointerdown",()=>{this.tweens.add({targets:s,scale:.92,duration:40}),R.impact("Light")}),s.on("pointerup",()=>{this.tweens.add({targets:s,scale:1,duration:80}),e()}),s}createResetBtn(t,n,e){const s=this.add.container(t,n),i=48,o=this.add.graphics();o.fillStyle(16777215,.95),o.fillRoundedRect(-i/2,-i/2,i,i,12),o.lineStyle(2,6710886,1),o.strokeRoundedRect(-i/2,-i/2,i,i,12);const a=this.add.text(0,0,"‚Ü∫",{fontSize:"24px",fontStyle:"bold",color:"#555555"}).setOrigin(.5);return s.add([o,a]),s.setSize(i,i),s.setInteractive({useHandCursor:!0}),s.on("pointerover",()=>this.tweens.add({targets:s,scale:1.1,duration:80})),s.on("pointerout",()=>this.tweens.add({targets:s,scale:1,duration:80})),s.on("pointerdown",()=>{this.tweens.add({targets:s,scale:.88,duration:40}),R.impact("Medium")}),s.on("pointerup",()=>{this.tweens.add({targets:a,rotation:-Math.PI*2,duration:300,ease:"Cubic.easeOut",onComplete:()=>{a.rotation=0}}),this.tweens.add({targets:s,scale:1,duration:80}),e()}),s}createToggleButton(t,n,e,s,i){const o=this.add.container(t,n),a=this.add.graphics(),r=c=>{a.clear(),a.fillStyle(c?5025616:8947848,1),a.fillRoundedRect(-24,-18,48,36,10),a.lineStyle(2,c?3046706:5592405,1),a.strokeRoundedRect(-24,-18,48,36,10)};r(s);const l=this.add.text(0,0,e,{fontSize:"20px"}).setOrigin(.5);return o.add([a,l]),o.setSize(48,36),o.setInteractive({useHandCursor:!0}),o.setData("on",s),o.on("pointerover",()=>this.tweens.add({targets:o,scale:1.08,duration:80})),o.on("pointerout",()=>this.tweens.add({targets:o,scale:1,duration:80})),o.on("pointerdown",()=>{this.tweens.add({targets:o,scale:.9,duration:40}),R.selection()}),o.on("pointerup",()=>{this.tweens.add({targets:o,scale:1.1,duration:60,yoyo:!0});const c=!o.getData("on");o.setData("on",c),r(c),i(c)}),o}setupInput(){this.input.on("pointerdown",t=>this.onDown(t)),this.input.on("pointermove",t=>this.onMove(t)),this.input.on("pointerup",()=>this.onUp())}onDown(t){const n=this.getCell(t.x,t.y);if(!n)return;const{row:e,col:s}=n,i=this.grid[e][s];i.isEnd?(this.startDraw(i.type,e,s),this.showDog(t.x,t.y),R.impact("Light")):i.pathType>0&&(this.startFromPath(i.pathType,e,s),this.showDog(t.x,t.y),R.impact("Light"))}onMove(t){if(!this.drawing)return;const n=this.getCell(t.x,t.y);n&&this.continueDraw(n.row,n.col),this.dog&&this.dog.setPosition(t.x,t.y-55)}onUp(){if(this.mode==="challenge"&&this.drawing&&this.curType&&!this.pathComplete(this.curType)){this.cameras.main.shake(300,.02),this.cameras.main.flash(200,255,100,100),this.time.delayedCall(500,()=>this.scene.start("GameOverScene",{score:this.chalScore}));return}this.drawing=!1,this.curType=null,this.lastCell=null,this.hideDog()}getCell(t,n){const e=this.cellSz*.15;for(let s=0;s<6;s++)for(let i=0;i<6;i++){const o=this.gridX+i*(this.cellSz+P.CELL_PADDING),a=this.gridY+s*(this.cellSz+P.CELL_PADDING),l=this.lastCell&&this.lastCell.row===s&&this.lastCell.col===i?e:0;if(t>=o-l&&t<=o+this.cellSz+l&&n>=a-l&&n<=a+this.cellSz+l)return{row:s,col:i}}return null}startDraw(t,n,e){this.clearPath(t),this.drawing=!0,this.curType=t,this.lastCell={row:n,col:e},this.paths[t].push({row:n,col:e});const s=`${n},${e}`;this.dogIcons[s]&&this.tweens.add({targets:this.dogIcons[s].container,scaleX:1.2,scaleY:.8,duration:80,yoyo:!0})}startFromPath(t,n,e){const s=this.paths[t],i=s.findIndex(o=>o.row===n&&o.col===e);i!==-1&&(s.splice(i+1).forEach(o=>{this.grid[o.row][o.col].isEnd||(this.grid[o.row][o.col].pathType=0)}),this.trails[t]=this.trails[t].slice(0,i),this.drawing=!0,this.curType=t,this.lastCell={row:n,col:e},this.renderPaths())}continueDraw(t,n){if(!this.drawing||!this.curType)return;const{row:e,col:s}=this.lastCell;if(t===e&&n===s||Math.abs(t-e)+Math.abs(n-s)!==1)return;const i=this.grid[t][n],o=this.paths[this.curType];if(o.length>=2){const a=o[o.length-2];if(a.row===t&&a.col===n){const r=o.pop();this.grid[r.row][r.col].isEnd||(this.grid[r.row][r.col].pathType=0),this.trails[this.curType].pop(),this.lastCell={row:t,col:n},this.updateProgress(),this.renderPaths();return}}if(!(i.pathType>0&&i.pathType!==this.curType)){if(i.isEnd&&i.type===this.curType){if(o[0].row===t&&o[0].col===n)return;o.push({row:t,col:n}),this.addTrail(e,s,t,n),this.lastCell={row:t,col:n};const a=`${t},${n}`;this.dogIcons[a]&&this.tweens.add({targets:this.dogIcons[a].container,scale:1.3,duration:150,yoyo:!0,ease:"Back.easeOut"}),this.showConnectEffect(t,n),this.updateProgress(),this.renderPaths(),this.checkClear(),R.impact("Medium");return}i.pathType!==this.curType&&(i.isEnd&&i.type!==this.curType||(o.push({row:t,col:n}),i.pathType=this.curType,this.addTrail(e,s,t,n),this.lastCell={row:t,col:n},this.updateProgress(),this.renderPaths(),R.selection()))}}addTrail(t,n,e,s){const i=this.gridX+n*(this.cellSz+P.CELL_PADDING)+this.cellSz/2,o=this.gridY+t*(this.cellSz+P.CELL_PADDING)+this.cellSz/2,a=this.gridX+s*(this.cellSz+P.CELL_PADDING)+this.cellSz/2,r=this.gridY+e*(this.cellSz+P.CELL_PADDING)+this.cellSz/2,l=Math.atan2(r-o,a-i),c=this.trails[this.curType].length,d=c%2===0?-1:1,h=l+Math.PI/2,u=d*this.cellSz*.12;this.trails[this.curType].push({x:a+Math.cos(h)*u,y:r+Math.sin(h)*u,angle:l,stepNum:c,isNew:!0})}renderPaths(){var e,s;for(let i=0;i<6;i++)for(let o=0;o<6;o++){const a=this.cells[i][o].getData("fill"),r=this.grid[i][o].pathType;a.clear(),r>0&&v[r]&&(a.fillStyle(v[r].color,.5),a.fillRoundedRect(2,2,this.cellSz-4,this.cellSz-4,P.CORNER_RADIUS-2))}const t=((e=f.customize)==null?void 0:e.pawColor)||"default",n=((s=U[t])==null?void 0:s.color)||U.default.color;this._pawColorLogged||(console.log("üêæ ËÇâÁêÉ„Ç´„É©„ÉºË®≠ÂÆö:",t,"‚Üí Ëâ≤:",n.toString(16)),this._pawColorLogged=!0),this.trailCon.removeAll(!0),this.existingTypes.forEach(i=>{const o=this.trails[i];!o||o.length===0||o.forEach((a,r)=>{const l=n,c=r>=o.length-2,d=r===o.length-1,h=d?this.cellSz*.32:c?this.cellSz*.28:this.cellSz*.22,u=K.draw(this,a.x,a.y,l,h),g=a.stepNum%2===0?-.15:.15;u.setRotation(a.angle+Math.PI/2+g);const F=d?1:c?.85:.4+r/o.length*.35;u.setAlpha(F),a.isNew&&c&&(u.setScale(0),this.tweens.add({targets:u,scale:{from:0,to:1.15},duration:80,ease:"Back.easeOut",onComplete:()=>{this.tweens.add({targets:u,scale:1,duration:60,ease:"Sine.easeOut"})}}),a.isNew=!1),this.trailCon.add(u)})})}showConnectEffect(t,n){const e=this.gridX+n*(this.cellSz+P.CELL_PADDING)+this.cellSz/2,s=this.gridY+t*(this.cellSz+P.CELL_PADDING)+this.cellSz/2,i=this.grid[t][n],o=i.type===5;this.cameras.main.shake(120,o?.012:.008),R.notification("Success");const a=`${t},${n}`,r=this.dogIcons[a];if(r){r.container.destroy();const d=z.draw(this,e,s,r.type,this.cellSz*.4,"happy");this.dogCon.add(d),this.dogIcons[a].container=d,d.setScale(.8),this.tweens.add({targets:d,scale:1.4,duration:100,ease:"Back.easeOut",onComplete:()=>{this.tweens.add({targets:d,scale:1,duration:150,ease:"Sine.easeInOut"})}})}const l=this.findPairStartKey(t,n,i.type);if(l&&this.dogIcons[l]){const d=this.dogIcons[l],[h,u]=l.split(",").map(Number),g=this.gridX+u*(this.cellSz+P.CELL_PADDING)+this.cellSz/2,F=this.gridY+h*(this.cellSz+P.CELL_PADDING)+this.cellSz/2;d.container.destroy();const y=z.draw(this,g,F,d.type,this.cellSz*.4,"happy");this.dogCon.add(y),this.dogIcons[l].container=y,this.tweens.add({targets:y,y:F-8,duration:80,yoyo:!0,repeat:1,ease:"Quad.easeOut"})}const c=this.add.text(e,s-30,"„Çè„ÇìÔºÅ",{...w.body,fontSize:o?"18px":"16px",color:o?"#FFD700":"#FF6B8A",stroke:"#FFFFFF",strokeThickness:4}).setOrigin(.5).setScale(0);if(this.tweens.add({targets:c,scale:1.2,y:s-60,duration:150,ease:"Back.easeOut",onComplete:()=>{this.tweens.add({targets:c,alpha:0,y:s-80,scale:.8,duration:400,ease:"Cubic.easeIn",onComplete:()=>c.destroy()})}}),this.spawnConnectHearts(e,s,o),o){this.cameras.main.flash(300,255,215,0,!0);for(let h=0;h<12;h++){const u=h/12*Math.PI*2,g=this.add.text(e,s,"‚≠ê",{fontSize:"24px"}).setOrigin(.5).setScale(0);this.tweens.add({targets:g,x:e+Math.cos(u)*80,y:s+Math.sin(u)*80,scale:{from:0,to:1.5},alpha:{from:1,to:0},rotation:Math.PI*2,duration:700,delay:h*30,ease:"Cubic.easeOut",onComplete:()=>g.destroy()})}const d=this.add.text(e,s-70,"Lucky!",{...w.special,fontSize:"30px"}).setOrigin(.5).setScale(0);this.tweens.add({targets:d,scale:1.3,duration:200,ease:"Back.easeOut",onComplete:()=>{this.tweens.add({targets:d,alpha:0,y:s-100,scale:.8,duration:600,onComplete:()=>d.destroy()})}})}}spawnConnectHearts(t,n,e){const s=e?10:6,i=e?"üíõ":"‚ù§Ô∏è";for(let o=0;o<s;o++){const a=o/s*Math.PI*2-Math.PI/2,r=e?60:45,l=this.add.text(t,n,i,{fontSize:e?"20px":"16px"}).setOrigin(.5).setScale(0).setAlpha(0);this.tweens.add({targets:l,x:t+Math.cos(a)*r,y:n+Math.sin(a)*r-15,scale:{from:0,to:1.3},alpha:{from:0,to:1},duration:200,delay:o*25,ease:"Back.easeOut",onComplete:()=>{this.tweens.add({targets:l,y:l.y-20,alpha:0,scale:.5,duration:350,ease:"Cubic.easeIn",onComplete:()=>l.destroy()})}})}}findPairStartKey(t,n,e){for(let s=0;s<6;s++)for(let i=0;i<6;i++)if((s!==t||i!==n)&&this.grid[s][i].isEnd&&this.grid[s][i].type===e)return`${s},${i}`;return null}clearPath(t){this.paths[t].forEach(n=>{this.grid[n.row][n.col].isEnd||(this.grid[n.row][n.col].pathType=0)}),this.paths[t]=[],this.trails[t]=[],this.renderPaths()}resetLevel(){this.existingTypes.forEach(t=>this.clearPath(t));for(let t=0;t<6;t++)for(let n=0;n<6;n++)this.grid[t][n].isEnd||(this.grid[t][n].pathType=0);Object.keys(this.dogIcons).forEach(t=>{const[n,e]=t.split(",").map(Number),s=this.gridX+e*(this.cellSz+P.CELL_PADDING)+this.cellSz/2,i=this.gridY+n*(this.cellSz+P.CELL_PADDING)+this.cellSz/2,o=this.dogIcons[t];if(o){o.container.destroy();const a=z.draw(this,s,i,o.type,this.cellSz*.4,"neutral");this.dogCon.add(a),this.dogIcons[t].container=a}}),this.updateProgress(),this.renderPaths(),this.cameras.main.shake(100,.005)}showPawTrail(t,n){var i;const e=f.customize.pawColor&&((i=U[f.customize.pawColor])==null?void 0:i.color)||U.default.color,s=K.draw(this,t,n,e,20,.8);s.setRotation(C.Math.FloatBetween(-.3,.3)),this.tweens.add({targets:s,alpha:0,scale:.5,duration:800,onComplete:()=>s.destroy()})}showDog(t,n){this.showPawTrail(t,n)}hideDog(){}updateProgress(){var s;let t=0;for(let i=0;i<6;i++)for(let o=0;o<6;o++)this.grid[i][o].pathType>0&&t++;this.progContainer.removeAll(!0);const n=Math.floor(t/36*10),e=f.customize.pawColor&&((s=U[f.customize.pawColor])==null?void 0:s.color)||U.default.color;for(let i=0;i<n;i++){const o=K.draw(this,(i-4.5)*18,0,e,8);this.progContainer.add(o)}}pathComplete(t){const n=this.paths[t];if(!n||n.length<2)return!1;const e=[];for(let r=0;r<6;r++)for(let l=0;l<6;l++)this.grid[r][l].isEnd&&this.grid[r][l].type===t&&e.push({row:r,col:l});if(e.length!==2)return!1;const s=n[0],i=n[n.length-1],o=s.row===e[0].row&&s.col===e[0].col||s.row===e[1].row&&s.col===e[1].col,a=i.row===e[0].row&&i.col===e[0].col||i.row===e[1].row&&i.col===e[1].col;return o&&a&&(s.row!==i.row||s.col!==i.col)}checkClear(){for(const n of this.existingTypes)if(!this.pathComplete(n))return!1;for(let n=0;n<6;n++)for(let e=0;e<6;e++)if(this.grid[n][e].pathType===0)return!1;console.log("üéâ „ÇØ„É™„Ç¢ÔºÅ"),R.notification("Success"),T.updateStats(f,"clear"),this.mode==="challenge"&&T.updateStats(f,"challenge_clear"),this.hasGolden&&T.updateStats(f,"golden"),f.selectedDogs.forEach(n=>{T.updateStats(f,"dog_usage",n)}),$.updateProgress(f,"clear"),this.mode==="challenge"&&$.updateProgress(f,"challenge"),this.hasGolden&&$.updateProgress(f,"golden");const t=T.checkAchievements(f);return T.save(f),this.cameras.main.flash(200,255,255,200),this.time.delayedCall(600,()=>{this.mode==="challenge"?this.scene.start("ClearScene",{mode:"challenge",challengeScore:this.chalScore+1,hasGolden:this.hasGolden,newAchievements:t}):this.scene.start("ClearScene",{mode:"normal",levelIndex:this.lvIndex,hasGolden:this.hasGolden,newAchievements:t})}),!0}showConfirm(){const{width:t,height:n}=this.scale,e=this.add.rectangle(0,0,t,n,0,.5).setOrigin(0).setInteractive(),s=this.add.container(t/2,n/2),i=260,o=150,a=this.add.graphics();a.fillStyle(m.uiBg,1),a.fillRoundedRect(-i/2,-o/2,i,o,16),a.lineStyle(3,m.cellOutline,1),a.strokeRoundedRect(-i/2,-o/2,i,o,16);const r=this.add.text(0,-35,"„ÇÑ„ÇÅ„Åæ„Åô„ÅãÔºü",{...w.heading,fontSize:"20px"}).setOrigin(.5),l=this.add.container(-55,30),c=this.add.graphics();c.fillStyle(16739179,1),c.fillRoundedRect(-45,-22,90,44,10);const d=this.add.text(0,0,"„ÅØ„ÅÑ",{...w.button,fontSize:"18px"}).setOrigin(.5);l.add([c,d]),l.setSize(90,44).setInteractive({useHandCursor:!0});const h=this.add.container(55,30),u=this.add.graphics();u.fillStyle(8947848,1),u.fillRoundedRect(-45,-22,90,44,10);const g=this.add.text(0,0,"„ÅÑ„ÅÑ„Åà",{...w.button,fontSize:"18px"}).setOrigin(.5);h.add([u,g]),h.setSize(90,44).setInteractive({useHandCursor:!0}),s.add([a,r,l,h]),l.on("pointerdown",()=>this.tweens.add({targets:l,scale:.9,duration:50})),l.on("pointerup",()=>{this.tweens.add({targets:l,scale:1,duration:50}),this.cameras.main.fadeOut(200),this.time.delayedCall(200,()=>this.scene.start("TitleScene"))}),l.on("pointerout",()=>this.tweens.add({targets:l,scale:1,duration:50})),h.on("pointerdown",()=>this.tweens.add({targets:h,scale:.9,duration:50})),h.on("pointerup",()=>{this.tweens.add({targets:h,scale:1,duration:50}),e.destroy(),s.destroy()}),h.on("pointerout",()=>this.tweens.add({targets:h,scale:1,duration:50}))}}class jt extends C.Scene{constructor(){super({key:"ClearScene"})}init(t){this.mode=t.mode||"normal",this.lvIndex=t.levelIndex||0,this.chalScore=t.challengeScore||0}create(){const{width:t,height:n}=this.scale;this.cameras.main.flash(300,255,255,255),R.notification("Success"),this.add.rectangle(0,0,t,n,m.sky).setOrigin(0);const e=this.add.graphics();e.fillStyle(m.grass,1),e.fillRect(0,n*.6,t,n*.4),this.createConfetti(),this.createSparkles(),this.mode==="challenge"?this.createChallengeClear():this.createNormalClear()}createConfetti(){var o;const{width:t,height:n}=this.scale,e=f.selectedDogs,s=40,i=["rect","circle","star"];for(let a=0;a<s;a++){const r=C.Math.Between(10,t-10),l=e[C.Math.Between(0,e.length-1)],c=((o=v[l])==null?void 0:o.color)||16766720,d=i[C.Math.Between(0,i.length-1)],h=this.add.graphics();if(h.fillStyle(c,1),d==="rect"){const u=C.Math.Between(6,12),g=C.Math.Between(4,8);h.fillRect(-u/2,-g/2,u,g)}else if(d==="circle")h.fillCircle(0,0,C.Math.Between(3,6));else{const u=C.Math.Between(4,8);h.fillRect(-u/2,-1,u,2),h.fillRect(-1,-u/2,2,u)}h.x=r,h.y=-C.Math.Between(20,80),this.tweens.add({targets:h,y:n+30,x:r+C.Math.Between(-80,80),rotation:C.Math.Between(-8,8),duration:C.Math.Between(2e3,4e3),delay:C.Math.Between(0,800),ease:"Sine.easeInOut",onComplete:()=>h.destroy()})}}createSparkles(){const{width:t,height:n}=this.scale;for(let e=0;e<3;e++)this.time.delayedCall(e*1e3,()=>{for(let s=0;s<8;s++){const i=this.add.text(C.Math.Between(30,t-30),C.Math.Between(n*.1,n*.5),"‚ú®",{fontSize:C.Math.Between(12,20)+"px"}).setOrigin(.5).setAlpha(0);this.tweens.add({targets:i,alpha:{from:0,to:1},scale:{from:.5,to:1.2},duration:400,delay:s*80,yoyo:!0,onComplete:()=>i.destroy()})}})}createNormalClear(){const{width:t,height:n}=this.scale,e=f.selectedDogs;this.dogContainers=[];const s=n*.32;e.forEach((a,r)=>{const l=t*(.15+r*.235),c=z.draw(this,l,s,a,22,"excited");c.setScale(0),this.dogContainers.push(c),this.tweens.add({targets:c,scale:{from:0,to:1.2},duration:300,delay:r*120,ease:"Back.easeOut",onComplete:()=>{this.tweens.add({targets:c,scale:1,duration:150,ease:"Sine.easeOut"})}}),this.tweens.add({targets:c,y:s-12,duration:400+r*30,delay:600,yoyo:!0,repeat:-1,ease:"Quad.easeOut"}),this.time.delayedCall(400+r*120,()=>{const d=this.add.text(l,s-25,"‚ô•",{fontSize:"14px",color:"#FF6B8A"}).setOrigin(.5).setScale(0);this.tweens.add({targets:d,y:s-45,scale:{from:0,to:1},alpha:{from:1,to:0},duration:600,ease:"Cubic.easeOut",onComplete:()=>d.destroy()})})});for(let a=0;a<3;a++)this.time.delayedCall(500+a*150,()=>{const r=this.add.text(t/2+(a-1)*55,n*.15,"‚ù§Ô∏è",{fontSize:"40px"}).setOrigin(.5).setScale(0);this.tweens.add({targets:r,scale:{from:0,to:1.3},duration:250,ease:"Back.easeOut",onComplete:()=>{this.tweens.add({targets:r,scale:1,duration:150}),this.tweens.add({targets:r,y:r.y-8,duration:800+a*100,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"})}})});const i=this.add.text(t/2,n*.5,"„ÇÑ„Å£„Åü„ÉºÔºÅ",{...w.title,fontSize:"40px"}).setOrigin(.5).setScale(0);this.tweens.add({targets:i,scale:{from:0,to:1.15},duration:350,delay:300,ease:"Back.easeOut",onComplete:()=>{this.tweens.add({targets:i,scale:1,duration:150})}});const o=this.add.text(t/2,n*.59,"„Åä„Åï„Çì„ÅΩ „Åü„ÅÆ„Åó„Åã„Å£„Åü„Å≠ÔºÅ",{...w.section,fontSize:"16px"}).setOrigin(.5).setAlpha(0);this.tweens.add({targets:o,alpha:1,y:o.y-5,duration:400,delay:600,ease:"Cubic.easeOut"}),this.time.delayedCall(700,()=>{const a=ot.createShareButton(this,t/2,n*.7,"normal",this.lvIndex);a.setScale(0),this.tweens.add({targets:a,scale:1,duration:300,ease:"Back.easeOut"});const r=this.createButton(t/2,n*.82,"„Å§„Åé„Å∏ÔºÅ",v[2].color,()=>{R.impact("Light"),this.cameras.main.fadeOut(200),this.time.delayedCall(200,()=>{this.scene.start("GameScene",{mode:"normal",levelIndex:(this.lvIndex+1)%B.length})})});r.setScale(0),this.tweens.add({targets:r,scale:1,duration:300,delay:80,ease:"Back.easeOut"})})}createChallengeClear(){const{width:t,height:n}=this.scale,e=f.selectedDogs,s=this.add.text(t/2,n*.25,this.chalScore.toString(),{...w.score,fontSize:"72px"}).setOrigin(.5).setScale(0);this.tweens.add({targets:s,scale:1,duration:400,ease:"Back.easeOut"});const i=n*.48;e.forEach((a,r)=>{const l=t*(.15+r*.235),c=z.draw(this,l,i,a,18,"excited");this.tweens.add({targets:c,y:i-5,duration:400+r*40,yoyo:!0,repeat:-1,ease:"Sine.easeInOut",delay:r*80})}),this.add.text(t/2,n*.62,"„Å§„Åé„ÅÆ„Çπ„ÉÜ„Éº„Ç∏„Å∏ÔºÅ",{...w.heading,fontSize:"18px"}).setOrigin(.5);const o=ot.createShareButton(this,t/2,n*.75,"challenge",this.chalScore);o.setScale(.8),o.setAlpha(.85),this.time.delayedCall(1800,()=>{this.scene.start("GameScene",{mode:"challenge",challengeScore:this.chalScore})})}createButton(t,n,e,s,i){const o=this.add.container(t,n),a=this.add.graphics();a.fillStyle(s,1),a.fillRoundedRect(-70,-20,140,40,8),a.lineStyle(2,m.cellOutline,1),a.strokeRoundedRect(-70,-20,140,40,8);const r=this.add.text(0,0,e,{fontSize:"18px",fontStyle:"bold",color:m.textLight}).setOrigin(.5);return o.add([a,r]),o.setSize(140,40),o.setInteractive({useHandCursor:!0}),o.on("pointerup",i),o}}class Xt extends C.Scene{constructor(){super({key:"GameOverScene"})}init(t){this.score=t.score||0,T.updateStats(f,"challenge_reset")}create(){const{width:t,height:n}=this.scale,e=f.selectedDogs;this.add.rectangle(0,0,t,n,4871528,.95).setOrigin(0);const s=n*.22;e.forEach((c,d)=>{const h=t*(.15+d*.235),u=z.draw(this,h,s,c,18,"sad");this.tweens.add({targets:u,y:s-5,duration:600+d*50,yoyo:!0,repeat:-1,ease:"Sine.easeInOut",delay:d*100})});const i=this.add.text(t/2,n*.38,"„Åä„Åó„Åã„Å£„Åü„Å≠ÔºÅ",{...w.heading,fontSize:"28px",color:"#FFFFFF",stroke:"#00000066",strokeThickness:4}).setOrigin(.5).setScale(0);this.tweens.add({targets:i,scale:1,duration:400,ease:"Back.easeOut"}),this.add.text(t/2,n*.48,"„Åä„Åï„Çì„ÅΩ„Åß„Åç„Åü„Åã„Åö",{...w.small,fontSize:"13px",color:"#CCCCCC"}).setOrigin(.5);const o=this.add.text(t/2,n*.56,this.score.toString(),{...w.score,fontSize:"56px"}).setOrigin(.5).setScale(0);this.tweens.add({targets:o,scale:1,duration:400,delay:200,ease:"Back.easeOut"});const a=f.stats.challengeHighScore||0,r=this.score>a;if(r){const c=this.add.text(t/2,n*.68,"üéâ „ÅÇ„Åü„Çâ„Åó„ÅÑ„Åç„Çç„ÅèÔºÅ",{fontSize:"20px",fontFamily:"KeiFont, sans-serif",color:"#FFD700",stroke:"#000000",strokeThickness:3}).setOrigin(.5).setScale(0);this.tweens.add({targets:c,scale:1.1,duration:400,delay:400,ease:"Back.easeOut",yoyo:!0,repeat:2}),R.notification("Success")}else this.add.text(t/2,n*.68,"„Å§„Åé„ÅØ„ÇÇ„Å£„Å®„ÅÑ„Åë„Çã„ÇàÔºÅ",{fontSize:"14px",fontFamily:"KeiFont, sans-serif",color:"#AAAAAA"}).setOrigin(.5);this.add.text(t/2,n*.76,`üèÜ „Éô„Çπ„Éà: ${Math.max(a,this.score)}`,{fontSize:"15px",fontFamily:"KeiFont, sans-serif",color:"#FFD700"}).setOrigin(.5),this.time.delayedCall(300,()=>{const c=ot.createShareButton(this,t/2,n*.84,"gameover",this.score,r);c.setScale(0),this.tweens.add({targets:c,scale:1,duration:300,ease:"Back.easeOut"})}),this.time.delayedCall(400,()=>{const c=this.createButton(t/2,n*.92,"„ÇÇ„ÅÜ„ÅÑ„Å£„Åã„ÅÑÔºÅ",v[1].color,()=>{R.impact("Light"),this.cameras.main.fadeOut(200),this.time.delayedCall(200,()=>{this.scene.start("GameScene",{mode:"challenge"})})});c.setScale(0),this.tweens.add({targets:c,scale:1,duration:300,ease:"Back.easeOut",onComplete:()=>{this.tweens.add({targets:c,scale:1.05,duration:500,yoyo:!0,repeat:2,ease:"Sine.easeInOut"})}})}),this.add.text(t/2,n-x.BOTTOM-20,"„Çø„Ç§„Éà„É´„Å∏",{fontSize:"12px",fontFamily:"KeiFont, sans-serif",color:"#888888"}).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerup",()=>{this.cameras.main.fadeOut(200),this.time.delayedCall(200,()=>this.scene.start("TitleScene"))})}createButton(t,n,e,s,i){const o=this.add.container(t,n),a=150,r=48,l=this.add.graphics();l.fillStyle(s,1),l.fillRoundedRect(-a/2,-r/2,a,r,12),l.lineStyle(2,16777215,.5),l.strokeRoundedRect(-a/2,-r/2,a,r,12);const c=this.add.text(0,0,e,{...w.button,fontSize:"18px"}).setOrigin(.5);return o.add([l,c]),o.setSize(a,r),o.setInteractive({useHandCursor:!0}),o.on("pointerdown",()=>{this.tweens.add({targets:o,scale:.92,duration:40}),R.impact("Light")}),o.on("pointerup",()=>{this.tweens.add({targets:o,scale:1.05,duration:80,yoyo:!0}),i()}),o.on("pointerout",()=>{this.tweens.add({targets:o,scale:1,duration:80})}),o}}class qt extends C.Scene{constructor(){super({key:"ShopScene"})}create(){const{width:t,height:n}=this.scale,e=this.add.graphics();e.fillGradientStyle(16775393,16775393,16769154,16769154,1),e.fillRect(0,0,t,n),this.createHeader(),this.createProducts(),this.cameras.main.fadeIn(300)}createHeader(){const{width:t}=this.scale,n=x.TOP,e=this.add.graphics();e.setScrollFactor(0),e.setDepth(100),e.fillStyle(16776693,1),e.fillRect(0,0,t,n+65),e.fillStyle(0,.1),e.fillRect(0,n+62,t,4);const s=this.add.text(18,n+32,"‚Üê „ÇÇ„Å©„Çã",{fontFamily:"KeiFont, sans-serif",fontSize:"18px",color:"#5D4037",fontStyle:"bold"}).setOrigin(0,.5).setInteractive({useHandCursor:!0});s.setDepth(101),s.on("pointerdown",()=>this.tweens.add({targets:s,scale:.92,duration:50})),s.on("pointerup",()=>{this.tweens.add({targets:s,scale:1,duration:100,ease:"Back.easeOut"}),this.cameras.main.fadeOut(300),this.time.delayedCall(300,()=>this.scene.start("TitleScene"))}),s.on("pointerout",()=>this.tweens.add({targets:s,scale:1,duration:80})),this.add.text(t/2,n+32,"üõí „Ç∑„Éß„ÉÉ„Éó",{fontFamily:"KeiFont, sans-serif",fontSize:"26px",color:"#FF8F00",fontStyle:"bold"}).setOrigin(.5).setDepth(101)}createProducts(){const{width:t,height:n}=this.scale,e=x.TOP+90,s=115,i=16;Object.values(Gt).forEach((a,r)=>{const l=e+r*(s+i);this.createProductCard(t/2,l,a)})}createProductCard(t,n,e){var u,g;const{width:s}=this.scale,i=s-36,o=105,a=((u=f.purchases)==null?void 0:u[e.id])||((g=f.purchases)==null?void 0:g.deluxe),r=this.add.container(t,n),l=this.add.graphics();a?(l.fillStyle(15790320,1),l.fillRoundedRect(-i/2,0,i,o,16)):e.isBest?(l.fillStyle(16766720,.2),l.fillRoundedRect(-i/2-4,-4,i+8,o+8,18),l.fillStyle(16777215,1),l.fillRoundedRect(-i/2,0,i,o,16),l.lineStyle(4,16766720,1),l.strokeRoundedRect(-i/2,0,i,o,16)):(l.fillStyle(16777215,1),l.fillRoundedRect(-i/2,0,i,o,16),l.lineStyle(2,14737632,1),l.strokeRoundedRect(-i/2,0,i,o,16)),r.add(l);const c=this.add.text(-i/2+35,o/2,e.icon,{fontSize:"42px"}).setOrigin(.5);r.add(c);const d=this.add.text(-i/2+75,18,e.name,{fontFamily:"KeiFont, sans-serif",fontSize:"20px",color:a?"#999999":"#5D4037",fontStyle:"bold"}).setOrigin(0,0);r.add(d);const h=this.add.text(-i/2+75,45,e.description,{fontFamily:"KeiFont, sans-serif",fontSize:"12px",color:"#666666",wordWrap:{width:i-160},lineSpacing:2}).setOrigin(0,0);if(r.add(h),a){const F=this.add.text(i/2-20,o/2,"‚úì Ë≥ºÂÖ•„Åö„Åø",{fontFamily:"KeiFont, sans-serif",fontSize:"16px",color:"#4CAF50",fontStyle:"bold"}).setOrigin(1,.5);r.add(F)}else{const F=`¬•${e.price}`,y=this.add.graphics();y.fillStyle(e.color,1),y.fillRoundedRect(i/2-85,o/2-18,75,36,10),r.add(y);const S=this.add.text(i/2-47,o/2,F,{fontFamily:"KeiFont, sans-serif",fontSize:"16px",color:"#FFFFFF",fontStyle:"bold"}).setOrigin(.5);r.add(S)}r.setSize(i,o),a||(r.setInteractive({useHandCursor:!0}),r.on("pointerdown",()=>{this.tweens.add({targets:r,scale:.95,duration:40}),R.impact("Light")}),r.on("pointerup",()=>{this.tweens.add({targets:r,scale:1.02,duration:80,yoyo:!0}),this.processPurchase(e)}),r.on("pointerout",()=>this.tweens.add({targets:r,scale:1,duration:80})))}processPurchase(t){R.notification("Success"),f.purchases[t.id]=!0,t.id==="deluxe"&&(f.purchases.adFree=!0,f.purchases.allDogs=!0,f.purchases.allCustomize=!0),T.save(f),this.showPurchaseSuccess(t)}showPurchaseSuccess(t){const{width:n,height:e}=this.scale;for(let i=0;i<20;i++){const o=C.Math.Between(50,n-50),a=e/2,r=this.add.text(o,a,"‚ú®",{fontSize:"24px"}).setAlpha(0);this.tweens.add({targets:r,y:a-C.Math.Between(50,150),alpha:{from:1,to:0},scale:{from:1,to:0},duration:1e3,delay:i*50,onComplete:()=>r.destroy()})}const s=this.add.text(n/2,e/2,`${t.name}
Ë≥ºÂÖ•ÂÆå‰∫ÜÔºÅ`,{...w.success,align:"center",stroke:"#FFFFFF",strokeThickness:4}).setOrigin(.5).setScale(0);this.tweens.add({targets:s,scale:1,duration:400,ease:"Back.easeOut",onComplete:()=>{this.time.delayedCall(1500,()=>{s.destroy(),this.scene.restart()})}})}}class Vt extends C.Scene{constructor(){super({key:"SettingsScene"})}create(){const{width:t,height:n}=this.scale;this.add.rectangle(0,0,t,n,m.sky).setOrigin(0),this.createHeader(),this.createSettings(),this.cameras.main.fadeIn(300)}createHeader(){const{width:t}=this.scale,n=x.TOP,e=this.add.graphics();e.setScrollFactor(0),e.setDepth(100),e.fillStyle(m.uiBg,1),e.fillRect(0,0,t,n+65),e.fillStyle(0,.1),e.fillRect(0,n+62,t,4);const s=this.add.text(18,n+32,"‚Üê „ÇÇ„Å©„Çã",{fontFamily:"KeiFont, sans-serif",fontSize:"18px",color:"#5D4037",fontStyle:"bold"}).setOrigin(0,.5).setInteractive({useHandCursor:!0});s.setDepth(101),s.on("pointerdown",()=>this.tweens.add({targets:s,scale:.92,duration:50})),s.on("pointerup",()=>{this.tweens.add({targets:s,scale:1,duration:100,ease:"Back.easeOut"}),this.cameras.main.fadeOut(300),this.time.delayedCall(300,()=>this.scene.start("TitleScene"))}),s.on("pointerout",()=>this.tweens.add({targets:s,scale:1,duration:80})),this.add.text(t/2,n+32,"‚öôÔ∏è „Åõ„Å£„Å¶„ÅÑ",{fontFamily:"KeiFont, sans-serif",fontSize:"26px",color:"#607D8B",fontStyle:"bold"}).setOrigin(.5).setDepth(101)}createSettings(){const{width:t,height:n}=this.scale,e=x.TOP+100,s=this.add.graphics();s.fillStyle(9479342,.25),s.fillRoundedRect(18,e-15,t-32,175,16),s.fillStyle(16448250,.98),s.fillRoundedRect(15,e-20,t-30,175,16),s.fillStyle(6323595,.5),s.fillRoundedRect(15,e-20,t-30,5,{tl:16,tr:16,bl:0,br:0}),this.createToggle(t/2,e+25,"üéµ BGM",f.settings.bgmEnabled,a=>{f.settings.bgmEnabled=a,T.save(f)}),this.createToggle(t/2,e+100,"üîä SE",f.settings.seEnabled,a=>{f.settings.seEnabled=a,T.save(f)});const i=e+200,o=this.add.graphics();o.fillStyle(9479342,.25),o.fillRoundedRect(18,i-15,t-32,145,16),o.fillStyle(16448250,.98),o.fillRoundedRect(15,i-20,t-30,145,16),o.fillStyle(5227511,.5),o.fillRoundedRect(15,i-20,t-30,5,{tl:16,tr:16,bl:0,br:0}),this.createLinkButton(t/2,i+20,"üîÑ Ë≥ºÂÖ•„ÇíÂæ©ÂÖÉ",()=>{this.onRestorePurchases()}),this.createLinkButton(t/2,i+80,"üìÑ „Éó„É©„Ç§„Éê„Ç∑„Éº„Éù„É™„Ç∑„Éº",()=>{this.onPrivacyPolicy()}),this.createButton(t/2,n-x.BOTTOM-80,"üóëÔ∏è „Éá„Éº„Çø„Çí„É™„Çª„ÉÉ„Éà",16739179,()=>{this.showResetConfirm()})}createLinkButton(t,n,e,s){const{width:i}=this.scale,o=i-70,a=this.add.container(t,n),r=this.add.graphics();r.fillStyle(16777215,1),r.fillRoundedRect(-o/2,-24,o,48,12),r.lineStyle(2,14737632,1),r.strokeRoundedRect(-o/2,-24,o,48,12);const l=this.add.text(0,0,e,{fontFamily:"KeiFont, sans-serif",fontSize:"18px",color:"#5D4037"}).setOrigin(.5),c=this.add.text(o/2-20,0,"‚Ä∫",{fontFamily:"KeiFont, sans-serif",fontSize:"24px",color:"#9E9E9E"}).setOrigin(.5);return a.add([r,l,c]),a.setSize(o,48),a.setInteractive({useHandCursor:!0}),a.on("pointerdown",()=>{this.tweens.add({targets:a,scale:.97,duration:50}),r.clear(),r.fillStyle(16119285,1),r.fillRoundedRect(-o/2,-24,o,48,12),r.lineStyle(2,14737632,1),r.strokeRoundedRect(-o/2,-24,o,48,12)}),a.on("pointerup",()=>{this.tweens.add({targets:a,scale:1,duration:100,ease:"Back.easeOut"}),r.clear(),r.fillStyle(16777215,1),r.fillRoundedRect(-o/2,-24,o,48,12),r.lineStyle(2,14737632,1),r.strokeRoundedRect(-o/2,-24,o,48,12),s()}),a.on("pointerout",()=>{this.tweens.add({targets:a,scale:1,duration:80}),r.clear(),r.fillStyle(16777215,1),r.fillRoundedRect(-o/2,-24,o,48,12),r.lineStyle(2,14737632,1),r.strokeRoundedRect(-o/2,-24,o,48,12)}),a}onRestorePurchases(){this.showToast("Ë≥ºÂÖ•„ÅÆÂæ©ÂÖÉ„ÇíÂÆüË°å„Åó„Åæ„Åó„Åü"),console.log("üîÑ Ë≥ºÂÖ•„ÇíÂæ©ÂÖÉ„Åå„Çø„ÉÉ„Éó„Åï„Çå„Åæ„Åó„ÅüÔºàÊú™ÂÆüË£ÖÔºâ")}onPrivacyPolicy(){window.open("https://example.com/privacy-policy","_blank"),console.log("üìÑ „Éó„É©„Ç§„Éê„Ç∑„Éº„Éù„É™„Ç∑„Éº„Åå„Çø„ÉÉ„Éó„Åï„Çå„Åæ„Åó„Åü")}showToast(t){const{width:n,height:e}=this.scale,s=this.add.container(n/2,e-x.BOTTOM-150);s.setAlpha(0);const i=this.add.graphics();i.fillStyle(3355443,.9),i.fillRoundedRect(-120,-20,240,40,20);const o=this.add.text(0,0,t,{fontFamily:"KeiFont, sans-serif",fontSize:"14px",color:"#FFFFFF"}).setOrigin(.5);s.add([i,o]),this.tweens.add({targets:s,alpha:1,y:s.y-10,duration:200,ease:"Back.easeOut",onComplete:()=>{this.time.delayedCall(1500,()=>{this.tweens.add({targets:s,alpha:0,y:s.y+10,duration:200,onComplete:()=>s.destroy()})})}})}createToggle(t,n,e,s,i){const{width:o}=this.scale,a=o-70,r=this.add.container(t,n),l=this.add.graphics();l.fillStyle(16777215,1),l.fillRoundedRect(-a/2,-28,a,56,14),l.lineStyle(2,14737632,1),l.strokeRoundedRect(-a/2,-28,a,56,14);const c=this.add.text(-a/2+22,0,e,{fontFamily:"KeiFont, sans-serif",fontSize:"20px",color:"#5D4037",fontStyle:"bold"}).setOrigin(0,.5);let d=s;const h=this.add.graphics(),u=this.add.graphics(),g=()=>{h.clear(),h.fillStyle(d?5025616:12434877,1),h.fillRoundedRect(a/2-75,-16,55,32,16),u.clear(),u.fillStyle(16777215,1),u.fillCircle(d?a/2-34:a/2-61,0,13),u.lineStyle(1,34,1),u.strokeCircle(d?a/2-34:a/2-61,0,13)};g(),r.add([l,c,h,u]),r.setSize(a,56),r.setInteractive({useHandCursor:!0}),r.on("pointerdown",()=>this.tweens.add({targets:r,scale:.96,duration:50})),r.on("pointerup",()=>{this.tweens.add({targets:r,scale:1,duration:100,ease:"Back.easeOut"}),d=!d,g(),i(d)}),r.on("pointerout",()=>this.tweens.add({targets:r,scale:1,duration:80}))}createButton(t,n,e,s,i){const o=this.add.container(t,n),a=this.add.graphics();a.fillStyle(s,1),a.fillRoundedRect(-110,-25,220,50,14);const r=this.add.text(0,0,e,{fontFamily:"KeiFont, sans-serif",fontSize:"18px",color:"#FFFFFF",fontStyle:"bold"}).setOrigin(.5);o.add([a,r]),o.setSize(220,50),o.setInteractive({useHandCursor:!0}),o.on("pointerdown",()=>this.tweens.add({targets:o,scale:.94,duration:50})),o.on("pointerup",()=>{this.tweens.add({targets:o,scale:1,duration:100,ease:"Back.easeOut"}),i()}),o.on("pointerout",()=>this.tweens.add({targets:o,scale:1,duration:80}))}showResetConfirm(){const{width:t,height:n}=this.scale,e=this.add.rectangle(0,0,t,n,0,.5).setOrigin(0),s=this.add.container(t/2,n/2),i=this.add.graphics();i.fillStyle(16777215,1),i.fillRoundedRect(-130,-80,260,160,16);const o=this.add.text(0,-50,"‚ö†Ô∏è Á¢∫Ë™ç",{fontFamily:"KeiFont, sans-serif",fontSize:"22px",color:"#5D4037",fontStyle:"bold"}).setOrigin(.5),a=this.add.text(0,-5,`„Åô„Åπ„Å¶„ÅÆ„Éá„Éº„Çø„Çí
„É™„Çª„ÉÉ„Éà„Åó„Åæ„Åô„ÅãÔºü`,{fontFamily:"KeiFont, sans-serif",fontSize:"16px",color:"#5D4037",align:"center",lineSpacing:4}).setOrigin(.5),r=this.add.text(-50,55,"„ÅØ„ÅÑ",{fontFamily:"KeiFont, sans-serif",fontSize:"18px",color:"#FF6B6B",fontStyle:"bold"}).setOrigin(.5).setInteractive({useHandCursor:!0}),l=this.add.text(50,55,"„ÅÑ„ÅÑ„Åà",{fontFamily:"KeiFont, sans-serif",fontSize:"18px",color:"#4CAF50",fontStyle:"bold"}).setOrigin(.5).setInteractive({useHandCursor:!0});r.on("pointerdown",()=>this.tweens.add({targets:r,scale:.9,duration:50})),r.on("pointerup",()=>{localStorage.removeItem(T.STORAGE_KEY),f=T.getDefaultData(),this.scene.start("TitleScene")}),r.on("pointerout",()=>this.tweens.add({targets:r,scale:1,duration:80})),l.on("pointerdown",()=>this.tweens.add({targets:l,scale:.9,duration:50})),l.on("pointerup",()=>{this.tweens.add({targets:l,scale:1,duration:80}),e.destroy(),s.destroy()}),l.on("pointerout",()=>this.tweens.add({targets:l,scale:1,duration:80})),s.add([i,o,a,r,l])}}class Jt extends C.Scene{constructor(){super({key:"CustomizeScene"})}create(){const{width:t,height:n}=this.scale;this.add.rectangle(0,0,t,n*2,m.sky).setOrigin(0),this.createHeader(),this.createPawColors(),this.createCostumes(),this.createThemes(),this.cameras.main.setBounds(0,0,t,n*1.8),this.input.on("pointermove",e=>{e.isDown&&(this.cameras.main.scrollY-=e.velocity.y*.03,this.cameras.main.scrollY=C.Math.Clamp(this.cameras.main.scrollY,0,n*.72))}),this.cameras.main.fadeIn(300)}createHeader(){const{width:t}=this.scale,n=x.TOP,e=this.add.graphics();e.setScrollFactor(0),e.setDepth(100),e.fillStyle(m.uiBg,1),e.fillRect(0,0,t,n+65),e.fillStyle(0,.1),e.fillRect(0,n+62,t,4);const s=this.add.text(18,n+32,"‚Üê „ÇÇ„Å©„Çã",{fontFamily:"KeiFont, sans-serif",fontSize:"18px",color:"#5D4037",fontStyle:"bold"}).setOrigin(0,.5).setInteractive({useHandCursor:!0});s.setScrollFactor(0),s.setDepth(101),s.on("pointerdown",()=>this.tweens.add({targets:s,scale:.92,duration:50})),s.on("pointerup",()=>{this.tweens.add({targets:s,scale:1,duration:100,ease:"Back.easeOut"}),this.cameras.main.fadeOut(300),this.time.delayedCall(300,()=>this.scene.start("TitleScene"))}),s.on("pointerout",()=>this.tweens.add({targets:s,scale:1,duration:80}));const i=this.add.text(t/2,n+32,"üé® „Ç´„Çπ„Çø„Éû„Ç§„Ç∫",{fontFamily:"KeiFont, sans-serif",fontSize:"26px",color:"#FF69B4",fontStyle:"bold"}).setOrigin(.5);i.setScrollFactor(0),i.setDepth(101)}createPawColors(){const{width:t}=this.scale,n=x.TOP+75,e=this.add.graphics();e.fillStyle(13936037,.3),e.fillRoundedRect(18,n-5,t-32,130,18),e.fillStyle(16775669,.98),e.fillRoundedRect(15,n-10,t-30,130,18),e.fillStyle(16758465,.6),e.fillRoundedRect(15,n-10,t-30,6,{tl:18,tr:18,bl:0,br:0}),this.add.text(t/2,n+14,"üêæ „Å´„Åè„Åç„ÇÖ„ÅÜ„Ç´„É©„Éº",{fontFamily:"KeiFont, sans-serif",fontSize:"22px",color:"#5D4037",fontStyle:"bold"}).setOrigin(.5);const s=Object.entries(U),i=5,o=58,a=12,r=i*o+(i-1)*a,l=(t-r)/2+o/2;s.forEach(([c,d],h)=>{const u=l+h%i*(o+a),g=n+78;this.createColorOption(u,g,c,d)})}createColorOption(t,n,e,s){const i=this.checkUnlock(s.unlockCondition),o=f.customize.pawColor===e||!f.customize.pawColor&&e==="default",a=this.add.container(t,n),r=27,l=this.add.graphics();if(o)l.fillStyle(16766720,.25),l.fillCircle(0,0,r+8),l.fillStyle(16775910,1),l.fillCircle(0,0,r),l.lineStyle(5,16766720,1),l.strokeCircle(0,0,r+1);else if(i){l.fillStyle(16777215,1),l.fillCircle(0,0,r);const c=s.color==="rainbow"?16738740:s.color;l.lineStyle(2.5,c,.7),l.strokeCircle(0,0,r)}else l.fillStyle(15263976,1),l.fillCircle(0,0,r),l.lineStyle(1.5,13421772,.5),l.strokeCircle(0,0,r);if(a.add(l),i){const c=s.color==="rainbow"?16738740:s.color,d=K.draw(this,0,0,c,21);d.setAlpha(1),a.add(d)}else{const c=this.add.text(0,0,"üîí",{fontSize:"20px"}).setOrigin(.5);c.setAlpha(.7),a.add(c)}if(o){const c=this.add.text(r-2,-r+2,"‚úì",{fontSize:"14px",fontStyle:"bold",backgroundColor:"#4CAF50",padding:{x:4,y:2},color:"#FFFFFF"}).setOrigin(.5);a.add(c)}a.setSize(r*2+12,r*2+12),a.setInteractive({useHandCursor:!0}),a.on("pointerdown",()=>this.tweens.add({targets:a,scale:.9,duration:50})),a.on("pointerup",()=>{this.tweens.add({targets:a,scale:1,duration:100,ease:"Back.easeOut"}),i?(f.customize.pawColor=e,T.save(f),this.scene.restart()):this.showUnlockCondition(s)}),a.on("pointerout",()=>this.tweens.add({targets:a,scale:1,duration:80}))}createCostumes(){var d;const{width:t}=this.scale,n=x.TOP+220,e=this.add.graphics();e.fillStyle(15250616,.3),e.fillRoundedRect(18,n-5,t-32,265,18),e.fillStyle(16774647,.98),e.fillRoundedRect(15,n-10,t-30,265,18),e.fillStyle(16738740,.4),e.fillRoundedRect(15,n-10,t-30,6,{tl:18,tr:18,bl:0,br:0});const s=((d=f.rewards)==null?void 0:d.medals)||0;this.add.text(t/2,n+14,`üéÄ „Çè„Çì„Åì„ÅÆ„Åç„Åõ„Åã„Åà  üèÖ${s}`,{fontFamily:"KeiFont, sans-serif",fontSize:"20px",color:"#5D4037",fontStyle:"bold"}).setOrigin(.5);const i=Object.entries(ut),o=4,a=68,r=8,l=o*a+(o-1)*r,c=(t-l)/2+a/2;i.forEach(([h,u],g)=>{const F=c+g%o*(a+r),y=n+65+Math.floor(g/o)*(a+38);this.createCostumeOption(F,y,h,u)})}createCostumeOption(t,n,e,s){const i=this.checkUnlock(s.unlockCondition),a=(f.customize.equippedCostumes||[]).includes(e),r=this.add.container(t,n),l=68,c=this.add.graphics();if(a?(c.fillStyle(16766720,.2),c.fillRoundedRect(-l/2-6,-l/2-6,l+12,l+12,16),c.fillStyle(16775910,1),c.fillRoundedRect(-l/2,-l/2,l,l,14),c.lineStyle(4,16766720,1),c.strokeRoundedRect(-l/2,-l/2,l,l,14)):i?(c.fillStyle(16777215,1),c.fillRoundedRect(-l/2,-l/2,l,l,14),c.lineStyle(2,14737632,1),c.strokeRoundedRect(-l/2,-l/2,l,l,14)):(c.fillStyle(15790320,1),c.fillRoundedRect(-l/2,-l/2,l,l,14),c.lineStyle(1.5,13421772,.6),c.strokeRoundedRect(-l/2,-l/2,l,l,14)),r.add(c),i){const u=this.add.text(0,0,s.icon,{fontSize:"34px"}).setOrigin(.5);r.add(u)}else{const u=this.add.text(0,0,"üîí",{fontSize:"24px"}).setOrigin(.5);u.setAlpha(.6),r.add(u)}const d=i?"#5D4037":"#AAAAAA",h=this.add.text(0,l/2+14,s.name,{fontFamily:"KeiFont, sans-serif",fontSize:"12px",color:d}).setOrigin(.5);if(r.add(h),a){const u=this.add.text(l/2-4,-l/2+4,"‚úì",{fontSize:"14px",fontStyle:"bold",backgroundColor:"#4CAF50",padding:{x:4,y:2},color:"#FFFFFF"}).setOrigin(.5);r.add(u)}r.setSize(l+10,l+10),r.setInteractive({useHandCursor:!0}),r.on("pointerdown",()=>this.tweens.add({targets:r,scale:.92,duration:40})),r.on("pointerup",()=>{this.tweens.add({targets:r,scale:1,duration:80,ease:"Back.easeOut"}),i?(f.customize.equippedCostumes||(f.customize.equippedCostumes=[]),a?f.customize.equippedCostumes=[]:f.customize.equippedCostumes=[e],T.save(f),this.scene.restart()):this.showCostumeUnlockCondition(s)}),r.on("pointerout",()=>this.tweens.add({targets:r,scale:1,duration:80}))}showCostumeUnlockCondition(t){var h,u;const{width:n,height:e}=this.scale,s=this.add.rectangle(0,0,n,e*2,0,.5).setOrigin(0),i=this.add.container(n/2,e/2+this.cameras.main.scrollY),o=this.add.graphics();o.fillStyle(16777215,1),o.fillRoundedRect(-130,-80,260,160,12),i.add(o);const a=this.add.text(0,-45,t.icon,{fontSize:"32px"}).setOrigin(.5);i.add(a);const r=this.add.text(0,-10,`üîí ${t.name}`,{...w.body,fontSize:"14px",fontStyle:"bold"}).setOrigin(.5);i.add(r);let l="";if(t.unlockCondition.startsWith("medals_")){const g=t.unlockCondition.split("_")[1],F=((h=f.rewards)==null?void 0:h.medals)||0;l=`„Åä„Åï„Çì„ÅΩ„É°„ÉÄ„É´ ${g}Êûö„ÅßËß£Êîæ
ÔºàÁèæÂú®: ${F}ÊûöÔºâ`}else if(t.unlockCondition.startsWith("stamp_complete_")){const g=t.unlockCondition.split("_")[2],F=((u=f.rewards)==null?void 0:u.totalWeeklyComplete)||0;l=`ÈÄ±Èñì„Çπ„Çø„É≥„Éó ${g}Âõû„Ç≥„É≥„Éó„ÅßËß£Êîæ
ÔºàÁèæÂú®: ${F}ÂõûÔºâ`}const c=this.add.text(0,25,l,{fontSize:"12px",color:"#666666",align:"center",lineSpacing:4}).setOrigin(.5);i.add(c);const d=this.add.text(0,60,"„Å®„Åò„Çã",{...w.body,fontSize:"14px",backgroundColor:"#4CAF50",padding:{x:20,y:6},color:"#FFFFFF"}).setOrigin(.5).setInteractive({useHandCursor:!0});i.add(d),d.on("pointerup",()=>{i.destroy(),s.destroy()}),s.setInteractive(),s.on("pointerup",()=>{i.destroy(),s.destroy()}),i.setScale(.8),i.setAlpha(0),this.tweens.add({targets:i,scale:1,alpha:1,duration:150,ease:"Back.easeOut"})}createThemes(){const{width:t,height:n}=this.scale,e=x.TOP+505,s=this.add.graphics();s.fillStyle(8371928,.25),s.fillRoundedRect(18,e-5,t-32,365,18),s.fillStyle(16120831,.98),s.fillRoundedRect(15,e-10,t-30,365,18),s.fillStyle(8900331,.5),s.fillRoundedRect(15,e-10,t-30,6,{tl:18,tr:18,bl:0,br:0}),this.add.text(t/2,e+14,"üåç „Åõ„Åã„ÅÑ„ÅÆ„ÉÜ„Éº„Éû",{fontFamily:"KeiFont, sans-serif",fontSize:"22px",color:"#5D4037",fontStyle:"bold"}).setOrigin(.5);const i=Object.entries(J),o=3,a=95,r=12,l=o*a+(o-1)*r,c=(t-l)/2+a/2;i.forEach(([d,h],u)=>{const g=c+u%o*(a+r),F=e+70+Math.floor(u/o)*(a+22);this.createThemeOption(g,F,d,h)})}createThemeOption(t,n,e,s){const i=this.checkUnlock(s.unlockCondition),o=f.customize.theme===e,a=this.add.container(t,n),r=76,l=this.add.graphics();o&&(l.fillStyle(16766720,.25),l.fillRoundedRect(-r/2-6,-r/2-6,r+12,r+12,16)),i?l.fillGradientStyle(s.sky,s.sky,s.ground,s.ground,1):l.fillStyle(13684944,1),l.fillRoundedRect(-r/2,-r/2,r,r,14),o?(l.lineStyle(5,16766720,1),l.strokeRoundedRect(-r/2,-r/2,r,r,14)):i&&(l.lineStyle(2,16777215,.6),l.strokeRoundedRect(-r/2,-r/2,r,r,14)),a.add(l);const c=this.add.text(0,r/2+12,s.name,{fontFamily:"KeiFont, sans-serif",fontSize:"14px",color:i?"#5D4037":"#AAAAAA",fontStyle:"bold"}).setOrigin(.5);if(a.add(c),!i){const d=this.add.graphics();d.fillStyle(0,.35),d.fillCircle(0,0,20);const h=this.add.text(0,0,"üîí",{fontSize:"22px"}).setOrigin(.5);a.add([d,h])}if(o){const d=this.add.text(r/2-4,-r/2+4,"‚úì",{fontSize:"14px",fontStyle:"bold",backgroundColor:"#4CAF50",padding:{x:4,y:2},color:"#FFFFFF"}).setOrigin(.5);a.add(d)}a.setSize(r+10,r+10),a.setInteractive({useHandCursor:!0}),a.on("pointerdown",()=>this.tweens.add({targets:a,scale:.92,duration:40})),a.on("pointerup",()=>{this.tweens.add({targets:a,scale:1,duration:80,ease:"Back.easeOut"}),i?(f.customize.theme=e,T.save(f),this.scene.restart()):this.showUnlockCondition(s)}),a.on("pointerout",()=>this.tweens.add({targets:a,scale:1,duration:80}))}checkUnlock(t){return!0}showUnlockCondition(t){var c,d,h,u,g,F;const{width:n,height:e}=this.scale,s=this.add.rectangle(0,0,n,e,0,.5).setOrigin(0),i=this.add.container(n/2,e/2),o=this.add.graphics();o.fillStyle(16777215,1),o.fillRoundedRect(-140,-60,280,130,12);const a=this.add.text(0,-25,"üîí „É≠„ÉÉ„ÇØ‰∏≠",{...w.heading,fontSize:"16px"}).setOrigin(.5);let r="Êù°‰ª∂„ÇíÈÅîÊàê„Åô„Çã„Å®Ëß£Êîæ";if(t.unlockCondition)if(t.unlockCondition.startsWith("medals_")){const y=t.unlockCondition.split("_")[1],S=((c=f.rewards)==null?void 0:c.medals)||0;r=`„Åä„Åï„Çì„ÅΩ„É°„ÉÄ„É´ ${y}Êûö„ÅßËß£Êîæ
ÔºàÁèæÂú®: ${S}ÊûöÔºâ`}else if(t.unlockCondition.startsWith("stamp_complete_")){const y=t.unlockCondition.split("_")[2],S=((d=f.rewards)==null?void 0:d.totalWeeklyComplete)||0;r=`ÈÄ±Èñì„Çπ„Çø„É≥„Éó ${y}Âõû„Ç≥„É≥„Éó„ÅßËß£Êîæ
ÔºàÁèæÂú®: ${S}ÂõûÔºâ`}else r={clear_20_stages:`20„Çπ„ÉÜ„Éº„Ç∏„ÇØ„É™„Ç¢
ÔºàÁèæÂú®: ${((h=f.stats)==null?void 0:h.totalClears)||0}ÂõûÔºâ`,challenge_5_streak:`„ÉÅ„É£„É¨„É≥„Ç∏5ÈÄ£Á∂ö
ÔºàÊúÄÈ´ò: ${((u=f.stats)==null?void 0:u.challengeHighScore)||0}ÈÄ£Á∂öÔºâ`,golden_3_times:`„Ç¥„Éº„É´„Éá„É≥3Âõû
ÔºàÁèæÂú®: ${((g=f.stats)==null?void 0:g.goldenClears)||0}ÂõûÔºâ`,clear_50_stages:`50„Çπ„ÉÜ„Éº„Ç∏„ÇØ„É™„Ç¢
ÔºàÁèæÂú®: ${((F=f.stats)==null?void 0:F.totalClears)||0}ÂõûÔºâ`,use_all_4_dogs:"ÂÖ®4Áä¨Á®Æ„Çí1Âõû„Åö„Å§‰ΩøÁî®"}[t.unlockCondition]||r;const l=this.add.text(0,15,r,{...w.small,fontSize:"12px",align:"center",lineSpacing:4}).setOrigin(.5);i.add([o,a,l]),s.setInteractive(),s.on("pointerup",()=>{s.destroy(),i.destroy()})}}const Qt={1:{origin:"„Å´„Åª„Çì",personality:"„Å°„ÇÖ„ÅÜ„Åò„Å§",trivia:`„Åó„Å£„ÅΩ„Åå„Åè„Çã„Çì„Å®
„Åæ„Çã„Åæ„Å£„Å¶„ÅÑ„Çã„ÇàÔºÅ`,funFact:`„ÄåÊü¥„Äç„ÅØÂ∞è„Åï„ÅÑ„Å®„ÅÑ„ÅÜ
ÊÑèÂë≥„Å™„Çì„Å†„ÇàÔºÅ`},2:{origin:"„Å°„ÇÖ„ÅÜ„Åî„Åè",personality:"„ÅÇ„Åã„Çã„ÅÑ",trivia:`„Åó„Çè„Åó„Çè„ÅÆÈ°î„Åå
„ÉÅ„É£„Éº„É†„Éù„Ç§„É≥„ÉàÔºÅ`,funFact:`Êòî„ÅØÁéãÊßò„ÅÆ„Éö„ÉÉ„Éà
„Å†„Å£„Åü„Çì„Å†„ÇàÔºÅ`},3:{origin:"„Éï„É©„É≥„Çπ",personality:"„Åã„Åó„Åì„ÅÑ",trivia:`„Åë„ÅåÊäú„Åë„Å´„Åè„ÅÑ„Åã„Çâ
„Ç¢„É¨„É´„ÇÆ„Éº„Å´„ÇÑ„Åï„Åó„ÅÑÔºÅ`,funFact:`Ê∞¥„Å´È£õ„Å≥Ëæº„ÇÄÁã©„Çä„Åå
ÂæóÊÑè„Å†„Å£„Åü„ÇàÔºÅ`},4:{origin:"„Ç∑„Éô„É™„Ç¢",personality:"„Åí„Çì„Åç",trivia:`„Åù„Çä„ÇíÂºï„Åè„ÅÆ„Åå
Â§ßÂæóÊÑèÔºÅ`,funFact:`„Ç™„ÉÉ„Éâ„Ç¢„Ç§„ÅÆÂ≠ê„ÇÇ
„ÅÑ„Çã„Çì„Å†„ÇàÔºÅ`},5:{origin:"„Ç§„ÇÆ„É™„Çπ",personality:"„ÇÑ„Åï„Åó„ÅÑ",trivia:`„Åç„Çì„ÅÑ„Çç„ÅÆÊØõ„Åå
„Å®„Å£„Å¶„ÇÇ„Åç„Çå„ÅÑÔºÅ`,funFact:`‰∫∫„ÇíÂä©„Åë„Çã‰ªï‰∫ã„Åå
Â§ßÂ•Ω„Åç„Å™„Çì„Å†„ÇàÔºÅ`},6:{origin:"„Ç§„ÇÆ„É™„Çπ",personality:"„ÇÑ„Åï„Åó„ÅÑ",trivia:`„Åì„Çè„Åù„ÅÜ„Å™È°î„Å†„Åë„Å©
ÂÆü„ÅØ„Å®„Å£„Å¶„ÇÇÁîò„Åà„ÇìÂùäÔºÅ`,funFact:`„Ç§„ÇÆ„É™„Çπ„ÅÆ
„Éû„Çπ„Ç≥„ÉÉ„Éà„Å†„ÇàÔºÅ`},7:{origin:"„Ç¶„Çß„Éº„É´„Ç∫",personality:"„Åã„Å£„Å±„Å§",trivia:`„Åä„Åó„Çä„Åå
„Å∑„Çä„Å∑„Çä„Åß„Åã„Çè„ÅÑ„ÅÑÔºÅ`,funFact:`„Ç§„ÇÆ„É™„ÇπÂ•≥Áéã„ÅÆ
ÊÑõÁä¨„Å†„Å£„Åü„ÇàÔºÅ`},8:{origin:"„ÇØ„É≠„Ç¢„ÉÅ„Ç¢",personality:"„ÅÜ„Çì„Å©„ÅÜ„Åö„Åç",trivia:`„ÅÜ„Åæ„Çå„ÅüÊôÇ„ÅØ
„Åæ„Å£„Åó„Çç„Å™„Çì„Å†„ÇàÔºÅ`,funFact:`Ê∂àÈò≤ÁΩ≤„ÅÆ
„Éû„Çπ„Ç≥„ÉÉ„Éà„Å†„ÇàÔºÅ`},9:{origin:"„É°„Ç≠„Ç∑„Ç≥",personality:"„ÇÜ„ÅÜ„Åã„Çì",trivia:`‰∏ñÁïå‰∏Ä„Å°„ÅÑ„Åï„ÅÑ
Áä¨Á®Æ„Å†„ÇàÔºÅ`,funFact:`„Å°„ÅÑ„Åï„ÅÑ„Åë„Å©
ÂãáÊï¢„Å™„Çì„Å†ÔºÅ`},10:{origin:"„Éâ„Ç§„ÉÑ",personality:"„ÅÇ„Åæ„Åà„Çì„Åº„ÅÜ",trivia:`„Åµ„Çè„Åµ„Çè„ÅÆÊØõ„Åå
Ëá™ÊÖ¢„Å†„ÇàÔºÅ`,funFact:`Êòî„ÅØ„ÇÇ„Å£„Å®
Â§ß„Åç„Åã„Å£„Åü„Çì„Å†„ÇàÔºÅ`},11:{origin:"„Ç§„ÇÆ„É™„Çπ",personality:"„Åì„ÅÜ„Åç„Åó„Çì„Åä„ÅÜ„Åõ„ÅÑ",trivia:`„Åô„Åî„ÅÑÈºª„ÇíÊåÅ„Å£„Å¶„ÅÑ„Å¶
„Å´„Åä„ÅÑ„ÇíËøΩ„ÅÑ„Åã„Åë„Çã„ÅÆ„ÅåÂ§ßÂ•Ω„ÅçÔºÅ`,funFact:`„Çπ„Éå„Éº„Éî„Éº„ÅÆ
„É¢„Éá„É´„Å™„Çì„Å†„ÇàÔºÅ`},12:{origin:"„Ç§„ÇÆ„É™„Çπ",personality:"„Å®„Å£„Å¶„ÇÇ„Åã„Åó„Åì„ÅÑ",trivia:`‰∏ñÁïå‰∏Ä„ÅÇ„Åü„Åæ„Åå„ÅÑ„ÅÑ
Áä¨Á®Æ„Å®Ë®Ä„Çè„Çå„Å¶„ÅÑ„Çã„ÇàÔºÅ`,funFact:`„Å≤„Å§„Åò„ÇíËøΩ„ÅÑ„Åã„Åë„Çã
„ÅÆ„ÅåÂæóÊÑèÔºÅ`},13:{origin:"„Ç´„Éä„ÉÄ",personality:"„Éï„É¨„É≥„Éâ„É™„Éº",trivia:`Ê≥≥„Åê„ÅÆ„ÅåÂ§ßÂ•Ω„ÅçÔºÅ
Ê∞¥„Åã„Åç„Åå„ÅÇ„Çã„Çì„Å†„ÇàÔºÅ`,funFact:`Áõ≤Â∞éÁä¨„Å®„Åó„Å¶
Ê¥ªË∫ç„Åó„Å¶„ÅÑ„Çã„ÇàÔºÅ`},14:{origin:"„Å´„Åª„Çì",personality:"„Åä„Å†„ÇÑ„Åã",trivia:`„ÇØ„É™„Éº„É†Ëâ≤„ÅÆ
„Åç„Çå„ÅÑ„Å™ÊØõ‰∏¶„ÅøÔºÅ`,funFact:`Êü¥Áä¨„ÅÆ‰∏≠„Åß„ÇÇ
Áèç„Åó„ÅÑÊØõËâ≤„Å†„ÇàÔºÅ`},15:{origin:"„Éï„É©„É≥„Çπ",personality:"„É¶„Éº„É¢„Ç¢",trivia:`„Ç≥„Ç¶„É¢„É™„Åø„Åü„ÅÑ„Å™
Â§ß„Åç„Å™ËÄ≥„Åå„Åã„Çè„ÅÑ„ÅÑÔºÅ`,funFact:`„ÅÑ„Å≥„Åç„Çí
„Åã„Åè„Åì„Å®„Åå„ÅÇ„Çã„ÇàÔºÅ`},16:{origin:"„Éâ„Ç§„ÉÑ",personality:"„Åó„Å£„Åã„Çä„ÇÇ„ÅÆ",trivia:`Á´ãÊ¥æ„Å™„Å≤„Åí„Åå
„Åä„Åò„ÅÑ„Åï„Çì„Åø„Åü„ÅÑÔºÅ`,funFact:`„Éç„Ç∫„ÉüÊçï„Çä„Åå
ÂæóÊÑè„Å†„Å£„Åü„Çì„Å†ÔºÅ`},17:{origin:"„Éâ„Ç§„ÉÑ",personality:"„Å°„ÇÖ„ÅÜ„Åò„Å§",trivia:`„Çπ„Éû„Éº„Éà„Åß„Åã„Å£„Åì„ÅÑ„ÅÑÔºÅ
Ë≠¶ÂØüÁä¨„Å®„Åó„Å¶„ÇÇÊ¥ªË∫çÔºÅ`,funFact:`Á®éÈáë„ÇíÈõÜ„ÇÅ„Çã‰∫∫„Åå
‰Ωú„Å£„ÅüÁä¨Á®Æ„Å™„Çì„Å†„ÇàÔºÅ`},18:{origin:"„Éâ„Ç§„ÉÑ",personality:"„Åí„Çì„Åç",trivia:`„Ç∞„É¨„Éº„ÅÆÊØõËâ≤„Åå
„Åä„Åó„ÇÉ„ÇåÔºÅ`,funFact:`„Åä„Å≤„Åí„Åå„ÉÅ„É£„Éº„É†
„Éù„Ç§„É≥„Éà„Å†„ÇàÔºÅ`},19:{origin:"„Éâ„Ç§„ÉÑ",personality:"„Å°„ÇÖ„ÅÜ„Åò„Å§",trivia:`Ëå∂Ëâ≤„ÅÆ„Éû„Éº„Ç≠„É≥„Ç∞„Åå
„ÉÅ„É£„Éº„É†„Éù„Ç§„É≥„ÉàÔºÅ`,funFact:`„Å®„Å¶„ÇÇË≥¢„Åè„Å¶
È†º„Çä„Å´„Å™„Çã„ÇàÔºÅ`},20:{origin:"„Å´„Åª„Çì",personality:"„Åå„Åæ„Çì„Å•„Çà„ÅÑ",trivia:`„ÅÇ„Å§„ÅÑÊØõ„Åß
ÂØí„Åï„Å´Âº∑„ÅÑ„ÇàÔºÅ`,funFact:`„ÇΩ„Éï„Éà„Éê„É≥„ÇØ„ÅÆCM„Åß
ÊúâÂêç„Å´„Å™„Å£„Åü„ÇàÔºÅ`},21:{origin:"„Çπ„Ç§„Çπ",personality:"„Åä„Å†„ÇÑ„Åã",trivia:`„Å®„Å£„Å¶„ÇÇÂ§ß„Åç„ÅÑ„Åë„Å©
ÂÑ™„Åó„ÅÑÂ∑®‰∫∫„Å†„ÇàÔºÅ`,funFact:`Èõ™Â±±„ÅßÈÅ≠Èõ£„Åó„Åü‰∫∫„Çí
Âä©„Åë„Å¶„ÅÑ„Åü„Çì„Å†„ÇàÔºÅ`},22:{origin:"„É≠„Ç∑„Ç¢",personality:"„Åç„Å≤„Çì",trivia:`Èï∑„ÅÑË∂≥„Åß
„Å®„Å¶„ÇÇÈÄü„ÅèËµ∞„Çå„Çã„ÇàÔºÅ`,funFact:`„É≠„Ç∑„Ç¢„ÅÆË≤¥Êóè„Å´
ÊÑõ„Åï„Çå„Å¶„ÅÑ„Åü„ÇàÔºÅ`},23:{origin:"„Çπ„Ç§„Çπ",personality:"„ÇÑ„Åï„Åó„ÅÑ",trivia:`Èªí„ÉªÁôΩ„ÉªËå∂„ÅÆ
‰∏âËâ≤„Åå„Åç„Çå„ÅÑÔºÅ`,funFact:`„Ç¢„É´„Éó„Çπ„ÅÆËæ≤Â†¥„Åß
ÂÉç„ÅÑ„Å¶„ÅÑ„Åü„ÇàÔºÅ`},24:{origin:"„Å´„Åª„Çì",personality:"„Åä„Å£„Å®„Çä",trivia:`„Åæ„Å£„Åó„Çç„Å™ÊØõ„Åå
„Å®„Å£„Å¶„ÇÇÁæé„Åó„ÅÑÔºÅ`,funFact:`Êü¥Áä¨„ÅÆËâ≤„ÅÆ‰∏≠„Åß
Áèç„Åó„ÅÑÁôΩ„ÅÑÊØõËâ≤„Å†„ÇàÔºÅ`}};class Zt extends C.Scene{constructor(){super({key:"ZukanScene"})}create(){const{width:t,height:n}=this.scale;this.add.rectangle(0,0,t,n,m.sky).setOrigin(0),this.createHeader(),this.createDogList(),this.cameras.main.fadeIn(300)}createHeader(){const{width:t}=this.scale,n=x.TOP,e=this.add.graphics();e.setScrollFactor(0),e.setDepth(100),e.fillStyle(m.uiBg,1),e.fillRect(0,0,t,n+65),e.fillStyle(0,.1),e.fillRect(0,n+62,t,4);const s=this.add.text(18,n+32,"‚Üê „ÇÇ„Å©„Çã",{fontFamily:"KeiFont, sans-serif",fontSize:"18px",color:"#5D4037",fontStyle:"bold"}).setOrigin(0,.5).setInteractive({useHandCursor:!0});s.setDepth(101),s.on("pointerdown",()=>this.tweens.add({targets:s,scale:.92,duration:50})),s.on("pointerup",()=>{this.tweens.add({targets:s,scale:1,duration:100,ease:"Back.easeOut"}),this.cameras.main.fadeOut(300),this.time.delayedCall(300,()=>this.scene.start("TitleScene"))}),s.on("pointerout",()=>this.tweens.add({targets:s,scale:1,duration:80})),this.add.text(t/2,n+32,"üìñ „Çè„Çì„Åì„Åö„Åã„Çì",{fontFamily:"KeiFont, sans-serif",fontSize:"26px",color:"#8D6E63",fontStyle:"bold"}).setOrigin(.5).setDepth(101)}createDogList(){const{width:t,height:n}=this.scale,e=x.TOP+80,s=n-e-20,i=Object.entries(v).filter(([k,D])=>!(k==="5"||D.isSecret&&!T.isDogUnlocked(f,parseInt(k)))),o=3,a=105,r=12,c=Math.ceil(i.length/o)*(a+r+15)+40,d=o*a+(o-1)*r,h=(t-d)/2+a/2,u=this.add.graphics();u.fillStyle(12364452,.25),u.fillRoundedRect(18,e-10,t-32,s+10,16),u.fillStyle(16447477,.98),u.fillRoundedRect(15,e-15,t-30,s+10,16),u.fillStyle(9268835,.5),u.fillRoundedRect(15,e-15,t-30,5,{tl:16,tr:16,bl:0,br:0});const g=Object.entries(v).filter(([k])=>k!=="5"),F=g.filter(([k])=>T.isDogUnlocked(f,parseInt(k))).length,y=F===g.length,S=y?`üêï „Åø„Çì„Å™„Å®„ÇÇ„Å†„Å°ÔºÅ ${F}„Å≤„Åç`:`üêï ${F}„Å≤„Åç„ÅÆ„Å®„ÇÇ„Å†„Å°`;this.add.text(t/2,e+8,S,{fontFamily:"KeiFont, sans-serif",fontSize:"18px",color:y?"#4CAF50":"#5D4037",fontStyle:"bold"}).setOrigin(.5),this.dogListContainer=this.add.container(0,0),i.forEach(([k,D],W)=>{const Y=parseInt(k),N=h+W%o*(a+r),L=e+75+Math.floor(W/o)*(a+r+15),nt=this.createDogCard(N,L,Y,D);this.dogListContainer.add(nt)});const b=this.make.graphics();b.fillStyle(16777215),b.fillRect(0,e+30,t,s-20);const O=b.createGeometryMask();this.dogListContainer.setMask(O),this.scrollY=0,this.maxScroll=Math.max(0,c-s+100);let E=!1,M=0,A=0;this.input.on("pointerdown",k=>{k.y>=e+30&&k.y<=e+s&&(E=!0,M=k.y,A=this.scrollY)}),this.input.on("pointermove",k=>{if(!E)return;Math.abs(k.y-M)>10&&(this.scrollY=C.Math.Clamp(A-(k.y-M),0,this.maxScroll),this.dogListContainer.y=-this.scrollY)}),this.input.on("pointerup",()=>{E=!1}),this.maxScroll>0&&this.add.text(t/2,n-30,"‚Üï „Çπ„ÇØ„É≠„Éº„É´„Åß„Åç„Åæ„Åô",{...w.small,fontSize:"10px",color:"#888888"}).setOrigin(.5)}createDogCard(t,n,e,s){const i=T.isDogUnlocked(f,e),o=95,a=this.add.container(t,n),r=this.add.graphics();if(i?(r.fillStyle(16777215,1),r.fillRoundedRect(-o/2,-o/2,o,o,14),r.lineStyle(3,s.color,.8),r.strokeRoundedRect(-o/2,-o/2,o,o,14)):(r.fillStyle(6710886,1),r.fillRoundedRect(-o/2,-o/2,o,o,14)),a.add(r),i){const c=z.draw(this,0,-8,e,24,"happy");a.add(c)}else{const c=z.draw(this,0,-8,e,24,"neutral");c.setAlpha(.25),c.list.forEach(u=>{u.setTint&&u.setTint(0)}),a.add(c);const d=this.add.graphics();d.fillStyle(0,.5),d.fillCircle(0,-8,18);const h=this.add.text(0,-8,"üîí",{fontSize:"20px"}).setOrigin(.5);a.add([d,h])}const l=this.add.text(0,o/2-18,i?s.name:"ÔºüÔºüÔºü",{...w.small,fontSize:"11px",color:i?m.textDark:"#888888"}).setOrigin(.5);return a.add(l),a.setSize(o,o),a.setInteractive({useHandCursor:!0}),a.on("pointerdown",()=>this.tweens.add({targets:a,scale:.93,duration:50})),a.on("pointerup",()=>{this.tweens.add({targets:a,scale:1,duration:80}),i?this.showDogDetail(e,s):this.showUnlockCondition(e)}),a.on("pointerout",()=>this.tweens.add({targets:a,scale:1,duration:80})),a}showDogDetail(t,n){var O;const{width:e,height:s}=this.scale,i=Qt[t]||{},o=this.add.rectangle(0,0,e,s,0,.6).setOrigin(0).setInteractive(),a=this.add.container(e/2,s/2),r=this.add.graphics();r.fillStyle(16777215,1),r.fillRoundedRect(-150,-180,300,360,16),r.lineStyle(3,n.color,1),r.strokeRoundedRect(-150,-180,300,360,16),a.add(r);const l=z.draw(this,0,-110,t,35,"happy");a.add(l);const c=this.add.text(0,-55,n.name,{...w.heading,fontSize:"24px"}).setOrigin(.5);a.add(c);const d=(O=f.dogUnlockDates)==null?void 0:O[t];let h="";if(d){const E=new Date(d),M=E.getMonth()+1,A=E.getDate();h=`${M}„Åå„Å§ ${A}„Å´„Å°`}const u=-25,g=[`üåç „Åí„Çì„Åï„Çì„Å°: ${i.origin||"???"}`,`üíñ „Åõ„ÅÑ„Åã„Åè: ${i.personality||"???"}`];h&&g.push(`üìÖ „Åß„ÅÇ„Å£„Åü„Å≤: ${h}`),g.forEach((E,M)=>{const A=this.add.text(0,u+M*22,E,{...w.body,fontSize:"12px"}).setOrigin(.5);a.add(A)});const F=g.length>2?55:50,y=this.add.text(0,F,`üìù ${i.trivia||"???"}`,{...w.body,fontSize:"11px",align:"center",lineSpacing:3,wordWrap:{width:270}}).setOrigin(.5);a.add(y);const S=this.add.text(0,110,`üí° ${i.funFact||"???"}`,{...w.small,fontSize:"10px",color:"#666666",align:"center",lineSpacing:3,wordWrap:{width:270}}).setOrigin(.5);a.add(S);const b=this.add.text(0,155,"‚ù§Ô∏è „Å®„Åò„Çã",{...w.button,fontSize:"16px",backgroundColor:"#FF6B8A",padding:{x:30,y:8}}).setOrigin(.5).setInteractive({useHandCursor:!0});a.add(b),b.on("pointerup",()=>{a.destroy(),o.destroy()}),o.on("pointerup",()=>{a.destroy(),o.destroy()}),a.setScale(.5),a.setAlpha(0),this.tweens.add({targets:a,scale:1,alpha:1,duration:200,ease:"Back.easeOut"})}showUnlockCondition(t){const{width:n,height:e}=this.scale,s=Object.values(ht).find(h=>h.dogId===t),i=this.add.rectangle(0,0,n,e,0,.5).setOrigin(0).setInteractive(),o=this.add.container(n/2,e/2),a=this.add.graphics();a.fillStyle(3355443,1),a.fillRoundedRect(-140,-90,280,180,12),o.add(a);const r=z.draw(this,0,-45,t,20,"neutral");r.setAlpha(.3),r.list.forEach(h=>{h.setTint&&h.setTint(16777215)}),o.add(r);let l,c="";s?s.isSecret?l="üîì ÔºüÔºüÔºü":(l=`üîì ${s.description}`,c=this.getProgressText(s.condition)):l="üîì ???";const d=this.add.text(0,15,l,{...w.body,fontSize:"13px",color:"#FFFFFF",align:"center",wordWrap:{width:240}}).setOrigin(.5);if(o.add(d),c){const h=this.add.text(0,50,c,{fontSize:"11px",color:"#AAAAAA",align:"center"}).setOrigin(.5);o.add(h)}i.on("pointerup",()=>{o.destroy(),i.destroy()}),o.setScale(.8),o.setAlpha(0),this.tweens.add({targets:o,scale:1,alpha:1,duration:150,ease:"Back.easeOut"})}getProgressText(t){var o,a,r,l;if(!t)return"";const n=f.stats||{};let e=0,s=t.value||0,i="";switch(t.type){case"total_clears":e=n.totalClears||0,i="Âõû„ÇØ„É™„Ç¢";break;case"total_pieces":e=n.totalPieces||0,i="„Éî„Éº„Çπ";break;case"max_combo":e=n.maxComboCount||0,i="„Ç≥„É≥„Éú";break;case"consecutive_clears":e=n.consecutiveClears||0,i="ÈÄ£Á∂ö";break;case"consecutive_logins":e=n.consecutiveLogins||0,i="Êó•";break;case"challenge_streak":e=n.challengeHighScore||0,i="ÈÄ£Âãù";break;case"golden_clears":e=n.goldenClears||0,i="Âõû";break;case"no_miss_clears":e=n.noMissClears||0,i="Âõû";break;case"weekly_complete":e=((o=f.rewards)==null?void 0:o.totalWeeklyComplete)||0,i="Âõû";break;case"theme_clears":e=((a=n.themeClears)==null?void 0:a[t.theme])||0,i="Âõû";break;case"day_of_week_clears":e=((r=n.dayOfWeekClears)==null?void 0:r[t.day])||0,i="Âõû";break;case"dog_specific_clears":e=((l=n.dogSpecificClears)==null?void 0:l[t.dogId])||0,i="Âõû";break;default:return""}return`ÔºàÁèæÂú®: ${e}${i} / ${s}${i}Ôºâ`}}class te extends C.Scene{constructor(){super({key:"DogSelectScene"})}init(t){t&&t.selectedDogs&&t.selectedDogs.length>0?this.selectedDogs=[...t.selectedDogs]:this.selectedDogs=[...f.selectedDogs]}create(){const{width:t,height:n}=this.scale;this.add.rectangle(0,0,t,n,m.sky).setOrigin(0),this.createHeader(),this.createSelectedDisplay(),this.createDogGrid(),this.createConfirmButton(),this.cameras.main.fadeIn(300)}createHeader(){const{width:t}=this.scale,n=x.TOP,e=this.add.graphics();e.setScrollFactor(0),e.setDepth(100),e.fillStyle(m.uiBg,1),e.fillRect(0,0,t,n+65),e.fillStyle(0,.1),e.fillRect(0,n+62,t,4);const s=this.add.text(18,n+32,"‚Üê „ÇÇ„Å©„Çã",{fontFamily:"KeiFont, sans-serif",fontSize:"18px",color:"#5D4037",fontStyle:"bold"}).setOrigin(0,.5).setInteractive({useHandCursor:!0});s.setDepth(101),s.on("pointerdown",()=>this.tweens.add({targets:s,scale:.92,duration:50})),s.on("pointerup",()=>{this.tweens.add({targets:s,scale:1,duration:100,ease:"Back.easeOut"}),this.cameras.main.fadeOut(300),this.time.delayedCall(300,()=>this.scene.start("TitleScene"))}),s.on("pointerout",()=>this.tweens.add({targets:s,scale:1,duration:80})),this.add.text(t/2,n+32,"üêï „Çè„Çì„Åì„Çí„Åà„Çâ„Å∂",{fontFamily:"KeiFont, sans-serif",fontSize:"26px",color:"#FF8C00",fontStyle:"bold"}).setOrigin(.5).setDepth(101)}createSelectedDisplay(){const{width:t}=this.scale,n=x.TOP+80,e=this.add.graphics();e.fillStyle(16758605,.25),e.fillRoundedRect(18,n-5,t-32,105,16),e.fillStyle(16775408,.98),e.fillRoundedRect(15,n-10,t-30,105,16),e.fillStyle(16747520,.5),e.fillRoundedRect(15,n-10,t-30,5,{tl:16,tr:16,bl:0,br:0});const s=this.selectedDogs.length,i=s===4?"üêæ „Å§„Åã„ÅÜ„ÉØ„É≥„Å°„ÇÉ„ÇìÔºà4„Å≤„ÅçÔºâ":`üêæ „Å§„Åã„ÅÜ„ÉØ„É≥„Å°„ÇÉ„ÇìÔºà${s}/4„Å≤„ÅçÔºâ`,o=s===4?"#5D4037":"#FF6B6B";this.add.text(t/2,n+12,i,{fontFamily:"KeiFont, sans-serif",fontSize:"18px",color:o,fontStyle:"bold"}).setOrigin(.5),this.selectedContainer=this.add.container(t/2,n+60),this.updateSelectedDisplay()}updateSelectedDisplay(){this.selectedContainer.removeAll(!0);const t=65,n=-1.5*t;this.selectedDogs.forEach((e,s)=>{const i=n+s*t,o=z.draw(this,i,0,e,22,"happy");this.selectedContainer.add(o)})}createDogGrid(){const{width:t,height:n}=this.scale,e=x.TOP+205,s=n-e-100,i=Object.entries(v).filter(([O,E])=>!(O==="5"||E.isSecret&&!T.isDogUnlocked(f,parseInt(O)))),o=3,a=95,r=14,c=Math.ceil(i.length/o)*(a+r)+70,d=o*a+(o-1)*r,h=(t-d)/2+a/2,u=this.add.graphics();u.fillStyle(9489145,.25),u.fillRoundedRect(18,e-10,t-32,s,16),u.fillStyle(16120575,.98),u.fillRoundedRect(15,e-15,t-30,s,16),u.fillStyle(4367861,.5),u.fillRoundedRect(15,e-15,t-30,5,{tl:16,tr:16,bl:0,br:0}),this.add.text(t/2,e+8,"üêï „Åà„Çâ„Åπ„Çã„ÉØ„É≥„Å°„ÇÉ„Çì",{fontFamily:"KeiFont, sans-serif",fontSize:"18px",color:"#5D4037",fontStyle:"bold"}).setOrigin(.5),this.dogGridContainer=this.add.container(0,0),i.forEach(([O,E],M)=>{const A=parseInt(O),k=h+M%o*(a+r),D=e+75+Math.floor(M/o)*(a+r);this.createDogOption(k,D,A,E,this.dogGridContainer)});const g=this.make.graphics();g.fillStyle(16777215),g.fillRect(0,e+25,t,s-25);const F=g.createGeometryMask();this.dogGridContainer.setMask(F),this.scrollY=0,this.maxScroll=Math.max(0,c-s+85);let y=!1,S=0,b=0;this.input.on("pointerdown",O=>{O.y>=e+25&&O.y<=e+s-15&&(y=!0,S=O.y,b=this.scrollY)}),this.input.on("pointermove",O=>{if(!y)return;Math.abs(O.y-S)>10&&(this.scrollY=C.Math.Clamp(b-(O.y-S),0,this.maxScroll),this.dogGridContainer.y=-this.scrollY)}),this.input.on("pointerup",()=>{y=!1})}createDogOption(t,n,e,s,i){const o=T.isDogUnlocked(f,e),a=this.selectedDogs.includes(e),r=85,l=this.add.container(t,n),c=this.add.graphics();if(a?(c.fillStyle(16766720,.25),c.fillRoundedRect(-r/2-6,-r/2-6,r+12,r+12,14),c.fillStyle(16775910,1),c.fillRoundedRect(-r/2,-r/2,r,r,12),c.lineStyle(4,16766720,1),c.strokeRoundedRect(-r/2,-r/2,r,r,12)):o?(c.fillStyle(16777215,1),c.fillRoundedRect(-r/2,-r/2,r,r,12),c.lineStyle(2,14737632,1),c.strokeRoundedRect(-r/2,-r/2,r,r,12)):(c.fillStyle(6710886,1),c.fillRoundedRect(-r/2,-r/2,r,r,12)),l.add(c),o){const h=z.draw(this,0,-8,e,20,a?"happy":"neutral");l.add(h)}else{const h=z.draw(this,0,-8,e,20,"neutral");h.setAlpha(.3),h.list.forEach(F=>{F.setTint&&F.setTint(0)}),l.add(h);const u=this.add.graphics();u.fillStyle(0,.6),u.fillCircle(0,-8,18);const g=this.add.text(0,-8,"üîí",{fontSize:"18px"}).setOrigin(.5);l.add([u,g])}const d=this.add.text(0,r/2-18,o?s.name:"ÔºüÔºüÔºü",{...w.small,fontSize:"10px",color:o?m.textDark:"#888888"}).setOrigin(.5);l.add(d),l.setSize(r,r),l.setInteractive({useHandCursor:!0}),l.on("pointerdown",()=>{this.tweens.add({targets:l,scale:.92,duration:40}),R.impact("Light")}),l.on("pointerup",()=>{if(this.tweens.add({targets:l,scale:1,duration:80}),!o){this.showUnlockCondition(e);return}a?this.selectedDogs.length>1&&(this.selectedDogs=this.selectedDogs.filter(h=>h!==e)):this.selectedDogs.length<4?this.selectedDogs.push(e):(this.selectedDogs.shift(),this.selectedDogs.push(e)),this.scene.restart({selectedDogs:this.selectedDogs})}),l.on("pointerout",()=>this.tweens.add({targets:l,scale:1,duration:80})),i&&i.add(l)}showUnlockCondition(t){const{width:n,height:e}=this.scale,s=Object.values(ht).find(h=>h.dogId===t),i=this.add.rectangle(0,0,n,e,0,.5).setOrigin(0),o=this.add.container(n/2,e/2),a=this.add.graphics();a.fillStyle(16777215,1),a.fillRoundedRect(-140,-70,280,150,12);const r=this.add.text(0,-45,"üîí „É≠„ÉÉ„ÇØ‰∏≠",{...w.heading,fontSize:"16px"}).setOrigin(.5);let l,c="";s?s.isSecret?l="ÔºüÔºüÔºü":(l=s.description,c=this.getProgressText(s.condition)):l="Êù°‰ª∂„ÇíÈÅîÊàê„Åô„Çã„Å®Ëß£Êîæ„Åï„Çå„Åæ„Åô";const d=this.add.text(0,0,l,{...w.body,fontSize:"14px",align:"center",wordWrap:{width:240}}).setOrigin(.5);if(o.add([a,r,d]),c){const h=this.add.text(0,35,c,{fontSize:"11px",color:"#888888",align:"center"}).setOrigin(.5);o.add(h)}i.setInteractive(),i.on("pointerup",()=>{i.destroy(),o.destroy()})}getProgressText(t){var o,a,r,l;if(!t)return"";const n=f.stats||{};let e=0,s=t.value||0,i="";switch(t.type){case"total_clears":e=n.totalClears||0,i="Âõû„ÇØ„É™„Ç¢";break;case"total_pieces":e=n.totalPieces||0,i="„Éî„Éº„Çπ";break;case"max_combo":e=n.maxComboCount||0,i="„Ç≥„É≥„Éú";break;case"consecutive_clears":e=n.maxConsecutiveClears||0,i="ÈÄ£Á∂ö";break;case"consecutive_logins":e=n.consecutiveLogins||0,i="Êó•";break;case"challenge_streak":e=n.challengeHighScore||0,i="ÈÄ£Âãù";break;case"golden_clears":e=n.goldenClears||0,i="Âõû";break;case"no_miss_clears":e=n.noMissClears||0,i="Âõû";break;case"weekly_complete":e=((o=f.rewards)==null?void 0:o.totalWeeklyComplete)||0,i="Âõû";break;case"theme_clears":e=((a=n.themeClears)==null?void 0:a[t.theme])||0,i="Âõû";break;case"day_of_week_clears":e=((r=n.dayOfWeekClears)==null?void 0:r[t.day])||0,i="Âõû";break;case"dog_specific_clears":e=((l=n.dogSpecificClears)==null?void 0:l[t.dogId])||0,i="Âõû";break;default:return""}return`ÔºàÁèæÂú®: ${e}${i} / ${s}${i}Ôºâ`}createConfirmButton(){const{width:t,height:n}=this.scale,e=n-x.BOTTOM-50,s=this.selectedDogs.length===4,i=this.add.container(t/2,e),o=this.add.graphics();o.fillStyle(s?5025616:10066329,1),o.fillRoundedRect(-80,-22,160,44,8);const a=this.add.text(0,0,"„Åë„Å£„Å¶„ÅÑ",{...w.button,fontSize:"18px",color:s?"#FFFFFF":"#CCCCCC"}).setOrigin(.5);if(i.add([o,a]),!s){const r=this.add.text(0,32,`üêæ „ÅÇ„Å®${4-this.selectedDogs.length}„Å≤„Åç„Åà„Çâ„Çì„Åß„Å≠ÔºÅ`,{fontSize:"12px",color:"#FF6B6B"}).setOrigin(.5);i.add(r)}i.setSize(160,44),i.setInteractive({useHandCursor:!0}),i.on("pointerup",()=>{if(this.selectedDogs.length!==4){this.tweens.add({targets:i,x:i.x-5,duration:50,yoyo:!0,repeat:3});return}f.selectedDogs=this.selectedDogs,T.save(f),this.cameras.main.fadeOut(300),this.time.delayedCall(300,()=>this.scene.start("TitleScene"))})}}class ee extends C.Scene{constructor(){super({key:"MedalCelebrationScene"})}init(t){this.medalData=t||{totalMedals:1,newCostumes:[],stampCount:0}}create(){const{width:t,height:n}=this.scale;this.add.rectangle(0,0,t,n,1710638,.95).setOrigin(0),this.cameras.main.shake(300,.01),this.createSparkles();const e=this.add.container(t/2,n/2),s=-80;this.createMedal(e,0,s);const i=this.add.text(0,s+90,"üéâ „Åä„Åï„Çì„ÅΩ„É°„ÉÄ„É´GETÔºÅ",{fontFamily:"KeiFont, sans-serif",fontSize:"24px",color:"#FFD700",stroke:"#8B4513",strokeThickness:4,shadow:{offsetX:2,offsetY:2,color:"#FFD70066",blur:8,fill:!0}}).setOrigin(.5);e.add(i),i.setScale(0),this.tweens.add({targets:i,scale:1,duration:400,delay:500,ease:"Back.easeOut"});const o=this.add.text(0,s+130,`Á¥ØË®à ${this.medalData.totalMedals} Êûö`,{fontFamily:"KeiFont, sans-serif",fontSize:"16px",color:"#FFFFFF",stroke:"#000000",strokeThickness:2}).setOrigin(.5).setAlpha(0);e.add(o),this.tweens.add({targets:o,alpha:1,duration:300,delay:800}),this.medalData.newCostumes&&this.medalData.newCostumes.length>0&&this.time.delayedCall(1200,()=>{this.showNewCostumes(e,this.medalData.newCostumes)});const a=this.add.text(0,s+160,`üìÖ ‰ªäÈÄ±„ÅÆ„Çπ„Çø„É≥„Éó: ${this.medalData.stampCount}/7`,{fontFamily:"KeiFont, sans-serif",fontSize:"14px",color:"#90EE90"}).setOrigin(.5).setAlpha(0);e.add(a),this.tweens.add({targets:a,alpha:1,duration:300,delay:1e3}),this.time.delayedCall(1500,()=>{const r=this.add.text(t/2,n-80,"„Çø„ÉÉ„Éó„Åó„Å¶„Å§„Å•„Åë„Çã",{fontFamily:"KeiFont, sans-serif",fontSize:"14px",color:"#FFFFFF"}).setOrigin(.5);this.tweens.add({targets:r,alpha:{from:1,to:.4},duration:600,yoyo:!0,repeat:-1}),this.input.once("pointerup",()=>{this.cameras.main.fadeOut(300),this.time.delayedCall(300,()=>{this.scene.start("TitleScene")})})})}createMedal(t,n,e){const s=this.add.container(n,e),i=this.add.graphics();i.fillStyle(16766720,.3),i.fillCircle(0,0,70),s.add(i),this.tweens.add({targets:i,scale:{from:.8,to:1.2},alpha:{from:.5,to:.2},duration:1e3,yoyo:!0,repeat:-1});const o=this.add.graphics();o.fillStyle(16766720,1),o.fillCircle(0,0,50),o.fillStyle(16753920,1),o.fillCircle(0,0,42),o.fillStyle(16769126,.6),o.fillCircle(-15,-15,15),s.add(o);const a=K.draw(this,0,0,16777215,18);a.setAlpha(.9),s.add(a),s.setScale(0),this.tweens.add({targets:s,scale:1,duration:500,ease:"Back.easeOut"}),this.tweens.add({targets:s,angle:{from:-5,to:5},duration:1500,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),t.add(s)}createSparkles(){const{width:t,height:n}=this.scale;for(let e=0;e<20;e++)this.time.delayedCall(e*100,()=>{const s=C.Math.Between(20,t-20),i=C.Math.Between(50,n-50),o=this.add.text(s,i,"‚ú®",{fontSize:`${C.Math.Between(12,24)}px`}).setOrigin(.5).setAlpha(0);this.tweens.add({targets:o,alpha:{from:0,to:1},scale:{from:.5,to:1.2},y:i-30,duration:800,yoyo:!0,repeat:2,onComplete:()=>o.destroy()})})}showNewCostumes(t,n){const{width:e}=this.scale,s=100,i=this.add.graphics();i.fillStyle(5025616,.9),i.fillRoundedRect(-140,s-30,280,60,10),t.add(i);const o=this.add.text(0,s-10,"üéÄ NEW „Åç„Åõ„Åã„ÅàËß£ÊîæÔºÅ",{fontFamily:"KeiFont, sans-serif",fontSize:"14px",color:"#FFFFFF",fontStyle:"bold"}).setOrigin(.5);t.add(o);const a=n.map(l=>`${l.icon} ${l.name}`).join("„ÄÄ"),r=this.add.text(0,s+12,a,{fontFamily:"KeiFont, sans-serif",fontSize:"12px",color:"#FFEB3B"}).setOrigin(.5);t.add(r),i.setAlpha(0),o.setAlpha(0),r.setAlpha(0),this.tweens.add({targets:[i,o,r],alpha:1,duration:300,ease:"Power2"})}}class se extends C.Scene{constructor(){super({key:"StampRallyScene"})}create(){const{width:t,height:n}=this.scale;this.add.rectangle(0,0,t,n,m.sky).setOrigin(0),this.createHeader(),this.createStampBoard(),this.createBonusArea(),this.createMedalInfo(),this.cameras.main.fadeIn(300)}createHeader(){const{width:t}=this.scale,n=x.TOP,e=this.add.graphics();e.fillStyle(m.uiBg,1),e.fillRect(0,n,t,55),this.add.text(15,n+28,"‚Üê „ÇÇ„Å©„Çã",{...w.body}).setOrigin(0,.5).setInteractive({useHandCursor:!0}).on("pointerup",()=>{this.cameras.main.fadeOut(300),this.time.delayedCall(300,()=>this.scene.start("TitleScene"))}),this.add.text(t/2,n+28,"üìÖ „Çπ„Çø„É≥„Éó„É©„É™„Éº",{...w.heading}).setOrigin(.5)}createStampBoard(){const{width:t}=this.scale,n=x.TOP+90,e=this.add.graphics();e.fillStyle(16777215,.95),e.fillRoundedRect(20,n,t-40,180,16),e.lineStyle(3,16766720,1),e.strokeRoundedRect(20,n,t-40,180,16),this.add.text(t/2,n+20,"üêæ „Åì„Çì„Åó„ÇÖ„ÅÜ„ÅÆ„Çπ„Çø„É≥„Éó",{...w.section,fontSize:"14px"}).setOrigin(.5);const s=["Êúà","ÁÅ´","Ê∞¥","Êú®","Èáë","Âúü","Êó•"],o=$.getStampRallyInfo(f).stamps||[],a=n+80,r=38,l=8,c=7*r+6*l,d=(t-c)/2+r/2;s.forEach((g,F)=>{const y=d+F*(r+l),S=F>=5?"#FF6B6B":"#666666";this.add.text(y,a-25,g,{fontSize:"12px",color:S,fontStyle:"bold"}).setOrigin(.5);const b=o.includes(F),O=this.add.graphics();b?(O.fillStyle(16769154,1),O.fillCircle(y,a,r/2),O.lineStyle(2,16766720,1),O.strokeCircle(y,a,r/2),K.draw(this,y,a,v[1].color,10)):(O.lineStyle(2,13421772,1),O.strokeCircle(y,a,r/2),this.add.text(y,a,"?",{fontSize:"16px",color:"#CCCCCC",fontStyle:"bold"}).setOrigin(.5))});const h=`${o.length}/7`;this.add.text(t/2,n+145,h,{fontFamily:"KeiFont, sans-serif",fontSize:"20px",color:o.length>=7?"#4CAF50":"#FF6B6B",fontStyle:"bold"}).setOrigin(.5);const u=7-o.length;u>0&&o.length<7&&this.add.text(t/2,n+165,`„ÅÇ„Å® ${u} Êó•ÔºÅ`,{fontSize:"12px",color:"#888888"}).setOrigin(.5)}createBonusArea(){const{width:t}=this.scale,n=x.TOP+290,e=this.add.graphics(),s=$.checkWeeklyBonus(f),i=s.canClaim;if(i?e.fillStyle(16766720,.2):e.fillStyle(16777215,.9),e.fillRoundedRect(20,n,t-40,120,16),e.lineStyle(2,i?16766720:13421772,1),e.strokeRoundedRect(20,n,t-40,120,16),this.add.text(t/2,n+20,"üéÅ „Åó„ÇÖ„ÅÜ„Åæ„Å§„Éú„Éº„Éä„Çπ",{...w.section,fontSize:"14px"}).setOrigin(.5),this.add.text(t/2,n+50,`7Êó•„Ç≥„É≥„Éó„É™„Éº„Éà„Åß
„É°„ÉÄ„É´3Êûö Ôºã ÁâπÂà•„Åç„Åõ„Åã„ÅàÔºÅ`,{fontSize:"12px",color:"#666666",align:"center",lineSpacing:4}).setOrigin(.5),i){const o=this.add.container(t/2,n+95),a=this.add.graphics();a.fillStyle(5025616,1),a.fillRoundedRect(-70,-18,140,36,8),o.add(a);const r=this.add.text(0,0,"üéâ „ÅÜ„Åë„Å®„ÇãÔºÅ",{fontFamily:"KeiFont, sans-serif",fontSize:"16px",color:"#FFFFFF",fontStyle:"bold"}).setOrigin(.5);o.add(r),o.setSize(140,36),o.setInteractive({useHandCursor:!0}),o.on("pointerup",()=>{const l=$.claimWeeklyBonus(f);l.success&&this.scene.start("MedalCelebrationScene",{totalMedals:l.totalMedals,bonusMedals:l.bonusMedals,newCostumes:l.newCostumes,isWeeklyBonus:!0})}),this.tweens.add({targets:o,scale:{from:1,to:1.05},duration:500,yoyo:!0,repeat:-1})}else s.alreadyClaimed&&this.add.text(t/2,n+95,"‚úÖ ‰ªäÈÄ±„ÅØ„ÅÜ„Åë„Å®„Çä„Åö„ÅøÔºÅ",{fontSize:"14px",color:"#4CAF50",fontStyle:"bold"}).setOrigin(.5)}createMedalInfo(){var a,r;const{width:t,height:n}=this.scale,e=x.TOP+430,s=this.add.graphics();s.fillStyle(16775393,.95),s.fillRoundedRect(20,e,t-40,100,16);const i=((a=f.rewards)==null?void 0:a.medals)||0;this.add.text(t/2,e+25,"üèÖ Á¥ØË®à„Åä„Åï„Çì„ÅΩ„É°„ÉÄ„É´",{...w.section,fontSize:"14px"}).setOrigin(.5),this.add.text(t/2,e+55,`${i} Êûö`,{fontFamily:"KeiFont, sans-serif",fontSize:"28px",color:"#FFD700",stroke:"#8B4513",strokeThickness:3}).setOrigin(.5);const o=((r=f.rewards)==null?void 0:r.totalWeeklyComplete)||0;this.add.text(t/2,e+85,`ÈÄ±Èñì„Ç≥„É≥„Éó„É™„Éº„Éà: ${o} Âõû`,{fontSize:"11px",color:"#888888"}).setOrigin(.5)}}const ie=390,oe=844,ne={type:C.AUTO,parent:"game-container",backgroundColor:"#87CEEB",scale:{mode:C.Scale.FIT,autoCenter:C.Scale.CENTER_BOTH,width:ie,height:oe},autoFocus:!1,scene:[Yt,Ut,Kt,Nt,jt,Xt,qt,Vt,Jt,Zt,te,ee,se]};console.log("üêï „ÉØ„É≥„Åì„Å≠„Åè„Å® - Ê°ú‰∫ï„Ç§„Ç∫„É†ÈÅ©Áî®Áâà");const ae=new C.Game(ne);window.game=ae;window.gameData=f;export{q as I,Ft as N,xt as W};
