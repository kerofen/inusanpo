# ワンこねくと - ゲーム全体仕様書

> **バージョン**: 1.0.0  
> **最終更新**: 2026年1月  
> **対象プラットフォーム**: iOS / Android / Web

---

## 目次

1. [ゲーム概要](#1-ゲーム概要)
2. [コアゲームプレイ](#2-コアゲームプレイ)
3. [ゲームモード](#3-ゲームモード)
4. [キャラクターシステム](#4-キャラクターシステム)
5. [実績・解放システム](#5-実績解放システム)
6. [カスタマイズシステム](#6-カスタマイズシステム)
7. [デイリーミッション・メダルシステム](#7-デイリーミッションメダルシステム)
8. [画面構成・UI](#8-画面構成ui)
9. [マネタイズ](#9-マネタイズ)
10. [データ管理](#10-データ管理)

---

## 1. ゲーム概要

### 1.1 基本情報

| 項目 | 内容 |
|------|------|
| **タイトル** | ワンこねくと |
| **ジャンル** | パズルゲーム（フロウフリー系） |
| **ターゲット** | カジュアルゲーマー、犬好きユーザー |
| **対象年齢** | 全年齢 |
| **アプリID** | `com.kerofen.inusanpo` |

### 1.2 ゲームコンセプト

「ワンこねくと」は、かわいい犬のキャラクターを同じ種類同士でつないでいくパズルゲームです。シンプルなルールながら、全マスを埋める必要があるため戦略性も求められます。

**キーワード**: かわいい、癒し、コレクション、犬

### 1.3 ゲームの特徴

- **シンプルなルール**: 同じ犬種をペアでつなぐだけ
- **豊富なキャラクター**: 通常32種 + 伝説8種 = 計40種類の犬
- **コレクション要素**: 実績達成で新しい犬種を解放
- **カスタマイズ**: 肉球カラー、テーマ、きせかえ
- **デイリーミッション**: 毎日遊ぶモチベーション

---

## 2. コアゲームプレイ

### 2.1 基本ルール

#### グリッド構成
- **サイズ**: 6×6 = 36マス（固定）
- **ピース種類**: 3〜4種類の犬（難易度により変動）
- **配置**: 各種類は必ず2匹ペアで配置

#### ゲーム目標
1. **同じ種類の犬同士をパスでつなぐ**
2. **全36マスをパスで埋める**

両方の条件を満たすとクリア。

### 2.2 操作方法

| 操作 | 動作 |
|------|------|
| **タップ（犬アイコン上）** | パス描画開始 |
| **ドラッグ** | パスを延長（隣接マスのみ） |
| **リリース** | 描画終了 |
| **既存パス上でタップ** | その位置から再描画（後ろを削除） |
| **バックトラック** | 直前のマスに戻ると自動的にパスを1つ削除 |

### 2.3 パス描画ルール

```
【許可される移動】
- 上下左右の隣接マスのみ（斜めは不可）
- 自分のパス上に戻る（バックトラック）

【禁止される移動】
- 他のパスとの交差
- 異なる種類の犬マスへの進入
- 隣接していないマスへのジャンプ
```

### 2.4 クリア条件

```javascript
// クリア判定ロジック（概念）
function checkClear() {
    // 1. 全てのペアが接続されているか
    for (各犬種) {
        if (!ペアが完全に接続されている) return false;
    }
    
    // 2. 全マスがパスで埋まっているか
    for (全36マス) {
        if (マスが空) return false;
    }
    
    return true; // クリア！
}
```

### 2.5 ゲームオーバー条件

| モード | ゲームオーバー条件 |
|--------|-------------------|
| **おさんぽモード** | なし（何度でもやり直し可能） |
| **エンドレスモード** | ペアが完成しないパスを描いて指を離した時 |

### 2.6 進捗表示

- **肉球アイコン**: 画面上部に最大10個表示
- **計算式**: `埋まったマス数 / 36 × 10`
- 視覚的にクリアへの進捗を確認可能

---

## 3. ゲームモード

### 3.1 おさんぽモード（ストーリーモード）

| 項目 | 内容 |
|------|------|
| **ステージ数** | 100ステージ |
| **難易度進行** | ステージ1-30: 難易度1 / 31-70: 難易度2 / 71-100: 難易度3 |
| **ゲームオーバー** | なし |
| **報酬** | クリア状態の保存、実績進行 |
| **特殊イベント** | ゴールデンワンコ遭遇（1/50確率） |

#### ステージ選択画面仕様
- 3列グリッド表示
- 1ページ12ステージ
- クリア済みステージには★マーク
- ミニプレビュー（6×6グリッドの縮小表示）

### 3.2 エンドレスモード（チャレンジモード）

| 項目 | 内容 |
|------|------|
| **ステージ数** | 無限（ランダム生成） |
| **難易度進行** | 5ステージごとに+1（最大3） |
| **ゲームオーバー** | パス未完成でリリース時 |
| **報酬** | 連勝数記録、実績進行 |
| **特殊イベント** | 伝説ワンコ遭遇（条件付き） |

#### スコアシステム
- **スコア**: クリアしたステージ数
- **ハイスコア**: 過去最高の連勝数を保存
- **難易度計算**: `Math.min(3, 1 + Math.floor(スコア / 5))`

### 3.3 チュートリアルモード

| 項目 | 内容 |
|------|------|
| **発動条件** | 初回プレイ時（`tutorial.completed === false`） |
| **内容** | 基本操作の説明、ガイド付きプレイ |
| **スキップ** | 不可（完了まで必須） |

---

## 4. キャラクターシステム

### 4.1 通常犬種（32種類）

#### 初期解放（4種類）
| ID | 名前 | 英語名 |
|----|------|--------|
| 1 | 柴犬 | shiba |
| 2 | パグ | pug |
| 3 | トイプードル | toypoodle |
| 4 | ハスキー | husky |

#### 実績解放（28種類）

| ID | 名前 | 解放条件 |
|----|------|----------|
| 5 | ゴールデンレトリバー | ステージ1クリア |
| 6 | コーギー | 合計10ステージクリア |
| 7 | ダルメシアン | 合計15ステージクリア |
| 8 | チワワ | 合計20ステージクリア |
| 9 | シュナウザー | 合計30ステージクリア |
| 10 | ドーベルマン | 合計40ステージクリア |
| 11 | セントバーナード | 合計50ステージクリア |
| 12 | ボルゾイ | 合計60ステージクリア |
| 13 | バーニーズ | 合計80ステージクリア |
| 14 | サモエド | 合計100ステージクリア |
| 15 | グレートデン | 累計100ピース消す |
| 16 | キャバリア | 累計200ピース消す |
| 17 | ジャックラッセルテリア | 累計300ピース消す |
| 18 | パピヨン | 累計400ピース消す |
| 19 | ブルドッグ | 累計500ピース消す |
| 20 | 黒柴 | 累計600ピース消す |
| 21 | チワプー | チャレンジ5連勝 |
| 22 | ダックスフンド | チャレンジ10連勝 |
| 23 | ビションフリーゼ | チャレンジ20連勝 |
| 24 | ポメラニアン | チャレンジ30連勝 |
| 25 | チャウチャウ | チャレンジ50連勝 |
| 26 | ニューファンドランド | チャレンジ100連勝 |
| 27 | シャーペイ | チャレンジ150連勝 |
| 28 | チャイニーズクレステッド | チャレンジ200連勝 |
| 29 | ゴールデンワンコ | ステージ選択で1/50確率遭遇 |
| 30 | ボーダーコリー | チャレンジ250連勝 |
| 31 | ビーグル | チャレンジ300連勝 |
| 32 | マルチーズ | 7日連続ログイン |

### 4.2 伝説犬種（8種類）

伝説犬種はチャレンジモードで特定条件を満たした状態でプレイし、確率で遭遇します。

| ID | 名前 | 遭遇条件 | 確率 |
|----|------|----------|------|
| 33 | チクワ | チワワを連れてチャレンジ | 1/100 |
| 34 | ふわもこキング | おうかんを装着してチャレンジ | 1/100 |
| 35 | グレートデデン | グレートデンを連れてチャレンジ | 1/100 |
| 36 | セントバナナード | セントバーナードを連れてチャレンジ | 1/100 |
| 37 | 武者犬 | 柴犬を連れてチャレンジ | 1/100 |
| 38 | 炎の犬 | サモエドを連れてチャレンジ | 1/100 |
| 39 | かいじゅう | ハスキーを連れてチャレンジ | 1/100 |
| 40 | ゴリラ | 条件なし | 1/500 |

#### 伝説遭遇の仕組み
1. チャレンジモード開始時に条件をチェック
2. 条件を満たしている場合、確率判定
3. 遭遇成功時、ステージに伝説ワンコが出現
4. ステージクリアで正式に解放

### 4.3 表情システム

各犬種には4種類の表情があり、状況に応じて変化します。

| 表情 | 英語 | 使用タイミング |
|------|------|----------------|
| 通常 | neutral | デフォルト、未接続時 |
| 嬉しい | happy | ペア接続成功時、選択中 |
| 悲しい | sad | リセット時、失敗時 |
| 興奮 | excited | クリア時、解放時 |

#### アセットパス構造
```
assets/characters/
├── dog_01_shiba/
│   ├── neutral.png
│   ├── happy.png
│   ├── sad.png
│   └── excited.png
├── dog_02_pug/
│   └── ...
├── legend_01_bonechi/
│   └── ...
└── ...
```

### 4.4 キャラクターパラメータ

各キャラクターは以下のパラメータを持ちます：

```javascript
{
    name: "柴犬",           // 表示名
    color: 0xFFB347,       // メインカラー
    accentColor: 0xFFFFFF, // アクセントカラー
    earType: "pointed",    // 耳タイプ（pointed/floppy/huge等）
    eyeType: "round",      // 目タイプ（round/big/almond等）
    feature: "none"        // 特徴（none/wrinkle/fluffy/mask等）
}
```

### 4.5 ワンコ選択システム

- **選択可能数**: 最大4匹
- **選択画面**: `DogSelectScene`
- **表示**: 3列グリッド、スクロール対応
- **未解放犬種**: シルエット表示
- **伝説ワンコ**: 金色の特別カードデザイン

---

## 5. 実績・解放システム

### 5.1 実績カテゴリ

#### ステージクリア系（10種）
累計クリア数に応じて解放

#### 累計ピース系（6種）
累計で消したピース数に応じて解放

#### チャレンジ連勝系（10種）
チャレンジモードの最高連勝数に応じて解放

#### 連続ログイン系（1種）
連続ログイン日数に応じて解放

### 5.2 実績チェックタイミング

- ステージクリア時
- チャレンジモード終了時
- アプリ起動時（ログイン判定）

### 5.3 実績判定条件タイプ

| タイプ | 判定内容 |
|--------|----------|
| `challenge_streak` | チャレンジ最高連勝数 |
| `total_clears` | 累計クリア数 |
| `golden_clears` | ゴールデンワンコクリア数 |
| `use_all_dogs` | 初期4犬種すべて使用 |
| `total_pieces` | 累計ピース消去数 |
| `max_combo` | 最大コンボ数 |
| `consecutive_clears` | 最大連続クリア数 |
| `consecutive_logins` | 連続ログイン日数 |
| `theme_clears` | テーマ別クリア数 |
| `no_miss_clears` | ノーミスクリア数 |
| `day_of_week_clears` | 曜日別クリア数 |
| `weekly_complete` | 週間ミッション完走回数 |
| `dog_specific_clears` | 特定犬種使用クリア数 |

---

## 6. カスタマイズシステム

### 6.1 肉球カラー（16種類）

パス描画時の肉球トレイルの色を変更できます。

| ID | 名前 | カラー | 解放条件 |
|----|------|--------|----------|
| brown | こげちゃ | #8B4513 | デフォルト |
| pink | ピンク | #FFB6C1 | ステージ10回クリア |
| red | あか | #FF6B6B | ステージ15回クリア |
| blue | あお | #4169E1 | チャレンジ3連続クリア |
| cyan | みずいろ | #00CED1 | ステージ20回クリア |
| green | みどり | #32CD32 | ステージ25回クリア |
| purple | むらさき | #9370DB | チャレンジ5連続クリア |
| orange | オレンジ | #FFA500 | ステージ30回クリア |
| gold | きん | #FFD700 | ステージ40回クリア |
| gray | グレー | #808080 | 初期4犬種をすべて使用 |
| lavender | ラベンダー | #E6E6FA | チャレンジ7連続クリア |
| lime | ライム | #32CD32 | チャレンジ12連続クリア |
| teal | ティール | #008080 | チャレンジ15連続クリア |
| magenta | マゼンタ | #FF00FF | ステージ50回クリア |
| yellow | きいろ | #FFD700 | チャレンジ10連続クリア |
| rainbow | にじいろ | 虹色 | 全肉球カラー（rainbow以外）を獲得 |

### 6.2 テーマ（9種類）

ゲーム画面の背景を変更できます。

| ID | 名前 | 解放条件 |
|----|------|----------|
| default | こうえん | デフォルト |
| beach | うみ | ステージ20回クリア |
| snow | ゆき | チャレンジ5連続クリア |
| sunset | ゆうやけ | ステージ30回クリア |
| night | よる | チャレンジ4連続クリア |
| sakura | さくら | チャレンジ6連続クリア |
| fireworks | はなび | チャレンジ8連続クリア |
| rainbow | にじ | チャレンジ14連続クリア |
| starry | ほしぞら | チャレンジ20連続クリア |

### 6.3 きせかえアイテム（8種類）

犬に装着できるアクセサリーです。複数同時装備可能。

#### 頭につけるもの（type: hat）
| ID | 名前 | アイコン | 解放条件 |
|----|------|----------|----------|
| crown_gold | おうかん | 👑 | メダル15枚 |
| hat_straw | むぎわらぼうし | 👒 | メダル15枚 |
| beret | ベレーぼう | 🎨 | メダル15枚 |

#### 耳につけるもの（type: flower）
| ID | 名前 | アイコン | 解放条件 |
|----|------|----------|----------|
| flower_sakura | さくら | 🌸 | メダル15枚 |
| flower_sunflower | ひまわり | 🌻 | メダル15枚 |

#### 首につけるもの（type: accessory）
| ID | 名前 | アイコン | 解放条件 |
|----|------|----------|----------|
| ribbon_red | あかリボン | 🎀 | メダル15枚 |

#### 顔につけるもの（type: glasses）
| ID | 名前 | アイコン | 解放条件 |
|----|------|----------|----------|
| glasses_star | ほしメガネ | ⭐ | メダル15枚 |
| glasses | サングラス | 🕶️ | メダル15枚 |

### 6.4 カスタマイズ画面

`CustomizeScene`で管理されます。

- **タブ構成**: カラー / 衣装 / テーマ
- **表示**: スクロール可能なグリッド
- **装備中表示**: ゴールドグロー + パルスアニメーション + ✓マーク
- **未解放表示**: グレーアウト + 🔒アイコン

---

## 7. デイリーミッション・メダルシステム

### 7.1 ミッション一覧

#### 簡単（difficulty: easy）
| ID | 名前 | 目標 | タイプ |
|----|------|------|--------|
| play_1 | おさんぽする | 1回 | clear |
| challenge_try | エンドレスであそぶ | 1回 | challenge_try |

#### 普通（difficulty: normal）
| ID | 名前 | 目標 | タイプ |
|----|------|------|--------|
| play_2 | 2回おさんぽする | 2回 | clear |
| challenge_1 | エンドレスで1回クリア | 1回 | challenge |
| perfect_1 | ノーミスでクリアする | 1回 | perfect |

#### ちょいムズ（difficulty: hard）
| ID | 名前 | 目標 | タイプ |
|----|------|------|--------|
| play_3 | 3回おさんぽする | 3回 | clear |
| challenge_3 | エンドレスで3回クリア | 3回 | challenge |

### 7.2 ミッション選出ルール

毎日0時にリセット・再抽選されます。

```
1. 簡単（easy）から1つ
2. 普通（normal）から1つ
3. 残りからランダムに1つ

※同じtypeのミッションは重複しない
```

### 7.3 メダルシステム

- **獲得方法**: 各ミッション達成で1枚ずつ獲得可能
- **使用用途**: きせかえアイテムの解放（15枚必要）
- **永続保存**: `rewards.medals`に累計枚数を保存

### 7.4 スタンプラリー

#### 仕組み
- その日の全ミッション達成でスタンプ1個獲得
- 1週間（7日）で1サイクル
- 7日分のスタンプを集めると週間ボーナス

#### 週間ボーナス
- **報酬**: メダル3枚
- **条件**: 7日連続スタンプ獲得
- **リセット**: ボーナス受取後に次週へ

### 7.5 「きょうのおさんぽ」カード

メインメニューに表示される今日のミッション状況カード。

```
┌────────────────────────────┐
│  きょうのおさんぽ           │
├────────────────────────────┤
│ ✓ おさんぽする      [🏅]   │
│ ○ エンドレスで1回   [GET!] │
│ ○ 3回おさんぽ  2/3  [━━━]  │
└────────────────────────────┘
```

---

## 8. 画面構成・UI

### 8.1 画面遷移図

```
BootScene（起動・読み込み）
    ↓
TitleScene（タイトル）
    ├── SettingsScene（設定）
    │
    └── MainMenuScene（メインメニュー）
            ├── SelectScene（ステージ選択）
            │       └── GameScene（ゲームプレイ）
            │               ├── ClearScene（クリア）
            │               │       └── ItemUnlockScene（アイテム獲得）
            │               │
            │               └── GameOverScene（ゲームオーバー）
            │
            ├── GameScene（エンドレスモード）
            │       └── LegendUnlockScene（伝説獲得）
            │
            ├── DogSelectScene（ワンコ選択）
            ├── ZukanScene（図鑑）
            ├── CustomizeScene（きせかえ）
            ├── ShopScene（ショップ）
            ├── StampRallyScene（スタンプラリー）
            └── MedalCelebrationScene（メダル獲得演出）
```

### 8.2 各画面の役割

| シーン名 | 役割 |
|----------|------|
| BootScene | アセット読み込み、レベル生成、初期化 |
| TitleScene | タイトル表示、ゲーム開始 |
| MainMenuScene | モード選択、デイリーミッション表示 |
| SelectScene | 100ステージから選択 |
| GameScene | パズルゲーム本体 |
| ClearScene | クリア演出、次へ進む |
| GameOverScene | エンドレス終了、スコア表示 |
| DogSelectScene | プレイで使用するワンコ選択 |
| ZukanScene | ワンコ図鑑 |
| CustomizeScene | 肉球カラー、きせかえ、テーマ選択 |
| ShopScene | 課金アイテム購入 |
| SettingsScene | BGM/SE設定、データリセット |
| AchievementUnlockScene | 実績解除演出 |
| ItemUnlockScene | アイテム獲得演出 |
| LegendUnlockScene | 伝説ワンコ獲得演出 |
| MedalCelebrationScene | メダル獲得演出 |
| StampRallyScene | スタンプ収集状況表示 |

### 8.3 UI設計方針

#### 桜井イズムに基づく設計原則
1. **視認性**: テキストには必ず縁取りと影
2. **手触り**: 押した感触が伝わるボタン設計
3. **テンポ**: 適切なアニメーション時間

#### ボタンデザイン（多層構造）
```
1. ドロップシャドウ（深い影）
2. 下部レイヤー（濃い色、ベベル効果）
3. メイン背景（グラデーション）
4. 上部ハイライト（ツヤ感）
5. 最上部光沢ライン
6. 縁取り（白、太め）
7. テキスト（縁取り + 影）
```

#### グラスモーフィズム
- 半透明背景（rgba白、0.55）
- 上部グラデーション
- 細い枠線（1.5px）
- 控えめな影

### 8.4 カラーパレット

```javascript
PALETTE = {
    // 背景
    sky: 0x87CEEB,      // 明るい空色
    grass: 0x8FBC8F,    // 芝生
    ground: 0xDEB887,   // 地面
    
    // UI
    uiBg: 0xFFFDF5,     // UI背景
    uiOutline: 0x5D4E37,// UI縁取り
    textDark: '#4A4A4A',// 濃いテキスト
    textLight: '#FFFFFF',// 明るいテキスト
    
    // アクセント
    pink: 0xFF69B4,     // ピンク（メイン）
    orange: 0xFFA500,   // オレンジ
    teal: 0x008080,     // ティール
    gold: 0xFFD700,     // 金色
}
```

### 8.5 フォント

- **メインフォント**: KeiFont（けいフォント）
- **フォールバック**: -apple-system, sans-serif
- **特徴**: 丸みのある可愛らしいデザイン

---

## 9. マネタイズ

### 9.1 広告システム

#### インタースティシャル広告
- **表示タイミング**: 5ステージクリアごと
- **プラットフォーム**: Google AdMob
- **スキップ**: 不可
- **広告削除購入**: 可能

### 9.2 課金アイテム

| 商品ID | 商品名 | タイプ | 説明 |
|--------|--------|--------|------|
| `com.kerofen.inusanpo.remove_ads` | 広告削除 | 非消費型 | すべての広告を永久に削除 |
| `com.kerofen.inusanpo.premium_dogs` | プレミアム犬種パック | 非消費型 | 特別な犬種をすべて解放 |

### 9.3 無料プレイヤー vs 課金プレイヤー

| 項目 | 無料 | 広告削除購入 | プレミアムパック購入 |
|------|------|-------------|---------------------|
| 広告表示 | あり（5ステージごと） | なし | あり |
| 犬種解放 | 実績達成で解放 | 実績達成で解放 | 全解放 |
| ゲームプレイ | 制限なし | 制限なし | 制限なし |

### 9.4 購入復元

- **iOS**: StoreKit 2
- **Android**: Google Play Billing
- **機能**: 機種変更時などに購入状態を復元

---

## 10. データ管理

### 10.1 保存場所

- **方式**: localStorage
- **キー**: `'wantsunagi_data'`
- **フォーマット**: JSON

### 10.2 保存データ概要

```javascript
{
    // 犬種関連
    unlockedDogs: [],        // 解放済み犬種ID
    selectedDogs: [],        // 選択中の犬種ID
    dogUnlockDates: {},      // 解放日記録
    
    // 実績
    achievements: {},        // 実績解放状態
    
    // 統計
    stats: {
        totalClears: 0,              // 累計クリア数
        challengeHighScore: 0,       // チャレンジ最高連勝
        totalPieces: 0,              // 累計ピース数
        consecutiveLogins: 0,        // 連続ログイン
        // ... その他多数
    },
    
    // デイリー
    daily: {
        missions: [],        // 今日のミッション
        progress: {},        // 進捗
        medalsClaimedToday: [],
    },
    
    // カスタマイズ
    customize: {
        pawColor: null,      // 肉球カラー
        theme: 'default',    // テーマ
        equippedCostumes: [],// きせかえ
    },
    
    // メダル・報酬
    rewards: {
        medals: 0,           // メダル枚数
        stamps: [],          // 週間スタンプ
    },
    
    // 設定
    settings: {
        bgmEnabled: true,
        seEnabled: true,
        bgmVolume: 1.0,
        seVolume: 1.0,
    },
    
    // 購入
    purchases: {
        adFree: false,
        allDogs: false,
    },
    
    // チュートリアル
    tutorial: {
        completed: false,
    },
}
```

### 10.3 別途保存されるデータ

| キー | 内容 |
|------|------|
| `'inusanpo_cleared'` | クリア済みステージID配列 |
| `'challengeHighScore'` | チャレンジ最高スコア |
| `'inusanpo_ads_removed'` | 広告削除フラグ |
| `'inusanpo_purchase_state'` | 購入状態 |
| `'selectedDog'` | 選択中の犬（旧形式） |

---

## 付録

### A. 効果音一覧

| キー | ファイル | 用途 |
|------|----------|------|
| sfx_ui_tap | ui_tap.mp3 | ボタンタップ |
| sfx_draw_start | draw_start.mp3 | 描画開始 |
| sfx_draw_step | draw_step.mp3 | 描画ステップ |
| sfx_connect | connect.mp3 | ペア接続成功 |
| sfx_clear | clear.mp3 | ステージクリア |
| sfx_gameover | gameover.mp3 | ゲームオーバー |
| sfx_achievement | achievement.mp3 | 実績獲得 |
| sfx_reset | reset.mp3 | リセット |

### B. BGM一覧

| キー | ファイル | 使用シーン |
|------|----------|------------|
| bgm_title | bgm_title_comicalnichijo.mp3 | タイトル画面 |
| bgm_select | bgm_menu_puzzle_cooking.mp3 | セレクト画面 |
| bgm_story | bgm_game_honobono.mp3 | ストーリーモード |
| bgm_challenge | bgm_game_honobono.mp3 | チャレンジモード |

### C. バージョン履歴

| バージョン | 日付 | 内容 |
|------------|------|------|
| 1.0.0 | 2026/01 | 初版リリース |

---

*このドキュメントは「ワンこねくと」の完全な仕様を記載しています。*
